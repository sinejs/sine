!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sine=e():t.sine=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i={};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(i),n.d(i,"component",(function(){return Sn})),n.d(i,"directive",(function(){return jn})),n.d(i,"filter",(function(){return _n})),n.d(i,"service",(function(){return Pn}));var o=!0,s=Object.prototype.toString,u=Object.getPrototypeOf;function c(t,e,n){if(k(t)){for(var i=0;i<t.length;i++)if(e(t[i],i))return}else if($(t)){for(var r in t)if((n||t.hasOwnProperty(r))&&e(t[r],r))return}else e(t,t)}function a(t,e){if(k(t)){for(var n=0;n<t.length;n++)if(e(n,t[n]))return!0}else{if(!$(t))return e(t,t);for(var i in t)if(t.hasOwnProperty(i)&&e(i,t[i]))return!0}}function l(){var t,e=!1,n=0,i=arguments[n];if(_(i)&&(e=i,n++,i=arguments[n]),arguments.length>n+1&&(t=arguments[n+1]),k(i)){var r=[];return i.forEach((function(n,o){(null==t||t(i,o,n))&&r.push(e?l(n):n)})),r}if($(i)){var o=m(i);return c(i,(function(n,r){(null==t||t(i,r,n))&&(o[r]=e?l(n):n)})),o}return i}function f(){var t=!1,e=0,n=arguments[e];_(n)&&(t=n,n=arguments[++e]),t?Array.prototype.slice.call(arguments,e+1).forEach((function(t){y(n,t)})):Array.prototype.slice.call(arguments,e+1).forEach((function(t){p(n,t)}))}function h(){var t=!1,e=0,n={};return _(arguments[e])&&(t=arguments[e],e++),t?Array.prototype.slice.call(arguments,e).forEach((function(t){y(n,t)})):Array.prototype.slice.call(arguments,e).forEach((function(t){p(n,t)})),n}function p(t,e){c(e,(function(e,n){t[n]=e}))}function y(t,e){c(e,(function(e,n){null==t[n]?t[n]=e:$(t[n])&&$(e)?y(t[n],e):t[n]=e}))}function m(t){function e(){}return e.prototype=t,new e}function d(t,e){!function(t,e){var n=m(e.prototype);n.constructor=t,t.prototype=n}(t,e),t.super=function(){e.apply(this,arguments)}}function v(t){return E(t)?t.toLowerCase():t}function b(t){return E(t)?t.toUpperCase():t}function g(t){return void 0===t}function w(t){return void 0!==t}function k(t){return t instanceof Array}function $(t){return null!==t&&"object"===r(t)}function x(t){return null!==t&&"object"===r(t)&&!u(t)}function E(t){return"string"==typeof t}function O(t){return"number"==typeof t}function C(t){return"[object Date]"===s.call(t)}function S(t){return"function"==typeof t}function j(t){return"[object RegExp]"===s.call(t)}function _(t){return"boolean"==typeof t}function P(t){return"undefined"!=typeof FormData&&t instanceof FormData}function T(t,e){var n=t===e;return n||(k(t)&&k(e)?t.length===e.length&&(n=!a(t,(function(t,n){return!T(n,e[t])}))):$(t)&&$(e)&&u(t)===u(e)&&(n=!a(t,(function(t,n){return!T(n,e[t])})))),n}function N(t){o&&console.log(t)}function A(t,e){return t.some((function(t){return t===e}))}function D(t,e,n){return t.some((function(t){return t===e||n&&v(t)===v(e)}))}function I(t,e,n){if(!t)return!1;for(var i,r=!0,o=e.split("."),s=t;r&&o.length>0;)i=o.shift(),r=!1,c(s,(function(t,e){return(r=e===i||n&&v(e)===v(i))&&(s=t),r}),!0);return r}function M(t,e,n){if(!t)return null;for(var i,r=!0,o=e.split("."),s=t;r&&o.length>0;)i=o.shift(),r=!1,c(s,(function(t,e){return(r=e===i||n&&v(e)===v(i))&&(s=t),r}),!0);return r?s:null}function V(t,e,n,i){if(t){for(var r,o=!0,s=e.split("."),u=t;o&&s.length>0;)r=s.shift(),0===s.length?u[r]=n:(o=!1,c(u,(function(t,e){return(o=e===r||i&&v(e)===v(r))&&(u=t),o}),!0));if(!o)throw new Error(e+": Can not set property of undefined")}}function L(){return Array.prototype.concat.apply([],arguments)}function R(t,e){var n=function(t){return null==e?t:e(t)};return t.sort((function(t,e){return n(t)<n(e)?-1:n(t)>n(e)?1:0}))}function U(t,e){var n=function(t){return null==e?t:e(t)};return t.sort((function(t,e){return n(t)<n(e)?1:n(t)>n(e)?-1:0}))}function q(t){var e=parseFloat(t);return isNaN(e)?t:e}function F(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function W(){if(0!==arguments.length){for(var t,e,n,i=arguments[0],r=/\{(\d+)\}/g;t=r.exec(i);){if(e=t[0],n=Number.parseInt(t[1])+1,arguments.length<=n)throw new Error("format item "+n+"is not defined");i=i.substring(0,t.index)+arguments[n]+i.substring(t.index+e.length)}return i}}function B(t){return Array.prototype.slice.call(t.childNodes,0)}function H(t){B(t).forEach((function(e){t.removeChild(e)}))}function K(t,e){var n=t.parentNode;null!=n&&(n.insertBefore(e,t),n.removeChild(t))}function z(t){var e=t.parentNode;null!=e&&e.removeChild(t)}function Y(t,e){var n=t.parentNode;B(n).forEach((function(i){i.previousSibling===t&&i!==e&&n.removeChild(i),i.nextSibling===e&&i!==t&&n.removeChild(i)}))}function Z(t,e){var n=t.parentNode;n.lastChild===t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}function G(t,e){var n=!1;return requestAnimationFrame((function i(){n||(t.clientWidth>0&&t.clientHeight>0?e():requestAnimationFrame(i))})),function(){n=!0}}function X(t,e){var n=!1;return requestAnimationFrame((function i(){n||(0===t.clientWidth&&0==t.clientHeight?e():requestAnimationFrame(i))})),function(){n=!0}}function J(t,e){var n=!1,i=!1;return requestAnimationFrame((function r(){n||(t.clientWidth>0&&t.clientHeight>0?i||(i=!0,null!=e.onEnter&&e.onEnter.call(e)):i&&(i=!1,null!=e.onLeave&&e.onLeave.call(e)),requestAnimationFrame(r))})),function(){n=!0}}function Q(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function tt(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}var et={start:0,opened:1,sent:2,received:3,finish:4};function nt(t,e){return null!=e.data&&"get"===e.method.toLowerCase()&&c(e.data,(function(e,n){!function(t,e,n){t+=-1===t.indexOf("?")?"?":"&",t+=encodeURIComponent(e)+"="+encodeURIComponent(n)}(t,n,e)})),t}function it(t){return function(t,e){return new Promise(t,e)}((function(e,n){var i=new XMLHttpRequest;P(t.data)&&delete t.data["Content-Type"],i.onreadystatechange=function(){if(i&&i.readyState===et.finish&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var r,o,s,u,a,l="getAllResponseHeaders"in i?(r=i.getAllResponseHeaders(),a={},r?(c(r.split("\n"),(function(t,e){if(u=t.indexOf(":"),o=t.substr(0,u).trim().toLowerCase(),s=t.substr(u+1).trim(),o){if(a[o]&&ignoreDuplicateOf.indexOf(o)>=0)return;a[o]="set-cookie"===o?(a[o]?a[o]:[]).concat([s]):a[o]?a[o]+", "+s:s}})),a):a):null,f={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:l,config:t,request:i};i.status>=200&&i.status<300||304==i.status?e(f):n(f),i=null}},i.open(t.method.toLowerCase(),nt(t.url,t),!0),i.send(t.data)}))}function rt(t,e,n){var i={method:"get",url:t,data:e};return null!=n&&f(i,n),it(i)}function ot(t,e,n){var i={method:"post",url:t,data:e};return null!=n&&f(i,n),it(i)}function st(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ut(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ct(t,e,n){return e&&ut(t.prototype,e),n&&ut(t,n),t}var at=function(){function t(){st(this,t),this.handlers=[]}return ct(t,[{key:"on",value:function(t){this.handlers.push(t)}},{key:"off",value:function(t){for(var e=0;e<this.handlers.length;e++)this.handlers[e]===t&&this.handlers.splice(e,1)}},{key:"fire",value:function(t,e){var n;e=e||this;for(var i=0;i<this.handlers.length;i++)S(this.handlers[i])&&(n=this.handlers[i].call(e,t));return n}}]),t}(),lt=function(){function t(){st(this,t),this.messengers={}}return ct(t,[{key:"get",value:function(t){return this.messengers[t]||(this.messengers[t]=new at),this.messengers[t]}},{key:"on",value:function(t,e){this.get(t).on(e)}},{key:"off",value:function(t,e){this.get(t).off(e)}},{key:"fire",value:function(t,e,n){return this.get(t).fire(e,n)}}]),t}();function ft(t){return t instanceof at}function ht(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pt={filter:"filter",service:"service",component:"component",directive:"directive"},yt=/^[a-z_\$][\w\$-]*/i,mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container={},this.waitingToExtends={},this.insContainer={}}var e,n,i;return e=t,(n=[{key:"getMapping",value:function(t){return this.container[t]||(this.container[t]={}),this.container[t]}},{key:"getInstances",value:function(t){return this.insContainer[t]||(this.insContainer[t]=[]),this.insContainer[t]}},{key:"register",value:function(t,e,n){if(-1!==e.indexOf("."))throw new Error('Illegal character "."');var i=this.getMapping(t);if(null==i[e])i[e]=[];else{var r=i[e].filter((function(t){return t.prototype.$$meta.namespace===n.prototype.$$meta.namespace}));if(r.length>0)throw new Error(e+" is exist under namespace "+r[0].prototype.$$meta.namespace)}i[e].push(n)}},{key:"registerComponent",value:function(t,e){this.register(pt.component,t,e)}},{key:"registerDirective",value:function(t,e){this.register(pt.directive,t,e)}},{key:"contains",value:function(t,e,n){var i,r=this.getMapping(t),o=e.split("."),s="";return o.length>1&&(e=o.pop(),s=o.join(".")),null!=(i=n?M(r,e,!0):r[e])&&!(s&&i.length>0&&0===(i=i.filter((function(t){var e=t.prototype.$$meta;return e.namespace&&v(e.namespace)===v(s)}))).length)}},{key:"containsComponent",value:function(t){return this.contains(pt.component,t,!0)}},{key:"containsDirective",value:function(t){return this.contains(pt.directive,t,!0)}},{key:"get",value:function(t,e,n){var i,r=this.getMapping(t),o=e.split("."),s="";if(o.length>1&&(e=o.pop(),s=o.join(".")),null==(i=n?M(r,e,!0):r[e]))throw new Error(t+" "+e+" is not defined");if(s&&i.length>0&&0===(i=i.filter((function(t){var e=t.prototype.$$meta;return e.namespace&&v(e.namespace)===v(s)}))).length)throw new Error(e+" is not exist under namespace "+s);if(i.length>1){var u=i.map((function(t){return t.prototype.$$meta.namespace}));throw new Error("namespace "+u.join("|")+" all have "+e)}return i[0]}},{key:"getComponent",value:function(t){return this.get(pt.component,t)}},{key:"getDirective",value:function(t){return this.get(pt.directive,t)}},{key:"getFilter",value:function(t){return this.get(pt.filter,t)}},{key:"getService",value:function(t){return this.get(pt.service,t)}},{key:"create",value:function(t,e){var n,i=this.get(t,e);switch(t){case pt.component:n=this.createComponent(i);break;case pt.directive:n=this.createDirective(i);break;case pt.filter:n=this.createFilter(i);break;case pt.service:n=this.createService(i);break;default:n=new i}return n}},{key:"createComponent",value:function(t){return E(t)&&(t=this.getComponent(t)),new t}},{key:"createDirective",value:function(t){return E(t)&&(t=this.getDirective(t)),new t}},{key:"createFilter",value:function(t){return E(t)&&(t=this.getFilter(t)),new t}},{key:"createService",value:function(t){var e,n=this.getInstances(pt.service);if(E(t)&&(t=this.getService(t)),!t.prototype.$$meta.nonShared){var i=n.filter((function(e){return e instanceof t}));i.length&&(e=i[0])}return e||(e=new t,n.push(e)),e}},{key:"service",value:function(t){return this.createService(t)}},{key:"getWaitingToExtends",value:function(t){return this.waitingToExtends[t]||(this.waitingToExtends[t]=[]),this.waitingToExtends[t]}},{key:"setWaitingToExtends",value:function(t,e){this.waitingToExtends[t]=e}},{key:"checkSelector",value:function(t,e){if(yt.test(t)){var n="";switch(t.split("-").forEach((function(t){n+=b(t[0])+t.substring(1)})),e){case pt.component:n+="Component";break;case pt.directive:n+="Directive";break;case pt.filter:n+="Filter";break;case pt.service:n+="Service"}return n}throw new Error(t+"is not a valid name")}},{key:"buildConstructor",value:function(t,e,n){var i,r=this,o=this.checkSelector(t,n.contractType),s=r.getWaitingToExtends(n.contractType);if(i=new Function("onConstruct",'"use strict";return function '+o+"(){onConstruct.call(this);};")((function(){S(i.super)&&i.super.call(this),S(e.construct)&&e.construct.call(this,at)})),S(n.superClass)&&d(i,n.superClass),e.selector=t,E(e.extends))if(dt.contains(n.contractType,e.extends)){var u=dt.get(n.contractType,e.extends);c(t,e,i,u)}else s.push({superName:e.extends,callback:function(n){c(t,e,i,n)}});else c(t,e,i);function c(t,e,i,o){null!=o&&d(i,o),$(e.methods)&&f(i.prototype,e.methods),r.registerConstructor(n.contractType,t,i,e);var u=[],c=e.namespace+"."+t;s.forEach((function(t){t.superName===c?t.callback.call(null,i):u.push(t)})),r.setWaitingToExtends(n.contractType,u)}return i}},{key:"registerConstructor",value:function(t,e,n,i){var r=n.prototype.$$meta;if(r&&r.protected)throw new Error(t+": "+i.extends+" is protected, it is not allowed to extend!");i=h(!0,l(!0,r,(function(t,e){return!(t===r&&("construct"===e||"methods"===e))})),i),n.prototype.$$meta=i,i.local||dt.register(t,e,n)}},{key:"injectServices",value:function(t){var e=this,n=t.$getMeta();$(n.inject)&&c(n.inject,(function(n,i){Object.defineProperty(t,i,{enumerable:!1,configurable:!1,get:function(){var r="$$"+i;return null==t[r]&&(t[r]=e.createService(n)),t[r]}})}))}}])&&ht(e.prototype,n),i&&ht(e,i),t}(),dt=new mt;function vt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var bt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entity:6,processingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12,connection:101},gt=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodeType=e,this.nodeName=n,this.nodeValue=i,this.childNodes=[],this.parentNode=null,this.previousSibling=null,this.nextSibling=null,this.firstChild=null,this.lastChild=null,this.ownerDocument=null,this.scope=null}var e,n,i;return e=t,(n=[{key:"$pushChild",value:function(t){t.parentNode=this,this.childNodes.push(t)}},{key:"$buildSibling",value:function(){if(0!==this.childNodes.length){var t=this;1===this.childNodes.length?(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[0]):(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1],this.childNodes.forEach((function(e,n){0!==n?n!==t.childNodes.length-1?(e.previousSibling=t.childNodes[n-1],e.nextSibling=t.childNodes[n+1]):e.previousSibling=t.childNodes[n-1]:e.nextSibling=t.childNodes[n+1]}))),this.childNodes.forEach((function(t){t.$buildSibling()}))}}},{key:"$clearParentAndSibling",value:function(){this.parentNode=null,this.previousSibling=null,this.nextSibling=null}},{key:"$remove",value:function(){null!=this.parentNode&&this.parentNode.removeChild(this)}},{key:"$destroy",value:function(){this.$remove(),this.$clearParentAndSibling(),this.childNodes.length=0,this.firstChild=null,this.lastChild=null,this.ownerDocument=null,this.scope=null}},{key:"hasChildNodes",value:function(){return 0!==this.childNodes.length}},{key:"clearChildNodes",value:function(){this.childNodes.forEach((function(t){t.destroy()})),this.childNodes.length=0}},{key:"appendChild",value:function(t){return null!=t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,0===this.childNodes.length?this.firstChild=t:(this.lastChild.nextSibling=t,t.previousSibling=this.lastChild),t.compile(this.compileOptions),this.lastChild=t,this.childNodes.push(t),t}},{key:"insertBefore",value:function(t,e){null!=e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);if(-1===n)throw new Error("Ref node is not a child of specified node");return e.parentNode=this,null!=t.previousSibling&&(e.previousSibling=t.previousSibling,t.previousSibling.nextSibling=e),e.nextSibling=t,t.previousSibling=e,0===n&&(this.firstChild=e),e.compile(this.compileOptions),this.childNodes.splice(n,0,e),e}},{key:"insertAfter",value:function(t,e){return null==t.nextSibling?this.appendChild(e):this.insertBefore(t.nextSibling,e)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Remove node is not a child of specified node");return null!=t.previousSibling&&(t.previousSibling.nextSibling=t.nextSibling),null!=t.nextSibling&&(t.nextSibling.previousSibling=t.previousSibling),0===e&&(this.firstChild=t.nextSibling),e===this.childNodes.length-1&&(this.lastChild=t.previousSibling),t.$clearParentAndSibling(),this.childNodes.splice(e,1),t}},{key:"replaceChild",value:function(t,e){null!=e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);if(-1===n)throw new Error("Ref node is not a child of specified node");return e.parentNode=this,e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,this.firstChild===t&&(this.firstChild=e),this.lastChild===t&&(this.lastChild=e),t.$clearParentAndSibling(),e.compile(this.compileOptions),this.childNodes.splice(n,1,e),e}},{key:"cloneNode",value:function(){throw new Error("not implemented")}},{key:"compile",value:function(t){this.childNodes.forEach((function(e){e.compile(t)}))}},{key:"notifyCompiled",value:function(t){this.childNodes.forEach((function(e){e.notifyCompiled(t)}))}},{key:"link",value:function(t){return this.scope=t,this.childNodes.map((function(e){e.link(t)}))}},{key:"notifyLinked",value:function(){this.childNodes.forEach((function(t){t.notifyLinked()}))}},{key:"detect",value:function(){this.hasChange()&&this.update()}},{key:"hasChange",value:function(){return!1}},{key:"update",value:function(){}},{key:"destroy",value:function(){this.childNodes.map((function(t){t.destroy()})),this.$destroy()}}])&&vt(e.prototype,n),i&&vt(e,i),t}(),wt={},kt={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};function $t(t){this.options=t}"+ - * / % === !== == != < > <= >= && || ! = |".split(" ").forEach((function(t){wt[t]=!0})),$t.prototype.lex=function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=wt[e],o=wt[n],s=wt[i];if(r||o||s){var u=s?i:o?n:e;this.tokens.push({index:this.index,text:u,operator:!0}),this.index+=u.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},$t.prototype.is=function(t,e){return-1!==e.indexOf(t)},$t.prototype.peek=function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},$t.prototype.isNumber=function(t){return"0"<=t&&t<="9"&&"string"==typeof t},$t.prototype.isWhitespace=function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"Â "===t},$t.prototype.isIdentifierStart=function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},$t.prototype.isValidIdentifierStart=function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},$t.prototype.isIdentifierContinue=function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},$t.prototype.isValidIdentifierContinue=function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},$t.prototype.codePointAt=function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},$t.prototype.peekMultichar=function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},$t.prototype.isExpOperator=function(t){return"-"===t||"+"===t||this.isNumber(t)},$t.prototype.throwError=function(t,e,n){n=n||this.index;var i=w(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw new Error("Lexer Error: "+t+" at column"+i+" in expression ["+this.text+"].")},$t.prototype.readNumber=function(){for(var t="",e=this.index;this.index<this.text.length;){var n=v(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},$t.prototype.readIdent=function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},$t.prototype.readString=function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=kt[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)};var xt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},Et={};function Ot(t){this.type=t,this.childNodes=[]}function Ct(){Ct.super.call(this,Et.Program)}function St(){St.super.call(this,Et.ExpressionStatement)}function jt(t,e,n){jt.super.call(this,Et.AssignmentExpression),this.left=t,this.right=e,this.operator=n}function _t(t,e,n){_t.super.call(this,Et.ConditionalExpression),this.test=t,this.alternate=e,this.consequent=n}function Pt(t,e,n){Pt.super.call(this,Et.LogicalExpression),this.operator=t,this.left=e,this.right=n}function Tt(t,e,n){Tt.super.call(this,Et.BinaryExpression),this.operator=t,this.left=e,this.right=n}function Nt(t,e){Nt.super.call(this,Et.UnaryExpression),this.prefix=!0,this.operator=t,this.arg=e}function At(t){At.super.call(this,Et.Literal),this.value=t}function Dt(t,e){Dt.super.call(this,Et.CallExpression),this.callee=t,this.args=e,this.filter=!1}function It(t,e,n){It.super.call(this,Et.MemberExpression),this.object=t,this.property=e,this.computed=n,this.allowNull=!1}function Mt(t){Mt.super.call(this,Et.Identifier),this.name=t,this.allowNull=!1}function Vt(){Vt.super.call(this,Et.ArrayExpression)}function Lt(){Lt.super.call(this,Et.Property),this.kind="init",this.key=null,this.value=null,this.computed=!1}function Rt(t){Rt.super.call(this,Et.ObjectExpression),this.properties=t}function Ut(t,e){this.lexer=t,this.options=e}function qt(t){qt.super.call(this,t)}function Ft(t,e){Ft.super.call(this,t,e)}Et.Program="Program",Et.ExpressionStatement="ExpressionStatement",Et.AssignmentExpression="AssignmentExpression",Et.ConditionalExpression="ConditionalExpression",Et.LogicalExpression="LogicalExpression",Et.BinaryExpression="BinaryExpression",Et.UnaryExpression="UnaryExpression",Et.CallExpression="CallExpression",Et.MemberExpression="MemberExpression",Et.Identifier="Identifier",Et.Literal="Literal",Et.ArrayExpression="ArrayExpression",Et.Property="Property",Et.ObjectExpression="ObjectExpression",Ot.prototype.appendChild=function(t){this.childNodes.push(t)},Ot.prototype.compute=function(t,e,n){return this.childNodes.map((function(i){return i.compute(t,e||{},n)}))},Ot.prototype.hasCC=function(){return this.childNodes.some((function(t){return t.hasCC()}))},d(Ct,Ot),Ct.prototype.compute=function(t,e){var n=this.childNodes[0].compute(t,e||{});return n instanceof xt?null:n},Ct.prototype.getMemberExpression=function(){return this.childNodes[0].getMemberExpression()},d(St,Ot),St.prototype.compute=function(t,e,n){return this.childNodes[0].compute(t,e||{},n)},St.prototype.getMemberExpression=function(){var t=this.childNodes[0];return t instanceof It?t:null},d(jt,Ot),jt.prototype.compute=function(t,e){var n=this.left.compute(t,e,{assignmentLeft:!0}),i=this.right.compute(t,e);n.obj[n.prop]=i},d(_t,Ot),_t.prototype.compute=function(t,e){return this.test.compute(t,e)?this.alternate.compute(t,e):this.consequent.compute(t,e)},_t.prototype.hasCC=function(){return!0},d(Pt,Ot),Pt.prototype.compute=function(t,e){var n,i=this.left.compute(t,e),r=this.right.compute(t,e);switch(this.operator){case"&&":case"||":n=i&&r}return n},d(Tt,Ot),Tt.prototype.compute=function(t,e){var n,i=this.left.compute(t,e),r=this.right.compute(t,e);switch(this.operator){case"+":n=i+r;break;case"-":n=i-r;break;case"*":n=i*r;break;case"/":n=i/r;break;case"%":n=i%r;break;case"<":n=i<r;break;case">":n=i>r;break;case"<=":n=i<=r;break;case">=":n=i>=r;break;case"==":n=i==r;break;case"!=":n=i!=r;break;case"===":n=i===r;break;case"!==":n=i!==r}return n},d(Nt,Ot),Nt.prototype.compute=function(t,e){var n,i=this.arg.compute(t,e);switch(this.operator){case"+":n=i;break;case"-":n=-i;break;case"!":n=!i}return n},d(At,Ot),At.prototype.compute=function(){return this.value},At.prototype.toText=function(){return this.value},d(Dt,Ot),Dt.prototype.compute=function(t,e){var n=this.callee.compute(t,e,{callee:!0}),i=this.args.map((function(n){return n.compute(t,e)}));if(this.filter){var r=e.createFilter(n.prop);if(xn(r))return r.$execute.apply(r,i);throw new Error('Filter "'+n.prop+'" is not defined')}var o=n.obj[n.prop];if(S(o))return o.apply(n.obj,i);throw new Error(n.prop+" is not a function")},Dt.prototype.hasCC=function(){return!this.filter},d(It,Ot),It.prototype.compute=function(t,e,n){var i=this.object.compute(t,e);if(null==i&&this.object.allowNull&&(i=new xt),this.computed){var r=this.property.compute(t,e,n);return k(e.members)&&e.members.push({target:i,targetKey:this.object.toText(),key:r}),i[r]}return this.property.compute(i,e,n,this.object)},It.prototype.toText=function(){return this.object.toText()+"."+this.property.toText()},d(Mt,Ot),Mt.prototype.compute=function(t,e,n,i){if(n){if(n.assignmentLeft||n.callee)return{obj:t,prop:this.name};if(n.propertyKey)return this.name}var r=t[this.name];return k(e.members)&&e.members.push({target:t,targetKey:null!=i?i.toText():null,key:this.name}),null==r&&e.locals&&(r=e.locals[this.name]),r},Mt.prototype.toText=function(){return this.name},d(Vt,Ot),d(Lt,Ot),Lt.prototype.compute=function(t,e){return{key:this.key.compute(t,e,{propertyKey:!0}),value:this.value.compute(t,e)}},d(Rt,Ot),Rt.prototype.compute=function(t,e){var n={};return this.properties.forEach((function(i){var r=i.compute(t,e);n[r.key]=r.value})),n},Ut.prototype.throwError=function(t,e){throw new Error("Syntax Error: Token '"+e.text+"'"+t+" at column "+(e.index+1)+" of the expression ["+this.text+"] starting at ["+this.text.substring(e.index)+"].")},Ut.prototype.parse=function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},Ut.prototype.program=function(){for(var t=new Ct;;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.appendChild(this.expressionStatement()),!this.expect(";"))return t},Ut.prototype.expressionStatement=function(){var t=new St;return t.appendChild(this.filterChain()),t},Ut.prototype.filterChain=function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},Ut.prototype.expression=function(){return this.assignment()},Ut.prototype.assignment=function(){var t,e=this.ternary();if(this.expect("=")){if((t=e).type!==Et.Identifier&&t.type!==Et.MemberExpression)throw new Error("Trying to assign a value to a non l-value");e=new jt(e,this.assignment(),"=")}return e},Ut.prototype.ternary=function(){var t,e=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?new _t(e,t,this.expression()):e},Ut.prototype.logicalOR=function(){for(var t=this.logicalAND();this.expect("||");)t=new Pt("||",t,this.logicalAND());return t},Ut.prototype.logicalAND=function(){for(var t=this.equality();this.expect("&&");)t=new Pt("&&",t,this.equality());return t},Ut.prototype.equality=function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=new Tt(t.text,e,this.relational());return e},Ut.prototype.relational=function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=new Tt(t.text,e,this.additive());return e},Ut.prototype.additive=function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=new Tt(t.text,e,this.multiplicative());return e},Ut.prototype.multiplicative=function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=new Tt(t.text,e,this.unary());return e},Ut.prototype.unary=function(){var t;return(t=this.expect("+","-","!"))?new Nt(t.text,this.unary()):this.primary()},Ut.prototype.primary=function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.options.literals.hasOwnProperty(this.peek().text)?t=new At(this.options.literals[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());this.peek("(","[",".")||this.peek("?")&&this.peekAhead(1,".");)this.expect("?")&&(t.allowNull=!0),"("===(e=this.expect("(","[",".")).text?(t=new Dt(t,this.parseArguments()),this.consume(")")):"["===e.text?(t=new It(t,this.expression(),!0),this.consume("]")):"."===e.text?t=new It(t,this.identifier(),!1):this.throwError("IMPOSSIBLE");return t},Ut.prototype.filter=function(t){for(var e=[t],n=[this.identifier()];this.expect(".");)n.push(this.identifier());var i=new Dt(new Mt(n.map((function(t){return t.name})).join(".")),e);for(i.filter=!0;this.expect(":");)e.push(this.expression());return i},Ut.prototype.parseArguments=function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},Ut.prototype.identifier=function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),new Mt(t.text)},Ut.prototype.constant=function(){return new At(this.consume().value)},Ut.prototype.arrayDeclaration=function(){var t=new Vt;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.appendChild(this.expression())}while(this.expect(","));return this.consume("]"),t},Ut.prototype.object=function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t=new Lt,this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),new Rt(e)},Ut.prototype.consume=function(t){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},Ut.prototype.peekToken=function(){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);return this.tokens[0]},Ut.prototype.peek=function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},Ut.prototype.peekAhead=function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},Ut.prototype.expect=function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},d(qt,$t),qt.prototype.isValidIdentifierStart=function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t||"@"===t||":"===t||"*"===t},qt.prototype.isValidIdentifierContinue=function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)||"-"===t||"."===t},qt.prototype.expectString=function(t){var e=t.length;return this.index+e<=this.text.length&&t===this.text.substr(this.index,e)},qt.prototype.readComment=function(t,e){var n=this.index;this.index+=t.length;for(var i="",r=t;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,this.expectString(e))return r+=e,this.index+=e.length,void this.tokens.push({index:n,text:r,comment:!0,value:i});i+=o,this.index++}this.throwError("Unterminated comment",n)},qt.prototype.readText=function(){for(var t=this.index,e="";this.index<this.text.length;){var n=this.text.charAt(this.index),i=this.peek();if("<"===n&&(this.isIdentifierStart(i)||"/"===i)||this.expectString("\x3c!--"))break;e+=n,this.index++}this.tokens.push({index:t,text:e,textTag:!0})},qt.prototype.readTag=function(t,e,n,i){for(this.tokens.push({index:this.index,text:t,tag:!0,closing:n,begin:!0,doctype:i}),this.index+=t.length,this.readIdent();this.index<this.text.length;){var r=this.text.charAt(this.index);if(!n){var o=r+this.peek();if(o==="/"+e){this.tokens.push({index:this.index,text:o,tag:!0,closing:!0,end:!0}),this.index+=o.length;break}}if(r===e){this.tokens.push({index:this.index,text:e,tag:!0,closing:!!i||n,end:!0}),this.index+=e.length;break}this.isIdentifierStart(this.peekMultichar())?this.readIdent():'"'===r||"'"===r?this.readString(r):this.isWhitespace(r)?this.index++:"="===r?(this.tokens.push({index:this.index,text:"=",equal:!0}),this.index++):this.throwError("Unexpected next character ",this.index,this.index+1)}},qt.prototype.lex=function(t){this.text=t,this.index=0,this.tokens=[];for(var e=!!this.options.allowDocType;this.index<this.text.length;){var n=this.text.charAt(this.index),i=this.peek(),r=this.peek(2);this.expectString("\x3c!--")?this.readComment("\x3c!--","--\x3e"):"<"===n&&this.isIdentifierStart(i)?this.readTag("<",">",!1):this.expectString("</")&&this.isIdentifierStart(r)?this.readTag("</",">",!0):this.expectString("<!DOCTYPE")?e?this.readTag("<!",">",!0,!0):this.throwError("DOCTYPE is not allowed",this.index,this.index+1):this.readText()}return this.tokens},d(Ft,Ut),Ft.prototype.parse=function(t){this.index=0,this.text=t,this.tokens=this.lexer.lex(t);for(var e,n=new Ie,i=!!this.options.allowDocType;this.index<this.tokens.length;){var r=this.current();if(r.doctype)i?e?this.throwError("DOCTYPE only allow one",r):(e=this.doctype(),n.$pushChild(e)):this.throwError("DOCTYPE is not allowed",r);else if(r.comment){var o=new he;o.nodeValue=r.text,n.$pushChild(o),this.next()}else if(r.textTag){(t=new qe).nodeValue=r.text,n.$pushChild(t),this.next()}else r.tag&&r.begin?n.$pushChild(this.element()):this.throwError("impossible",r)}return n.$buildSibling(),n.childNodes},Ft.prototype.doctype=function(){this.next();var t=new xe,e=this.current();return e.identifier?t.nodeValue=e.text:this.throwError(" Unexpected ",e),this.attrs(t).forEach((function(e){t.childNodes.push(e)})),(e=this.current()).tag&&e.end&&e.closing?this.next():this.throwError(" Unexpected ",e),t},Ft.prototype.element=function(t){this.next();var e=new Pe,n=this.current();if(n.identifier?(e.nodeName=n.text,this.next()):this.throwError(" Unexpected ",n),this.attrs(e).forEach((function(t){e.$pushAttribute(t)})),(n=this.current()).tag&&n.end){if(this.next(),"input"===e.nodeName)return e.selfClosed=!0,e;n.closing||this.childElements(e).forEach((function(t){e.$pushChild(t)}))}else this.throwError(" Unexpected ",n);return(n=this.current()).tag&&n.begin&&n.closing?(this.next(),(n=this.current()).identifier&&e.nodeName===n.text?(this.next(),(n=this.current()).tag&&n.end&&n.closing?this.next():this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n),e},Ft.prototype.childElements=function(t){for(var e=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.closing)break;if(n.comment){var i=new he;i.nodeValue=n.text,e.push(i),this.next()}else if(n.textTag){var r=new qe;r.nodeValue=n.text,e.push(r),this.next()}else n.tag&&n.begin?e.push(this.element(t)):this.throwError(" Unexpected ",n)}return e},Ft.prototype.attrs=function(t){for(var e=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.end)break;var i=new se;n.identifier&&(i.nodeName=n.text,i.origin=n.text,this.next(),(n=this.current()).equal&&(this.next(),(n=this.current()).constant?(i.nodeValue=n.value,this.next()):this.throwError(" Unexpected ",n))),e.push(i)}return e},Ft.prototype.current=function(){return this.index<this.tokens.length?this.tokens[this.index]:{}},Ft.prototype.next=function(){this.index++};var Wt={isIdentifierContinue:!1,isIdentifierStart:!1,literals:{false:!1,null:null,true:!0,undefined:void 0}};function Bt(t){return new Ft(new qt(Wt),Wt).parse(t)}function Ht(t,e){var n=h({getEmbedTpl:function(){return""},containsComponent:function(){return!1},createComponent:function(){return null},containsDirective:function(){return!1},createDirective:function(){return null}},e),i=Bt(t);return i.forEach((function(t){t.compile(n)})),i.forEach((function(t){t.notifyCompiled(n)})),function(t){var e=document.createDocumentFragment();return t.$$childElements=i,i.forEach((function(n){e.appendChild(n.link(t))})),i.forEach((function(t){t.notifyLinked()})),e}}function Kt(t,e,n){return(n=n||{}).createFilter=function(t){return injector.createFilter(t)},n.collectMembers&&(n.members=[]),zt(t).compute(e,n)}function zt(t){if(null!=t&&0!==(t=t.trim()).length)return t=t.replace("&gt;",">").replace("&lt;","<"),new Ut(new $t(Wt),Wt).parse(t)}function Yt(t,e,n){var i=zt(t).getMemberExpression();if(null==i)throw new Error(t+"is not valid member expression");return(n=n||{}).createFilter=function(t){return injector.createFilter(t)},{obj:i.object.compute(e,n,{},e),prop:i.property.compute(e,n,{},e)}}function Zt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Gt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xt(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),t}var Jt=function(){function t(e){Zt(this,t),this.text=e,this.value=null,this.oldValue=null}return Xt(t,[{key:"compute",value:function(t,e){this.oldValue=this.value,this.value=Kt(this.text,t,e)}},{key:"detect",value:function(){return this.value!==this.oldValue}},{key:"destroy",value:function(){this.value=null,this.oldValue=null}}]),t}(),Qt=function(){function t(){Zt(this,t),this.scope=null,this.text="",this.isExp=!1,this.segments=[],this.rightStr="",this.output=!1,this.value=null,this.oldValue=null,this.unwatches=[],this.change=new at}return Xt(t,[{key:"setScope",value:function(t){this.scope=t}},{key:"setOutput",value:function(t){this.output=t}},{key:"bind",value:function(t,e){if(null!=t)if(this.text=t,this.isExp=e,e)this.segments.push({exp:new Jt(t),leftStr:""});else{for(var n=/{{([^}]*)}}/g,i=n.lastIndex,r=n.exec(t);null!=r;)this.segments.push({index:r.index,exp:new Jt(r[1]),leftStr:t.substring(i,r.index)}),i=n.lastIndex,r=n.exec(t);this.segments.length>0&&i<t.length&&(this.rightStr=t.substring(i))}}},{key:"compute",value:function(t){var e=this;if(t=t||{},this.oldValue=this.value,0===this.segments.length)this.value=this.text;else if(this.isExp&&1===this.segments.length)this.segments[0].exp.compute(e.scope,t),this.value=this.segments[0].exp.value;else{var n="";this.segments.forEach((function(i){i.exp.compute(e.scope,t),n+=i.leftStr+i.exp.value})),this.value=n+this.rightStr}return this.value}},{key:"assign",value:function(t){var e=Yt(this.text,this.scope);null!=e.obj&&null!=e.prop&&(e.obj.toProxy()[e.prop]=t)}},{key:"listen",value:function(){var t=this;this.unwatches=this.segments.map((function(e){return t.scope.$watch(e.exp.text,(function(){t.defer((function(){t.detect()&&t.change.fire()}))}))}))}},{key:"defer",value:function(t){var e=this;this.cancelTimeout(),this.timeoutId=setTimeout((function(){e.timeoutId=null,t.call(e)}))}},{key:"cancelTimeout",value:function(){null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"observe",value:function(t){if(!this.output)return this.listen(),this.change.on(t),function(){this.change.off(t)}}},{key:"detect",value:function(){return!this.output&&(this.compute(),this.value!==this.oldValue)}},{key:"destroy",value:function(){this.cancelTimeout(),this.unwatches.forEach((function(t){t.call()})),this.segments.forEach((function(t){t.exp.destroy()})),this.segments=null,this.scope=null,this.value=null,this.oldValue=null}}]),t}();function te(t){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ee(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ne(t,e){return!e||"object"!==te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ie(t){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function re(t,e){return(re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oe="load unload change submit reset select blur focus abort keydown keypress keyup click dblclick mousedown mousemove mouseout mouseover mouseup".split(" "),se=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ne(this,ie(e).call(this,bt.attribute,t,n))).quote='"',i.origin=t,i.isEvent=!1,i.isBinding=!1,i.isDomEvent=!1,i.isDirective=!1,i.directive=null,i.ownerElement=null,i.ownerComponent=null,i.htmlElement=null,i.binding=new Qt,i.priority=0,i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&re(t,e)}(e,t),n=e,(i=[{key:"belongTo",value:function(t){return this.origin===t}},{key:"setValue",value:function(t){this.nodeValue=t,this.compile(this.options)}},{key:"observe",value:function(t){this.binding.observe(t)}},{key:"compile",value:function(t){if(this.isEvent=this.nodeName.startsWith("@"),this.isBinding=this.nodeName.startsWith(":"),this.isDirective=this.nodeName.startsWith("*"),(this.isEvent||this.isBinding||this.isDirective)&&(this.nodeName=this.nodeName.substr(1)),this.isDomEvent=A(oe,this.nodeName),this.binding.setOutput(this.isEvent),this.binding.bind(this.nodeValue,this.isEvent||this.isBinding||this.isDirective),this.isDirective){if(!t.containsDirective(this.nodeName))throw new Error("directive "+this.nodeName+" is not defined");this.directive=t.createDirective(this.nodeName),this.directive.$bindNode(this),this.binding.setOutput(this.directive.$output),this.priority=this.directive.$priority}}},{key:"notifyCompiled",value:function(t){null!=this.directive&&this.directive.$compile(t)}},{key:"link",value:function(t,e,n){var i=this;this.scope=t,this.htmlElement=e,this.ownerComponent=n,this.binding.setScope(t),this.isEvent?this.isDomEvent?this.htmlElement.addEventListener(this.nodeName,(function(t){i.binding.compute({locals:{$event:t,$args:null,$element:i.htmlElement}})})):null!=n&&n.$listen(this.nodeName,(function(t,e){i.binding.compute({locals:{$event:t,$args:e,$element:i.htmlElement}})})):(this.directive?(t.$$childDirectives.push(this.directive),this.directive.$setBinding(this.binding)):null!=n&&n.$hasAttr(this.nodeName)?n.$initAttr(this.nodeName,this.binding.compute()):this.nodeName.startsWith("style")?V(this.htmlElement,this.nodeName,this.binding.compute()):this.htmlElement.setAttribute(this.nodeName,this.binding.compute()),this.observe((function(){i.update()})))}},{key:"detect",value:function(){null==this.directive?this.hasChange()&&this.update():this.directive.$detect()}},{key:"hasChange",value:function(){return this.binding.detect()}},{key:"update",value:function(){null!=this.directive?this.directive.$update():null!=this.ownerComponent&&this.ownerComponent.$hasAttr(this.nodeName)?this.ownerComponent.$setAttr(this.nodeName,this.binding.value):this.nodeName.startsWith("style")?V(this.htmlElement,this.nodeName,this.binding.value):(this.htmlElement.setAttribute(this.nodeName,this.binding.value),"INPUT"===this.htmlElement.nodeName&&"value"===this.nodeName&&(this.htmlElement.value=this.binding.value))}},{key:"notifyLinked",value:function(){this.directive&&this.directive.$insert()}},{key:"getDirective",value:function(t){return null==t?this.directive:null!=this.directive&&this.directive.$$meta.selector===t?this.directive:null}},{key:"getOuterTpl",value:function(){return this.origin+(null==this.nodeValue?"":"="+this.quote+this.nodeValue+this.quote)}},{key:"getInnerTpl",value:function(){return this.origin+(null==this.nodeValue?"":"="+this.quote+this.nodeValue+this.quote)}},{key:"dispose",value:function(t){t&&(this.directive=null),this.binding.destroy(),this.binding=null,this.ownerElement=null,this.ownerComponent=null,this.htmlElement=null,this.$destroy()}},{key:"destroy",value:function(){null!=this.directive&&(this.directive.$dispose(!0),this.directive=null),this.dispose()}}])&&ee(n.prototype,i),r&&ee(n,r),e}(gt);function ue(t){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ce(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ae(t,e){return!e||"object"!==ue(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function le(t){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fe(t,e){return(fe=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var he=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ae(this,le(e).call(this,bt.comment,"#comment"))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fe(t,e)}(e,t),n=e,(i=[{key:"link",value:function(){return document.createComment(this.nodeValue)}},{key:"getOuterTpl",value:function(){return this.nodeValue}},{key:"getInnerTpl",value:function(){return this.nodeValue}}])&&ce(n.prototype,i),r&&ce(n,r),e}(gt);function pe(t){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function me(t,e){return!e||"object"!==pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function de(t){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ve(t,e){return(ve=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var be=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=me(this,de(e).call(this,bt.connection,t))).linker=n,i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ve(t,e)}(e,t),n=e,(i=[{key:"link",value:function(t){return this.scope=t,this.linker.call(this,t)}},{key:"notifyLinked",value:function(){if(S(this.onInsert))return this.onInsert.call(this)}},{key:"detect",value:function(){if(S(this.onDetect))return this.onDetect.call(this)}},{key:"hasChange",value:function(){if(S(this.onHasChange))return this.onHasChange.call(this)}},{key:"update",value:function(){if(S(this.onUpdate))return this.onUpdate.call(this)}},{key:"destroy",value:function(){if(S(this.onDestroy))return this.onDestroy.call(this);this.$destroy()}}])&&ye(n.prototype,i),r&&ye(n,r),e}(gt);function ge(t){return(ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function we(t,e){return!e||"object"!==ge(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ke(t){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $e(t,e){return($e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),we(this,ke(e).call(this,bt.documentType))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$e(t,e)}(e,t),e}(gt);function Ee(t){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){return!e||"object"!==Ee(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ce(t){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function je(t,e,n){return e&&Se(t.prototype,e),n&&Se(t,n),t}function _e(t,e){return(_e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pe=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Oe(this,Ce(e).call(this,bt.element,name))).attributes=[],t.htmlElement=null,t.component=null,t.selfClosed=!1,t.compileOptions=null,t.isComponent=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_e(t,e)}(e,t),je(e,[{key:"parentElement",get:function(){return this.parentNode}}]),je(e,[{key:"$pushAttribute",value:function(t){t.ownerElement=this,this.attributes.push(t)}},{key:"hasAttributes",value:function(){return 0!==this.attributes.length}},{key:"getAttribute",value:function(t){var e=this.attributes.filter((function(e){return e.belongTo(t)}));return e.length?e[0]:null}},{key:"setAttribute",value:function(t,e){var n,i=this.attributes.filter((function(e){return e.belongTo(t)}));return i.length>0?(n=i[0]).setValue(e):((n=new se(t,e)).ownerElement=this,n.compile(this.compileOptions)),this.attributes.push(n),n}},{key:"removeAttribute",value:function(t){var e=[],n=this;if(t instanceof se){var i=this.attributes.indexOf(t);-1!==i&&(e=n.attributes.splice(i,1))}else this.attributes.filter((function(e){return e.belongTo(t)})).forEach((function(t){var i=n.attributes.indexOf(t);t.destroy(),e=n.attributes.splice(i,1)}));return e.length>0?e[0]:null}},{key:"appendAttribute",value:function(t){if(null!=t.ownerElement)throw new Error("Current attribute is not new!");return t.ownerElement=this,t.compile(this.compileOptions),this.attributes.push(t),t}},{key:"observe",value:function(t,e){var n=this.attributes.filter((function(e){return e.belongTo(t)}));if(n.length)return n[0].observe(e)}},{key:"getOuterTpl",value:function(){var t="",e="";this.attributes.forEach((function(e){t+=" ",t+=e.getOuterTpl()})),this.childNodes.forEach((function(t){e+=t.getOuterTpl()}));var n="<"+this.nodeName+t+">"+e;return this.selfClosed||(n+="</"+this.nodeName+">"),n}},{key:"getInnerTpl",value:function(){var t="";return this.childNodes.forEach((function(e){t+=e.getOuterTpl()})),t}},{key:"setOuterTpl",value:function(t){var e=this;Bt(t).forEach((function(t){t.parentNode=null,e.parentNode.insertBefore(e,t)})),e.parentNode.removeChild(e)}},{key:"setInnerTpl",value:function(t){var e=this;this.clearChildNodes(),Bt(t).forEach((function(t){t.parentNode=null,e.appendChild(t)}))}},{key:"getDirective",value:function(t){var e=null;return this.attributes.some((function(n){return null!=(e=n.getDirective(t))})),e}},{key:"getDirectives",value:function(){return this.attributes.map((function(t){return t.getDirective()})).filter((function(t){return null!=t}))}},{key:"compile",value:function(t){this.compileOptions=t,this.attributes.forEach((function(e){e.compile(t)})),this.attributes=R(this.attributes,(function(t){return t.priority})),this.isComponent=t.containsComponent(this.nodeName),this.isComponent||this.childNodes.forEach((function(e){e.compile(t)}))}},{key:"notifyCompiled",value:function(t){this.attributes.forEach((function(e){e.notifyCompiled(t)})),null==this.component&&this.childNodes.forEach((function(e){e.notifyCompiled(t)}))}},{key:"link",value:function(t){var e=this;return e.scope=t,e.htmlElement=document.createElement(e.nodeName),this.isComponent?(this.component=t.$createChildCmp(this.nodeName),this.component.$bindNode(this),e.attributes.forEach((function(n){n.link(t,e.htmlElement,e.component)})),e.component.$initAttrDone(),e.component.$mount(e.htmlElement)):(this.attributes.forEach((function(n){n.link(t,e.htmlElement)})),e.childNodes.forEach((function(n){e.htmlElement.appendChild(n.link(t))}))),e.htmlElement}},{key:"notifyLinked",value:function(){this.attributes.forEach((function(t){t.notifyLinked()})),null==this.component&&this.childNodes.forEach((function(t){t.notifyLinked()}))}},{key:"detect",value:function(){this.attributes.forEach((function(t){t.detect()})),null==this.component&&this.childNodes.forEach((function(t){t.detect()}))}},{key:"dispose",value:function(t){null==this.component?this.childNodes.forEach((function(t){t.destroy()})):t&&(this.component=null),this.attributes.forEach((function(t){t.destroy()})),this.attributes.length=0,this.removeHtmlElement(),this.compileOptions=null,this.$destroy()}},{key:"destroy",value:function(){null!=this.component&&(this.component.$dispose(!0),this.component=null),this.dispose()}},{key:"getHtmlElement",value:function(){return this.htmlElement}},{key:"removeHtmlElement",value:function(){null!=this.htmlElement&&z(this.htmlElement)}},{key:"createElement",value:function(t){return new e(t)}},{key:"createAttr",value:function(t){return new se(t)}},{key:"createConnection",value:function(t,e){return new be(t,e)}}]),e}(gt);function Te(t){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ne(t,e){return!e||"object"!==Te(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function De(t,e){return(De=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ie=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,Ae(e).call(this,bt.documentFragment,"#document-fragment"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&De(t,e)}(e,t),e}(gt);function Me(t){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ve(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Le(t,e){return!e||"object"!==Me(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Re(t){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ue(t,e){return(Ue=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qe=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Le(this,Re(e).call(this,bt.text,"#text"))).binding=new Qt,t.htmlElement=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ue(t,e)}(e,t),n=e,(i=[{key:"compile",value:function(){this.binding.bind(this.nodeValue)}},{key:"link",value:function(t){var e=this;return this.binding.setScope(t),this.binding.observe((function(){e.update()})),this.render(this.binding.compute())}},{key:"hasChange",value:function(){return this.binding.detect()}},{key:"update",value:function(){K(this.htmlElement,this.render(this.binding.value))}},{key:"render",value:function(t){return this.htmlElement=document.createTextNode(t),this.htmlElement}},{key:"getOuterTpl",value:function(){return this.nodeValue}},{key:"getInnerTpl",value:function(){return this.nodeValue}},{key:"removeHtmlElement",value:function(){null!=this.htmlElement&&z(this.htmlElement)}},{key:"destroy",value:function(){this.binding.destroy(),this.binding=null,this.htmlElement=null,this.$destroy()}}])&&Ve(n.prototype,i),r&&Ve(n,r),e}(gt);function Fe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function We(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Be(t,e,n){return e&&We(t.prototype,e),n&&We(t,n),t}var He=new at,Ke=new at;var ze=function(){function t(){Fe(this,t)}return Be(t,[{key:"set",value:function(t,e,n){var i=t[e];if(i!==n||k(t)&&"length"===e){var r={valid:!0,apply:!0,oldValue:i,newValue:n};He.fire({target:t,key:e,data:r}),r.apply&&(t[e]=n,Ke.fire({target:t,key:e,data:{oldValue:i,newValue:n}}))}return!0}}]),t}();function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ge(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),t}var Xe=function(){function t(){Ye(this,t),this.plainMap=new Map,this.regexMap=new Map}return Ge(t,[{key:"on",value:function(t,e,n){var i=this,r=j(t)?this.regexMap:this.plainMap;return r.has(t)||r.set(t,[]),n&&(e.beforeChanged=n.beforeChanged),r.get(t).push(e),function(){i.off(t,e)}}},{key:"off",value:function(t,e){var n=j(t)?this.regexMap:this.plainMap;if(n.has(t)){var i=n.get(t),r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},{key:"fireChanged",value:function(t,e){var n=this;this.plainMap.has(t)&&this.plainMap.get(t).forEach((function(i){i.beforeChanged||i.call(n,t,e)})),this.regexMap.forEach((function(i,r){r.test(t)&&i.forEach((function(i){i.beforeChanged||i.call(n,t,e)}))}))}},{key:"fireChanging",value:function(t,e){var n=this;this.plainMap.has(t)&&this.plainMap.get(t).forEach((function(i){i.beforeChanged&&i.call(n,t,e)})),this.regexMap.forEach((function(i,r){r.test(t)&&i.forEach((function(i){i.beforeChanged&&i.call(n,t,e)}))}))}},{key:"destroy",value:function(){this.plainMap.clear(),this.regexMap.clear()}}]),t}(),Je=function(){function t(){Ye(this,t);var e=this,n=function(t){var n=t.target,i=t.key;e.fireChanging(n,i,t.data)},i=function(t){var n=t.target,i=t.key;e.fireChanged(n,i,t.data)};He.on(n),Ke.on(i),this.offChange=function(){He.off(n),Ke.off(i)},this.objMap=new Map}return Ge(t,[{key:"on",value:function(t,e,n,i){return this.objMap.has(t)||this.objMap.set(t,new Xe),this.objMap.get(t).on(e,n,i)}},{key:"off",value:function(t,e,n){this.objMap.has(t)&&this.objMap.get(t).off(e,n)}},{key:"fireChanged",value:function(t,e,n){this.objMap.has(t)&&this.objMap.get(t).fireChanged(e,n)}},{key:"fireChanging",value:function(t,e,n){this.objMap.has(t)&&this.objMap.get(t).fireChanging(e,n)}},{key:"destroy",value:function(){this.offChange.call(this),this.objMap.forEach((function(t){t.destroy()})),this.objMap=null}}]),t}(),Qe=function(){function t(e,n,i,r){Ye(this,t),this.scope=e,this.target=n,this.key=i,this.targetKey=r,this.observer=null,this.action=null,this.unwatch=null,this.options=null,this.id=r?r+"."+i:i}return Ge(t,[{key:"start",value:function(t,e,n){this.observer=t,this.action=e,this.options=n,this.unwatch=this.observer.on(this.target,this.key,this.action,this.options)}},{key:"stop",value:function(){null!=this.unwatch&&this.unwatch.call()}},{key:"update",value:function(t){if(null!=this.targetKey&&this.targetKey.startsWith(t)){var e=Kt(this.targetKey,this.scope);e!==this.target&&(this.stop(),this.target=e,this.unwatch=this.observer.on(this.target,this.key,this.action,this.options))}}},{key:"destroy",value:function(){this.stop(),this.scope=null,this.target=null,this.observer=null,this.action=null,this.unwatch=null}}]),t}(),tn=new(function(){function t(){Ye(this,t);var e=this;this.queue=[],this.timeoutId=null,this.digest=function(){e.defer((function(){e.queue.forEach((function(t){t.call(e)}))}))}}return Ge(t,[{key:"defer",value:function(t){var e=this;this.clearDefer(),this.timeoutId=setTimeout((function(){this.timeoutId=null,t.call(e)}))}},{key:"clearDefer",value:function(){null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"execute",value:function(){Ke.on(this.digest)}},{key:"apply",value:function(t){this.queue.push(t)}},{key:"remove",value:function(t){var e=this.queue.indexOf(t);-1!==e&&this.queue.splice(e,1)}},{key:"destroy",value:function(){Ke.off(this.digest),this.clearDefer(),this.queue=[]}}]),t}());tn.execute();var en=function(){function t(e,n){Ye(this,t);var i=this;this.scope=e,this.exp=n,this.value=null,this.unwatch=null,this.detect=function(){var t=i.value,e=Kt(i.exp,i.scope);e!==t&&(i.value=e,i.action.call(i,{oldValue:t,newValue:e}))}}return Ge(t,[{key:"start",value:function(t){var e=this;this.action=t,this.value=Kt(this.exp,this.scope),tn.apply(e.detect),this.unwatch=function(){tn.remove(e.detect)}}},{key:"stop",value:function(){null!=this.unwatch&&(this.unwatch.call(),this.action=null)}},{key:"destroy",value:function(){this.stop(),this.scope=null,this.unwatch=null}}]),t}(),nn=function(){function t(e,n){Ye(this,t),this.scope=e,this.exp=n,this.observer=null,this.action=null,this.members={},this.digests=[],this.options=null}return Ge(t,[{key:"parse",value:function(){if("*"===this.exp&&(this.exp=/.+/i),j(this.exp))return[{target:this.scope,key:this.exp}];if(zt(this.exp).hasCC())return[{dirtyCheck:!0,key:this.exp}];var t={collectMembers:!0};return Kt(this.exp,this.scope,t),t.members}},{key:"start",value:function(t,e,n){this.observer=t,this.action=e,this.options=n,this.updateMember()}},{key:"updateMember",value:function(){var t=this;this.parse().forEach((function(e){if(e.dirtyCheck){var n=new en(t.scope,e.key);t.digests.push(n),t.startDigest(n)}else{var i=new Qe(t.scope,e.target,e.key,e.targetKey);t.members[i.id]||(t.members[i.id]=i,t.startMember(i))}}))}},{key:"startDigest",value:function(t){var e=this;t.start((function(t){e.action.call(this,t)}),this.options)}},{key:"startMember",value:function(t){var e=this;t.start(e.observer,(function(n,i){var r=n;null!=t.targetKey&&(r=t.targetKey+"."+n),c(e.members,(function(t,e){t.update(r)})),e.action.call(this,n,i)}),this.options)}},{key:"destroy",value:function(){c(this.members,(function(t,e){t.destroy()})),this.digests.forEach((function(t){t.destroy()})),this.scope=null,this.observer=null,this.action=null,this.members=null,this.digests=null}}]),t}(),rn=function(){function t(){Ye(this,t),this.observer=new Je,this.watchers=[]}return Ge(t,[{key:"watch",value:function(t,e,n){var i=this,r=this.createWatcher(t,e);return r.start(this.observer,n),function(){r.destroy(),i.removeWatcher(r)}}},{key:"validate",value:function(t,e,n){var i=this,r=this.createWatcher(t,e);return r.start(this.observer,n,{beforeChanged:!0}),function(){r.destroy(),i.removeWatcher(r)}}},{key:"createWatcher",value:function(t,e){var n=new nn(t,e);return this.watchers.push(n),n}},{key:"removeWatcher",value:function(t){var e=this.watchers.indexOf(t);-1!==e&&this.watchers.splice(e,1)}},{key:"fireChanged",value:function(t,e,n){return this.observer.fireChanged(t,e,n)}},{key:"fireChanging",value:function(t,e,n){return this.observer.fireChanging(t,e,n)}},{key:"destroy",value:function(){this.watchers.forEach((function(t){t.destroy()})),this.watchers=null,this.observer.destroy(),this.observer=null}}]),t}();function on(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function sn(t,e,n){return e&&on(t.prototype,e),n&&on(t,n),t}Object.prototype.toProxy=function(){return new Proxy(this,new ze)};var un=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this,e)}return sn(t,[{key:"$proxy",get:function(){return this.toProxy()}}]),sn(t,[{key:"$hooks",value:function(){return{beforeAttrChange:"",afterAttrChange:"",onInit:"",beforeViewInit:"",afterViewMount:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$bindNode",value:function(t){this.$$element=t}},{key:"$hasAttr",value:function(t){return I(this,t,!0)}},{key:"$initAttr",value:function(t,e){var n=M(this,t,!0);S(this.beforeAttrChange)&&this.beforeAttrChange.call(this,t,e,n),V(this,t,e,!0),S(this.afterAttrChange)&&this.afterAttrChange.call(this,t,e,n)}},{key:"$initAttrDone",value:function(){S(this.onInit)&&this.onInit.call(this)}},{key:"$setAttr",value:function(t,e){var n=M(this,t,!0);S(this.beforeAttrChange)&&this.beforeAttrChange.call(this,t,e,n),V(this.$proxy,t,e,!0),S(this.afterAttrChange)&&this.afterAttrChange.call(this,t,e,n)}},{key:"$listen",value:function(t,e){var n=M(this,t,!0);if(!ft(n))throw new Error(t+" is not a event");n.on(e)}},{key:"$getTemplate",value:function(t){var e=this.$getMeta();return t?e.template||"":new Promise((function(t){E(e.template)?t(e.template):E(e.templateUrl)?dt.service("$templateCache").getTplByUrl(e.templateUrl).then((function(e){t(e)})):t("")}))}},{key:"$using",value:function(t){var e=this.$getMeta().using,n=t.split("."),i=n.pop(),r=n.join(".");return r&&$(e)&&a(e,(function(e,n){if(e===r)return t=n+"."+i,!0})),t}},{key:"$makeCompileOptions",value:function(){var t=this;return{getEmbedTpl:function(){return t.$$element.getInnerTpl()},containsComponent:function(e){return dt.containsComponent(t.$using(e))},createComponent:function(e){return dt.createComponent(t.$using(e))},containsDirective:function(e){return dt.containsDirective(t.$using(e))},createDirective:function(e){return dt.createDirective(t.$using(e))}}}},{key:"$hasView",value:function(){return k(this.$$childElements)}},{key:"$showView",value:function(){var t=document.createDocumentFragment();return this.$$childElements.forEach((function(e){t.appendChild(e.getHtmlElement())})),t}},{key:"$clearView",value:function(){this.$hasView()&&(this.$$childElements.forEach((function(t){t.destroy()})),this.$$childElements=null)}},{key:"$render",value:function(t){var e=this,n=null;return t?n=this.$hasView()?this.$showView():Ht(this.$getTemplate(t),this.$makeCompileOptions())(this):new Promise((function(t){e.$hasView()?t(e.$showView()):e.$getTemplate().then((function(i){n=Ht(i,e.$makeCompileOptions())(e),t(n)}))}))}},{key:"$refresh",value:function(t){return this.$clearView(),this.$render(t)}},{key:"$mount",value:function(t,e){var n,i=this;e=e||{};n=E(t)?document.querySelector(t):t,e.append||H(n),e.sync?(n.appendChild(this.$render(e.sync)),i.$afterViewMount()):this.$render(e.sync).then((function(t){n.appendChild(t),i.$afterViewMount()}))}},{key:"$unmount",value:function(){null!=this.$$element?(this.$$element.$remove(),this.$$element.removeHtmlElement()):this.$hasView()&&this.$$childElements.forEach((function(t){t.removeHtmlElement()})),null!=this.$$parentComponent&&(this.$$parentComponent.$removeChildCmp(this),this.$$parentComponent=null)}},{key:"$afterViewMount",value:function(){S(this.afterViewMount)&&this.afterViewMount.call(this)}},{key:"$detect",value:function(){if(!this.$$detectTimeout&&this.$$childElements){var t=this;t.$$detectTimeout=setTimeout((function(){t.$$detectTimeout=null,t.$$childElements.forEach((function(t){t.detect()}))}))}}},{key:"$validate",value:function(){var t,e,n;if(2===arguments.length)t=this,e=arguments[0],n=arguments[1];else{if(3!==arguments.length)throw new Error("arguments error");t=arguments[0],e=arguments[1],n=arguments[2]}return this.$$observer.validate(t,e,n)}},{key:"$watch",value:function(){var t,e,n;if(2===arguments.length)t=this,e=arguments[0],n=arguments[1];else{if(3!==arguments.length)throw new Error("arguments error");t=arguments[0],e=arguments[1],n=arguments[2]}return this.$$observer.watch(t,e,n)}},{key:"$eval",value:function(t){return Kt(t,this)}},{key:"$getParentCmp",value:function(){return this.$$parentComponent}},{key:"$removeChildCmp",value:function(t){var e=this.$$childComponents.indexOf(t);-1!==e&&(this.$$childComponents.splice(e,1),t.$$parentComponent=null)}},{key:"$createChildCmp",value:function(t){var e=dt.createComponent(t);return this.$$childComponents.push(e),e.$$parentComponent=this,e}},{key:"$inheritCmp",value:function(t){var e=this;Object.setPrototypeOf(e,m(t)),c(e.$hooks(),(function(t,n){null==e.hasOwnProperty(n)&&(e[n]=function(){})})),this.$$disposers.push(t.$validate("*",(function(t,n){e.$$observer.fireChanging(e,t,n)}))),this.$$disposers.push(t.$watch("*",(function(t,n){e.$$observer.fireChanged(e,t,n)})))}},{key:"$dispose",value:function(t){this.$unmount(),S(this.onDestroy)&&this.onDestroy.call(this),this.$$detectTimeout&&clearTimeout(this.$$detectTimeout),this.$$disposers.forEach((function(t){t.call()})),this.$clearView(),this.$$observer.destroy(),t&&(this.$$element=null),this.$$childComponents=null,this.$$childDirectives=null}},{key:"$destroy",value:function(){this.$dispose(),null!=this.$$element&&(this.$$element.dispose(!0),this.$$element=null)}}],[{key:"construct",value:function(t){this.$$element=null,this.$$childElements=null,this.$$parentComponent=null,this.$$childComponents=[],this.$$childDirectives=[],this.$$detectTimeout=null,this.$$observer=new rn,this.$$disposers=[],null!=t&&this.$setMeta(t),dt.injectServices(this)}}]),t}();function cn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function an(t,e,n){return e&&cn(t.prototype,e),n&&cn(t,n),t}var ln=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this)}return an(t,[{key:"$htmlElement",get:function(){return null!=this.$element?this.$element.htmlElement:null}},{key:"$component",get:function(){return null!=this.$element?this.$element.ownerComponent:null}},{key:"$scope",get:function(){return null!=this.$binding?this.$binding.scope:null}}]),an(t,[{key:"$hooks",value:function(){return{onInit:"",onCompile:"",onInsert:"",onDetect:"",onUpdate:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$bindNode",value:function(t){this.$attr=t,this.$element=t.ownerElement}},{key:"$setBinding",value:function(t){this.$binding=t}},{key:"$compile",value:function(t){S(this.onCompile)&&this.onCompile.call(this,t)}},{key:"$insert",value:function(){S(this.onInsert)&&this.onInsert.call(this),(S(this.onEnter)||S(this.onLeave))&&this.$requestAnimation()}},{key:"$isLoaded",value:function(){return this.$htmlElement.clientWidth>0&&this.$htmlElement.clientHeight>0}},{key:"$requestAnimation",value:function(){var t=this;requestAnimationFrame((function e(){t.$$cancelAnimationToken||(t.$isLoaded()?t.$elementloaded||(t.$elementloaded=!0,null!=t.onEnter&&t.onEnter.call(t)):t.$elementloaded&&(t.$elementloaded=!1,null!=t.onLeave&&t.onLeave.call(t)),requestAnimationFrame(e))}))}},{key:"$cancelAnimation",value:function(){this.$$cancelAnimationToken=!0}},{key:"$detect",value:function(){if(S(this.onDetect))return this.onDetect.call(this);this.$binding.detect()&&this.$update()}},{key:"$update",value:function(){S(this.onUpdate)&&this.onUpdate.call(this)}},{key:"$getAttrValue",value:function(t){var e=this.$element.getAttribute(t);return null==e?"":e.binding.value}},{key:"$dispose",value:function(t){var e=this;this.$cancelAnimation(),S(this.onDestroy)&&this.onDestroy.call(this),t&&(this.$attr=null,this.$element=null),this.$$disposers.forEach((function(t){t.call(e)})),this.$binding=null}},{key:"$destroy",value:function(){this.$dispose(),null!=this.$attr&&(this.$attr.dispose(!0),this.$attr=null,this.$element=null)}}],[{key:"construct",value:function(){this.$$disposers=[],this.$$cancelAnimationToken=!1,this.$output=!1,this.$binding=null,this.$attr=null,this.$element=null,this.$priority=0,this.$elementloaded=!1,dt.injectServices(this)}}]),t}();function fn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var hn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this)}var e,n,i;return e=t,i=[{key:"construct",value:function(){dt.injectServices(this)}}],(n=[{key:"$hooks",value:function(){return{onInit:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$execute",value:function(){if(S(this.onExecute))return this.onExecute.apply(this,arguments)}},{key:"$destroy",value:function(){S(this.onDestroy)&&this.onDestroy.call(this)}}])&&fn(e.prototype,n),i&&fn(e,i),t}();function pn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var yn,mn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this)}var e,n,i;return e=t,i=[{key:"construct",value:function(){dt.injectServices(this)}}],(n=[{key:"$hooks",value:function(){return{onInit:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$destroy",value:function(){S(this.onDestroy)&&this.onDestroy.call(this)}}])&&pn(e.prototype,n),i&&pn(e,i),t}();function dn(t){return{component:function(e,n){return n.namespace=t,vn(e,n)},directive:function(e,n){return S(n)&&(n={methods:{onInsert:n,onUpdate:n}}),n.namespace=t,bn(e,n)},service:function(e,n){return n.namespace=t,wn(e,n)},filter:function(e,n){return S(n)&&(n={methods:{onExecute:n}}),n.namespace=t,gn(e,n)}}}function vn(t,e){return dt.buildConstructor(t,e,{contractType:pt.component,superClass:Cn(un)})}function bn(t,e){return S(e)&&(e={methods:{onInsert:e,onUpdate:e}}),dt.buildConstructor(t,e,{contractType:pt.directive,superClass:Cn(ln)})}function gn(t,e){return S(e)&&(e={methods:{onExecute:e}}),dt.buildConstructor(t,e,{contractType:pt.filter,superClass:Cn(hn)})}function wn(t,e){return dt.buildConstructor(t,e,{contractType:pt.service,superClass:Cn(mn)})}function kn(t){return t instanceof un}function $n(t){return t instanceof ln}function xn(t){return t instanceof hn}function En(t){return t instanceof mn}function On(t){var e,n;n=(e=E(t)?document.querySelector(t):t).innerHTML,new un({template:n}).$mount(e)}function Cn(t){function e(){t.construct.call(this)}return e.prototype=t.prototype,e}function Sn(t){return function(e){var n=t.selector||e.name;dt.registerConstructor(pt.component,n,e,t)}}function jn(t){return function(e){var n=t.selector||e.name;dt.registerConstructor(pt.directive,n,e,t)}}function _n(t){return function(e){var n=t.selector||e.name;dt.registerConstructor(pt.filter,n,e,t)}}function Pn(t){return function(e){var n=t.selector||e.name;dt.registerConstructor(pt.service,n,e,t)}}function Tn(t){return(Tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function An(t,e){return!e||"object"!==Tn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dn(t){return(Dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function In(t,e){return(In=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mn;Pn({namespace:"sine",selector:"$templateCache"})(yn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=An(this,Dn(e).call(this))).tplCache={},t.promiseCache={},t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&In(t,e)}(e,t),n=e,(i=[{key:"getTplByUrl",value:function(t){var e=this;return this.tplCache[t]?new Promise((function(n){n(e.tplCache[t])})):(this.promiseCache[t]||(this.promiseCache[t]=rt(t).then((function(n){return e.promiseCache[t]=null,e.tplCache[t]=n.data||"",e.tplCache[t]}))),this.promiseCache[t])}}])&&Nn(n.prototype,i),r&&Nn(n,r),e}(mn));function Vn(t){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){return!e||"object"!==Vn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rn(t){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return(Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qn;Pn({namespace:"sine",selector:"$modelOptions"})(Mn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ln(this,Rn(e).call(this))).cssClass={pristine:"n-pristine",dirty:"n-dirty",valid:"n-valid",invalid:"n-invalid"},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Un(t,e)}(e,t),e}(mn));function Fn(t){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bn(t,e){return!e||"object"!==Fn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hn(t){return(Hn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kn(t,e){return(Kn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zn;jn({namespace:"sine",selector:"n-bind"})(qn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bn(this,Hn(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kn(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.bind()}},{key:"onUpdate",value:function(){this.bind()}},{key:"bind",value:function(){this.$htmlElement.innerText=this.$binding.compute()}}])&&Wn(n.prototype,i),r&&Wn(n,r),e}(ln));function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gn(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xn(t){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jn(t,e){return(Jn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qn;jn({namespace:"sine",selector:"n-embed"})(zn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Gn(this,Xn(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jn(t,e)}(e,t),n=e,(i=[{key:"onCompile",value:function(t){var e=t.getEmbedTpl();e&&this.$element.setInnerTpl(e)}}])&&Zn(n.prototype,i),r&&Zn(n,r),e}(ln));function ti(t){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ni(t,e){return!e||"object"!==ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ii(t){return(ii=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ri(t,e){return(ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oi;jn({namespace:"sine",selector:"n-hide",inject:{$animate:"$animate"}})(Qn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ni(this,ii(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ri(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.toggle()}},{key:"onUpdate",value:function(){this.toggle()}},{key:"toggle",value:function(){var t=this;this.$binding.compute()?this.$animate.leave(this.$element,(function(){t.$htmlElement.style.display="none"})):this.$animate.enter(this.$element,(function(){t.$htmlElement.style.display="initial"}))}}])&&ei(n.prototype,i),r&&ei(n,r),e}(ln));function si(t){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ui(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ci(t,e){return!e||"object"!==si(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function li(t,e){return(li=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fi;jn({namespace:"sine",selector:"n-if",inject:{$animate:"$animate"}})(oi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ci(this,ai(e).call(this))).htmlComment=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&li(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.htmlComment=document.createComment("n-if"),this.$binding.compute()||K(this.$htmlElement,this.htmlComment)}},{key:"onUpdate",value:function(){var t=this;this.$binding.compute()?null==this.$htmlElement.parentNode&&this.$animate.enter(this.$element,(function(){K(t.htmlComment,t.$htmlElement)})):null!=this.$htmlElement.parentNode&&this.$animate.leave(this.$element,(function(){K(t.$htmlElement,t.htmlComment)}))}},{key:"onDestroy",value:function(){this.htmlComment=null}}])&&ui(n.prototype,i),r&&ui(n,r),e}(ln));function hi(t){return(hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function yi(t,e){return!e||"object"!==hi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function di(t,e){return(di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var vi;jn({namespace:"sine",selector:"n-model",inject:{options:"$modelOptions"}})(fi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=yi(this,mi(e).call(this))).$viewValue=null,t.$modelValue=null,t.$parsers=[],t.$formatters=[],t.$viewChangeListeners=[],t.$validators=[],t.$feedback="",t.$pristine=!0,t.$dirty=!1,t.$valid=!0,t.$invalid=!1,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&di(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){var t=this;if(this.setViewValue(),null!=this.$component)throw ft(this.$component.change)&&this.$component.change.on((function(e,n){t.setModelValue(n.newvalue)})),new Error("Compoent "+this.$component.$$meta.selector+"must define [change] event");this.$htmlElement.addEventListener("input",(function(e){t.setModelValue(e.target.value)}))}},{key:"onUpdate",value:function(){this.setViewValue()}},{key:"onDestroy",value:function(){this.$parsers=null,this.$formatters=null,this.$viewChangeListeners=null,this.$validators=null}},{key:"setViewValue",value:function(){var t=this;this.$modelValue=this.$binding.compute();var e=this.$modelValue;this.$validators.forEach((function(e){e.call(t,t.$modelValue,t.$viewValue)})),this.$formatters.forEach((function(n){e=n.call(t,e)})),this.$viewValue!==e&&(this.$viewValue=e,null==this.$component?this.$htmlElement.value=this.$modelValue:this.$component.$setAttr("value",this.$modelValue)),this.updateCss(),this.updateState()}},{key:"setModelValue",value:function(t){var e=this;this.setDirty(!0),this.$viewValue=t,this.$viewChangeListeners.forEach((function(n){n.call(e,t)}));var n=this.$viewValue;this.$parsers.forEach((function(t){n=t.call(e,n)})),this.$modelValue!==n&&(this.$modelValue=n,this.$validators.forEach((function(t){t.call(e,e.$modelValue,e.$viewValue)})),this.$binding.assign(this.$modelValue))}},{key:"updateCss",value:function(){var t=this.$htmlElement,e=this.options.cssClass;this.$dirty?(t.classList.add(e.dirty),t.classList.remove(e.pristine)):(t.classList.add(e.pristine),t.classList.remove(e.dirty)),this.$valid?(t.classList.add(e.valid),t.classList.remove(e.invalid)):(t.classList.add(e.invalid),t.classList.remove(e.valid))}},{key:"updateState",value:function(){var t=this.$htmlElement.name;if(t){var e=this.$binding.scope.toProxy();null==e[t]&&(e[t]={});var n=e[t].toProxy();n.$pristine=this.$pristine,n.$dirty=this.$dirty,n.$valid=this.$valid,n.$invalid=this.$invalid,n.$feedback=this.$feedback}}},{key:"setDirty",value:function(t){this.$dirty=t,this.$pristine=!t,this.updateState(),this.updateCss()}},{key:"setValidity",value:function(t,e){this.$valid=t,this.$invalid=!t,this.$feedback=e,this.updateState(),this.updateCss()}}])&&pi(n.prototype,i),r&&pi(n,r),e}(ln));function bi(t){return(bi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function wi(t,e){return!e||"object"!==bi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ki(t){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $i(t,e){return($i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xi;jn({namespace:"sine",selector:"n-repeat"})(vi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=wi(this,ki(e).call(this))).scope=null,t.itemExp="",t.itemsExp="",t.itemTemplate="",t.dataItems=[],t.cmpItems=[],t.header=null,t.footer=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$i(t,e)}(e,t),n=e,(i=[{key:"onCompile",value:function(){var t=this.$attr.nodeValue,e=this.$element,n=/^([a-z_]+\w+)\s+in\s+(.+)$/i.exec(t);if(null==n)throw new Error("n-repeat: parameter is not valid");this.itemExp=n[1],this.itemsExp=n[2],e.removeAttribute(this.$attr),this.itemTemplate=e.getOuterTpl();var i=this,r=e.createConnection("n-repeat",(function(t){var e=document.createDocumentFragment(),n=t.$eval(i.itemsExp);return i.scope=t,i.setDataItems(n),i.header=document.createComment("start: n-repeat"),i.footer=document.createComment("end: n-repeat"),e.appendChild(i.header),e.appendChild(i.footer),e}));e.parentNode.replaceChild(e,r),e.destroy(),r.onInsert=function(){i.render()},r.onDetect=function(){var t=i.scope.$eval(i.itemsExp);i.dataItems!==t?(i.setDataItems(t),i.render()):i.cmpItems.forEach((function(t){t.$detect()}))},r.onDestroy=function(){i.$destroy(),e=null,r=null}}},{key:"onDestroy",value:function(){this.cmpItems.forEach((function(t){t.$destroy()})),this.cmpItems=null,this.scope=null,this.dataItems=null,this.header=null,this.footer=null}},{key:"setDataItems",value:function(t){var e=this;k(t)?this.dataItems=t:this.dataItems=[],this.scope.$watch(this.dataItems,"length",(function(){e.render()}))}},{key:"getCmpItem",value:function(t){var e=this,n=this.cmpItems.filter((function(n){return n[e.itemExp]===t}));if(0===n.length)return null;var i=n[0];return this.cmpItems=this.cmpItems.filter((function(n){return n[e.itemExp]!==t})),i}},{key:"render",value:function(){var t=this,e=document.createDocumentFragment(),n=[],i=0;c(t.dataItems,(function(r,o){var s=t.getCmpItem(r);null==s&&((s=new un({template:t.itemTemplate}))[t.itemExp]=r,s.$inheritCmp(t.scope)),s.$index=i,e.appendChild(s.$render(!0)),n.push(s),i++})),t.cmpItems.length>0&&t.cmpItems.forEach((function(t){t.$destroy()})),t.cmpItems=n,Y(t.header,t.footer),t.footer.parentNode.insertBefore(e,t.footer)}}])&&gi(n.prototype,i),r&&gi(n,r),e}(ln));function Ei(t){return(Ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ci(t,e){return!e||"object"!==Ei(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Si(t){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ji(t,e){return(ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _i;jn({namespace:"sine",selector:"n-show",inject:{$animate:"$animate"}})(xi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ci(this,Si(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ji(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.toggle()}},{key:"onUpdate",value:function(){this.toggle()}},{key:"toggle",value:function(){var t=this;this.$binding.compute()?this.$animate.enter(this.$element,(function(){t.$htmlElement.style.display="initial"})):this.$animate.leave(this.$element,(function(){t.$htmlElement.style.display="none"}))}}])&&Oi(n.prototype,i),r&&Oi(n,r),e}(ln));function Pi(t){return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ni(t,e){return!e||"object"!==Pi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Di(t,e){return(Di=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ii,Mi=jn({namespace:"sine",selector:"n-class"})(_i=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ni(this,Ai(e).call(this))).unwatch=null,t.initialClassList=[],t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Di(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.parseClass(),this.setClass()}},{key:"onUpdate",value:function(){this.setClass()}},{key:"watchArray",value:function(t,e){var n=this;this.unwatchArray(),this.$scope.$watch(t,"length",(function(){e.call(n)}))}},{key:"unwatchArray",value:function(){null!=this.unwatch&&(this.unwatch.call(this),this.unwatch=null)}},{key:"onDestroy",value:function(){this.unwatchArray()}},{key:"textToArray",value:function(t){return t.split(" ").filter((function(t){return t.trim().length>0}))}},{key:"parseClass",value:function(){var t=this.$getAttrValue("class");t&&(this.initialClassList=this.textToArray(t))}},{key:"setClassList",value:function(t){var e=this;this.$htmlElement.classList.forEach((function(t){e.$htmlElement.classList.remove(t)})),this.initialClassList.forEach((function(t){e.$htmlElement.classList.add(t)})),t.forEach((function(t){e.$htmlElement.classList.add(t)}))}},{key:"setClass",value:function(){if(!this.skip()){var t=this,e=[],n=this.$binding.compute();if(null!=n)if(E(n))e=this.textToArray(n);else{if(!k(n))throw new Error("Parameter of n-class should be string or array");e=n,this.watchArray(n,(function(){t.setClassList(n)}))}this.setClassList(e)}}},{key:"skip",value:function(){return!1}}])&&Ti(n.prototype,i),r&&Ti(n,r),e}(ln))||_i;function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ri(t,e){return!e||"object"!==Vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ui(t){return(Ui=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qi(t,e){return(qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fi;jn({namespace:"sine",selector:"n-class-even"})(Ii=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ri(this,Ui(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qi(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!0&this.$scope.$index}}])&&Li(n.prototype,i),r&&Li(n,r),e}(Mi));function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Hi(t,e){return!e||"object"!==Wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ki(t){return(Ki=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zi(t,e){return(zi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Yi;jn({namespace:"sine",selector:"n-class-odd"})(Fi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Hi(this,Ki(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zi(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!1&this.$scope.$index}}])&&Bi(n.prototype,i),r&&Bi(n,r),e}(Mi));function Zi(t){return(Zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Xi(t,e){return!e||"object"!==Zi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ji(t){return(Ji=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qi(t,e){return(Qi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var tr,er=jn({namespace:"sine",selector:"n-style"})(Yi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Xi(this,Ji(e).call(this))).unwatch=null,t.initialStyle={},t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qi(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.parseStyle(),this.setStyle()}},{key:"onUpdate",value:function(){this.setStyle()}},{key:"onDestroy",value:function(){this.unwatchObj()}},{key:"watchObj",value:function(t,e){var n=this;this.unwatchObj(),this.$scope.$watch(t,"*",(function(){e.call(n)}))}},{key:"unwatchObj",value:function(){null!=this.unwatch&&(this.unwatch.call(this),this.unwatch=null)}},{key:"parseStyle",value:function(){var t=this.$getAttrValue("style");t&&(this.initialStyle=this.textToObject(t))}},{key:"textToObject",value:function(t){var e={};return t.split(";").filter((function(t){return t.trim().length>0})).forEach((function(t){var n=t.split(":"),i=n[0],r=n[1];e[i]=r})),e}},{key:"applyStyle",value:function(t){var e=this.$htmlElement;e.style="",c(this.initialStyle,(function(t,n){e.style[n]=t})),c(t,(function(t,n){e.style[n]=t}))}},{key:"setStyle",value:function(){if(!this.skip()){var t=this,e={},n=this.$binding.compute();if(null!=n)if(E(n))e=this.textToObject(n);else{if(!$(n))throw new Error("Parameter of n-style should be string or object");e=n,this.watchObj(n,(function(){t.applyStyle(n)}))}this.applyStyle(e)}}},{key:"skip",value:function(){return!1}}])&&Gi(n.prototype,i),r&&Gi(n,r),e}(ln))||Yi;function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ir(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function rr(t,e){return!e||"object"!==nr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function or(t){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sr(t,e){return(sr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ur;jn({namespace:"sine",selector:"n-style-even"})(tr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),rr(this,or(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sr(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!0&this.$scope.$index}}])&&ir(n.prototype,i),r&&ir(n,r),e}(er));function cr(t){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function lr(t,e){return!e||"object"!==cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fr(t){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hr(t,e){return(hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pr;jn({namespace:"sine",selector:"n-style-odd"})(ur=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lr(this,fr(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hr(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!1&this.$scope.$index}}])&&ar(n.prototype,i),r&&ar(n,r),e}(er));function yr(t){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function dr(t,e){return!e||"object"!==yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vr(t){return(vr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function br(t,e){return(br=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var gr;jn({namespace:"sine",selector:"n-switch"})(pr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=dr(this,vr(e).call(this))).value=null,t.valueChanged=new at,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&br(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.value=this.$binding.compute()}},{key:"onUpdate",value:function(){var t=this.value,e=this.$binding.compute();e!==t&&(this.value=e),this.valueChanged.fire({oldValue:t,newValue:e})}}])&&mr(n.prototype,i),r&&mr(n,r),e}(ln));function wr(t){return(wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function $r(t,e){return!e||"object"!==wr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xr(t){return(xr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Er(t,e){return(Er=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Or;jn({namespace:"sine",selector:"n-switch-default"})(gr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=$r(this,xr(e).call(this))).isMatch=!1,t.htmlComment=null,t.switchWhenDirs=[],t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Er(t,e)}(e,t),n=e,(i=[{key:"initSwitchWhenDirs",value:function(){for(var t=this.$element;null!=t.previousSibling;){var e=t.previousSibling.getDirective("n-switch-when");null!=e&&this.switchWhenDirs.push(e),t=t.previousSibling}}},{key:"match",value:function(){return!this.switchWhenDirs.some((function(t){return t.isMatch}))}},{key:"onInsert",value:function(){var t=this;this.initSwitchWhenDirs(),this.isMatch=this.match(),this.htmlComment=document.createComment("n-switch-default"),this.isMatch||K(this.$htmlElement,this.htmlComment),this.switchWhenDirs.forEach((function(e){e.isMatchChanged.on((function(){t.update()}))}))}},{key:"update",value:function(){var t=this.isMatch,e=this.match();e!==t&&(this.isMatch=e,this.isMatch?null==this.$htmlElement.parentNode&&K(this.htmlComment,this.$htmlElement):null!=this.$htmlElement.parentNode&&K(this.$htmlElement,this.htmlComment))}},{key:"onDestroy",value:function(){this.htmlComment=null,this.switchWhenDirs=null}}])&&kr(n.prototype,i),r&&kr(n,r),e}(ln));function Cr(t){return(Cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function jr(t,e){return!e||"object"!==Cr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _r(t){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Pr(t,e){return(Pr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}jn({namespace:"sine",selector:"n-switch-when"})(Or=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=jr(this,_r(e).call(this))).isMatch=!1,t.htmlComment=null,t.switchDir=null,t.isMatchChanged=new at,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Pr(t,e)}(e,t),n=e,(i=[{key:"initSwitchDir",value:function(){var t=this.$element.parentNode.getDirective("n-switch");if(null==t)throw new Error("Require n-switch directive");this.switchDir=t}},{key:"onInsert",value:function(){var t=this;this.initSwitchDir(),this.htmlComment=document.createComment("n-switch-when"),this.isMatch=this.$binding.compute()===this.switchDir.value,this.isMatch||K(this.$htmlElement,this.htmlComment),this.switchDir.valueChanged.on((function(){t.update()}))}},{key:"update",value:function(){var t=this.isMatch,e=this.$binding.compute()===this.switchDir.value;e!==t&&(this.isMatch=e,this.isMatchChanged.fire(),this.isMatch?null==this.$htmlElement.parentNode&&K(this.htmlComment,this.$htmlElement):null!=this.$htmlElement.parentNode&&K(this.$htmlElement,this.htmlComment))}},{key:"onDestroy",value:function(){this.htmlComment=null,this.switchDir=null}}])&&Sr(n.prototype,i),r&&Sr(n,r),e}(ln));function Tr(t){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ar(t,e){return!e||"object"!==Tr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ir(t,e){return(Ir=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mr,Vr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Ar(this,Dr(e).call(this))).attrName=t,n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ir(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.perform()}},{key:"onUpdate",value:function(){this.perform()}},{key:"perform",value:function(){this.$binding.compute()?this.$htmlElement.hasAttribute(this.attrName)||this.$htmlElement.setAttribute(this.attrName,""):this.$htmlElement.hasAttribute(this.attrName)&&this.$htmlElement.removeAttribute(this.attrName)}}])&&Nr(n.prototype,i),r&&Nr(n,r),e}(ln);function Lr(t){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rr(t,e){return!e||"object"!==Lr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ur(t){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function qr(t,e){return(qr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fr;jn({namespace:"sine",selector:"n-checked"})(Mr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Rr(this,Ur(e).call(this,"checked"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&qr(t,e)}(e,t),e}(Vr));function Wr(t){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Br(t,e){return!e||"object"!==Wr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hr(t){return(Hr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zr;jn({namespace:"sine",selector:"n-disabled"})(Fr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Br(this,Hr(e).call(this,"disabled"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(e,t),e}(Vr));function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t,e){return!e||"object"!==Yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gr(t){return(Gr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xr(t,e){return(Xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jr;jn({namespace:"sine",selector:"n-readonly"})(zr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Zr(this,Gr(e).call(this,"readonly"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xr(t,e)}(e,t),e}(Vr));function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function to(t,e){return!e||"object"!==Qr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function eo(t){return(eo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function no(t,e){return(no=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var io;jn({namespace:"sine",selector:"n-selected"})(Jr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),to(this,eo(e).call(this,"selected"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&no(t,e)}(e,t),e}(Vr));function ro(t){return(ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function so(t,e){return!e||"object"!==ro(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function uo(t){return(uo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function co(t,e){return(co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ao;jn({namespace:"sine",selector:"n-name"})(io=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=so(this,uo(e).call(this))).$output=!0,t.name=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&co(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){if(this.name=this.$binding.text,this.name){var t=this.$scope.toProxy();null!=this.$component?t[this.name]=this.$component:t[this.name]=this.$element}}},{key:"onDestroy",value:function(){null!=this.name&&(this.$scope[this.name]=null)}},{key:"setCmp",value:function(t){this.$scope.toProxy()[this.name]=t}}])&&oo(n.prototype,i),r&&oo(n,r),e}(ln));function lo(t){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ho(t,e){return!e||"object"!==lo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function po(t){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yo(t,e){return(yo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mo;jn({namespace:"sine",selector:"n-bind-cmp"})(ao=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ho(this,po(e).call(this))).$priority=5,t.nameDir=null,t.config=null,t.view=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yo(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.init(),this.render()}},{key:"onUpdate",value:function(){this.clear(),this.render()}},{key:"onDestroy",value:function(){this.clear(),this.nameDir=null}},{key:"init",value:function(){this.nameDir=this.$element.getDirective("n-name"),this.bindCmpOptionsDir=this.$element.getDirective("n-bind-cmp-options"),null!=this.bindCmpOptionsDir?this.config=this.bindCmpOptionsDir.value:this.config={}}},{key:"clear",value:function(){null!=this.view&&this.view.$destroy(),this.config=null}},{key:"render",value:function(){var t=this.$binding.compute();null!=t&&(this.view=this.$binding.scope.$createChildCmp(t),this.config&&this.config.onInit(this.view),this.view.$mount(this.$htmlElement),null!=this.nameDir&&this.nameDir.setCmp(this.view))}}])&&fo(n.prototype,i),r&&fo(n,r),e}(ln));function vo(t){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function go(t,e){return!e||"object"!==vo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wo(t){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $o;jn({namespace:"sine",selector:"n-bind-cmp-options"})(mo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=go(this,wo(e).call(this))).value=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.updateOptions()}},{key:"onUpdate",value:function(){this.clearOptions()}},{key:"onDestroy",value:function(){this.clear()}},{key:"updateOptions",value:function(){this.value=this.$binding.compute()}},{key:"clearOptions",value:function(){this.value=null}}])&&bo(n.prototype,i),r&&bo(n,r),e}(ln));function xo(t){return(xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oo(t,e){return!e||"object"!==xo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Co(t){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function So(t,e){return(So=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jo,_o=/\b(transform|all)(,|$)/;Pn({namespace:"sine",selector:"$animate"})($o=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Oo(this,Co(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&So(t,e)}(e,t),n=e,(i=[{key:"enter",value:function(t,e){var n=t.htmlElement;if(S(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb()),!S(n._enterCb)&&1===n.nodeType){var i=this.resolveAnimationContext(t);if(!i)return e();var r=this.resolveAnimation(i),o=this,s=r.type,u=r.enterClass,c=r.enterToClass,a=r.enterActiveClass,l=r.duration,f=q($(l)?l.enter:l),h=n._enterCb=o.once((function(){o.removeAnimationClass(n,c),o.removeAnimationClass(n,a),h.cancelled?(o.removeAnimationClass(n,u),i.enterCancelled&&i.enterCancelled(n)):i.afterEnter&&i.afterEnter(n),n._enterCb=null}));i.beforeEnter&&i.beforeEnter(n),o.addAnimationClass(n,u),o.addAnimationClass(n,a),o.nextFrame((function(){o.removeAnimationClass(n,u),h.cancelled||(o.addAnimationClass(n,c),o.isValidDuration(f)?setTimeout(h,f):o.whenAnimationEnds(n,s,h))})),e(),i.enter&&i.enter(n,h)}}},{key:"leave",value:function(t,e){var n=t.htmlElement;S(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=this.resolveAnimationContext(t);if(!i||1!==n.nodeType)return e();if(!S(n._leaveCb)){var r=this.resolveAnimation(i),o=this,s=r.type,u=r.leaveClass,c=r.leaveToClass,a=r.leaveActiveClass,l=r.duration,f=q($(l)?l.leave:l),h=n._leaveCb=o.once((function(){o.removeAnimationClass(n,c),o.removeAnimationClass(n,a),h.cancelled?(o.removeAnimationClass(n,u),i.leaveCancelled&&i.leaveCancelled(n)):(e(),i.afterLeave&&i.afterLeave(n)),n._leaveCb=null}));i.delayLeave?i.delayLeave(p):p()}function p(){h.cancelled||(i.beforeLeave&&i.beforeLeave(n),o.addAnimationClass(n,u),o.addAnimationClass(n,a),o.nextFrame((function(){o.removeAnimationClass(n,u),h.cancelled||(o.addAnimationClass(n,c),o.isValidDuration(f)?setTimeout(h,f):o.whenAnimationEnds(n,s,h))})),i.leave&&i.leave(n,h))}}},{key:"resolveAnimation",value:function(t){var e={};return!1!==t.css&&f(e,this.autoCssAnimation(t.name||"n")),f(e,t),e}},{key:"autoCssAnimation",value:function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}},{key:"once",value:function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}},{key:"nextFrame",value:function(t){requestAnimationFrame((function(){requestAnimationFrame(t)}))}},{key:"addAnimationClass",value:function(t,e){var n=t._animationClasses||(t._animationClasses=[]);n.indexOf(e)<0&&(n.push(e),Q(t,e))}},{key:"removeAnimationClass",value:function(t,e){t._animationClasses&&F(t._animationClasses,e),tt(t,e)}},{key:"whenAnimationEnds",value:function(t,e,n){var i=this.getAnimationInfo(t,e),r=i.type,o=i.timeout,s=i.propCount;if(!r)return n();var u="transition"===r?"transitionend":"animationend",c=0,a=function(){t.removeEventListener(u,l),n()},l=function(e){e.target===t&&++c>=s&&a()};setTimeout((function(){c<s&&a()}),o+1),t.addEventListener(u,l)}},{key:"getAnimationInfo",value:function(t,e){var n,i=window.getComputedStyle(t),r=i.transitionDelay.split(", "),o=i.transitionDuration.split(", "),s=this.getTimeout(r,o),u=i.animationDelay.split(", "),c=i.animationDuration.split(", "),a=this.getTimeout(u,c),l=0,f=0;return"transition"===e?s>0&&(n="transition",l=s,f=o.length):"animation"===e?a>0&&(n="animation",l=a,f=c.length):f=(n=(l=Math.max(s,a))>0?s>a?"transition":"animation":null)?"transition"===n?o.length:c.length:0,{type:n,timeout:l,propCount:f,hasTransform:"transition"===n&&_o.test(i.transitionProperty)}}},{key:"getTimeout",value:function(t,e){for(var n=this;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,i){return n.toMs(e)+n.toMs(t[i])})))}},{key:"toMs",value:function(t){return 1e3*Number(t.slice(0,-1))}},{key:"isValidDuration",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"resolveAnimationContext",value:function(t){var e=t.getDirectives().filter((function(t){return t.animation=!0}));return e.length?e[0]:null}}])&&Eo(n.prototype,i),r&&Eo(n,r),e}(mn));function Po(t){return(Po="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function To(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function No(t,e){return!e||"object"!==Po(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ao(t){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Do(t,e){return(Do=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Io=jn({namespace:"sine",selector:"animation"})(jo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=No(this,Ao(e).call(this))).animation=!0,t.name="",t.type="",t.css=!0,t.$priority=-100,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Do(t,e)}(e,t),n=e,(i=[{key:"nextFrame",value:function(t){requestAnimationFrame((function(){requestAnimationFrame(t)}))}}])&&To(n.prototype,i),r&&To(n,r),e}(ln))||jo;n.d(e,"decorator",(function(){return i})),n.d(e,"forEach",(function(){return c})),n.d(e,"some",(function(){return a})),n.d(e,"copy",(function(){return l})),n.d(e,"extend",(function(){return f})),n.d(e,"merge",(function(){return h})),n.d(e,"object",(function(){return m})),n.d(e,"inherit",(function(){return d})),n.d(e,"lowercase",(function(){return v})),n.d(e,"uppercase",(function(){return b})),n.d(e,"isUndefined",(function(){return g})),n.d(e,"isDefined",(function(){return w})),n.d(e,"isObject",(function(){return $})),n.d(e,"isBlankObject",(function(){return x})),n.d(e,"isNumber",(function(){return O})),n.d(e,"isDate",(function(){return C})),n.d(e,"isFunction",(function(){return S})),n.d(e,"isRegExp",(function(){return j})),n.d(e,"isBoolean",(function(){return _})),n.d(e,"isArray",(function(){return k})),n.d(e,"isString",(function(){return E})),n.d(e,"isSame",(function(){return T})),n.d(e,"isFormData",(function(){return P})),n.d(e,"debug",(function(){return N})),n.d(e,"contains",(function(){return A})),n.d(e,"containsStr",(function(){return D})),n.d(e,"hasProperty",(function(){return I})),n.d(e,"getProperty",(function(){return M})),n.d(e,"setProperty",(function(){return V})),n.d(e,"concat",(function(){return L})),n.d(e,"orderBy",(function(){return R})),n.d(e,"orderByDescending",(function(){return U})),n.d(e,"toNumber",(function(){return q})),n.d(e,"remove",(function(){return F})),n.d(e,"format",(function(){return W})),n.d(e,"getChildNodes",(function(){return B})),n.d(e,"clearChildNodes",(function(){return H})),n.d(e,"replaceNode",(function(){return K})),n.d(e,"removeNode",(function(){return z})),n.d(e,"removeNodeBetween",(function(){return Y})),n.d(e,"insertNodeAfter",(function(){return Z})),n.d(e,"queryElementLoaded",(function(){return G})),n.d(e,"queryElementUnloaded",(function(){return X})),n.d(e,"queryElementState",(function(){return J})),n.d(e,"addClass",(function(){return Q})),n.d(e,"removeClass",(function(){return tt})),n.d(e,"httpGet",(function(){return rt})),n.d(e,"httpPost",(function(){return ot})),n.d(e,"Messenger",(function(){return at})),n.d(e,"MessengerBus",(function(){return lt})),n.d(e,"isMessenger",(function(){return ft})),n.d(e,"typeConst",(function(){return pt})),n.d(e,"injector",(function(){return dt})),n.d(e,"Injector",(function(){return mt})),n.d(e,"Component",(function(){return un})),n.d(e,"Directive",(function(){return ln})),n.d(e,"Filter",(function(){return hn})),n.d(e,"Service",(function(){return mn})),n.d(e,"isComponent",(function(){return kn})),n.d(e,"isDirective",(function(){return $n})),n.d(e,"isFilter",(function(){return xn})),n.d(e,"isService",(function(){return En})),n.d(e,"namespace",(function(){return dn})),n.d(e,"component",(function(){return vn})),n.d(e,"directive",(function(){return bn})),n.d(e,"filter",(function(){return gn})),n.d(e,"service",(function(){return wn})),n.d(e,"bootstrap",(function(){return On})),n.d(e,"compile",(function(){return Ht})),n.d(e,"compute",(function(){return Kt})),n.d(e,"parse",(function(){return Bt})),n.d(e,"parseExp",(function(){return zt})),n.d(e,"parseAssignment",(function(){return Yt})),n.d(e,"ClassDirective",(function(){return Mi})),n.d(e,"StyleDirective",(function(){return er})),n.d(e,"Animation",(function(){return Io}))}])}));