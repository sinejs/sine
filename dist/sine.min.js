!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.sine=e():t.sine=e()}(window,(function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i={};function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(i),n.d(i,"component",(function(){return Cn})),n.d(i,"directive",(function(){return Sn})),n.d(i,"filter",(function(){return jn})),n.d(i,"service",(function(){return _n}));var o=!0,s=Object.prototype.toString,u=Object.getPrototypeOf;function c(t,e,n){if(k(t)){for(var i=0;i<t.length;i++)if(e(t[i],i))return}else if($(t)){for(var r in t)if((n||t.hasOwnProperty(r))&&e(t[r],r))return}else e(t,t)}function a(t,e){if(k(t)){for(var n=0;n<t.length;n++)if(e(n,t[n]))return!0}else{if(!$(t))return e(t,t);for(var i in t)if(t.hasOwnProperty(i)&&e(i,t[i]))return!0}}function l(){var t,e=!1,n=0,i=arguments[n];if(_(i)&&(e=i,n++,i=arguments[n]),arguments.length>n+1&&(t=arguments[n+1]),k(i)){var r=[];return i.forEach((function(n,o){(null==t||t(i,o,n))&&r.push(e?l(n):n)})),r}if($(i)){var o=m(i);return c(i,(function(n,r){(null==t||t(i,r,n))&&(o[r]=e?l(n):n)})),o}return i}function f(){var t=!1,e=0,n=arguments[e];_(n)&&(t=n,n=arguments[++e]),t?Array.prototype.slice.call(arguments,e+1).forEach((function(t){y(n,t)})):Array.prototype.slice.call(arguments,e+1).forEach((function(t){p(n,t)}))}function h(){var t=!1,e=0,n={};return _(arguments[e])&&(t=arguments[e],e++),t?Array.prototype.slice.call(arguments,e).forEach((function(t){y(n,t)})):Array.prototype.slice.call(arguments,e).forEach((function(t){p(n,t)})),n}function p(t,e){c(e,(function(e,n){t[n]=e}))}function y(t,e){c(e,(function(e,n){null==t[n]?t[n]=e:$(t[n])&&$(e)?y(t[n],e):t[n]=e}))}function m(t){function e(){}return e.prototype=t,new e}function d(t,e){!function(t,e){var n=m(e.prototype);n.constructor=t,t.prototype=n}(t,e),t.super=function(){e.apply(this,arguments)}}function v(t){return E(t)?t.toLowerCase():t}function b(t){return E(t)?t.toUpperCase():t}function g(t){return void 0===t}function w(t){return void 0!==t}function k(t){return t instanceof Array}function $(t){return null!==t&&"object"===r(t)}function x(t){return null!==t&&"object"===r(t)&&!u(t)}function E(t){return"string"==typeof t}function O(t){return"number"==typeof t}function C(t){return"[object Date]"===s.call(t)}function S(t){return"function"==typeof t}function j(t){return"[object RegExp]"===s.call(t)}function _(t){return"boolean"==typeof t}function P(t){return"undefined"!=typeof FormData&&t instanceof FormData}function T(t,e){var n=t===e;return n||(k(t)&&k(e)?t.length===e.length&&(n=!a(t,(function(t,n){return!T(n,e[t])}))):$(t)&&$(e)&&u(t)===u(e)&&(n=!a(t,(function(t,n){return!T(n,e[t])})))),n}function N(t){o&&console.log(t)}function A(t,e){return t.some((function(t){return t===e}))}function D(t,e,n){return t.some((function(t){return t===e||n&&v(t)===v(e)}))}function I(t,e,n){if(!t)return!1;for(var i,r=!0,o=e.split("."),s=t;r&&o.length>0;)i=o.shift(),r=!1,c(s,(function(t,e){return(r=e===i||n&&v(e)===v(i))&&(s=t),r}),!0);return r}function M(t,e,n){if(!t)return null;for(var i,r=!0,o=e.split("."),s=t;r&&o.length>0;)i=o.shift(),r=!1,c(s,(function(t,e){return(r=e===i||n&&v(e)===v(i))&&(s=t),r}),!0);return r?s:null}function V(t,e,n,i){if(t){for(var r,o=!0,s=e.split("."),u=t;o&&s.length>0;)r=s.shift(),0===s.length?u[r]=n:(o=!1,c(u,(function(t,e){return(o=e===r||i&&v(e)===v(r))&&(u=t),o}),!0));if(!o)throw new Error(e+": Can not set property of undefined")}}function L(){return Array.prototype.concat.apply([],arguments)}function R(t,e){var n=function(t){return null==e?t:e(t)};return t.sort((function(t,e){return n(t)<n(e)?-1:n(t)>n(e)?1:0}))}function U(t,e){var n=function(t){return null==e?t:e(t)};return t.sort((function(t,e){return n(t)<n(e)?1:n(t)>n(e)?-1:0}))}function q(t){var e=parseFloat(t);return isNaN(e)?t:e}function F(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function W(t){return Array.prototype.slice.call(t.childNodes,0)}function B(t){W(t).forEach((function(e){t.removeChild(e)}))}function H(t,e){var n=t.parentNode;null!=n&&(n.insertBefore(e,t),n.removeChild(t))}function K(t){var e=t.parentNode;null!=e&&e.removeChild(t)}function z(t,e){var n=t.parentNode;W(n).forEach((function(i){i.previousSibling===t&&i!==e&&n.removeChild(i),i.nextSibling===e&&i!==t&&n.removeChild(i)}))}function Y(t,e){var n=t.parentNode;n.lastChild===t?n.appendChild(e):n.insertBefore(e,t.nextSibling)}function Z(t,e){var n=!1;return requestAnimationFrame((function i(){n||(t.clientWidth>0&&t.clientHeight>0?e():requestAnimationFrame(i))})),function(){n=!0}}function G(t,e){var n=!1;return requestAnimationFrame((function i(){n||(0===t.clientWidth&&0==t.clientHeight?e():requestAnimationFrame(i))})),function(){n=!0}}function X(t,e){var n=!1,i=!1;return requestAnimationFrame((function r(){n||(t.clientWidth>0&&t.clientHeight>0?i||(i=!0,null!=e.onEnter&&e.onEnter.call(e)):i&&(i=!1,null!=e.onLeave&&e.onLeave.call(e)),requestAnimationFrame(r))})),function(){n=!0}}function J(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach((function(e){return t.classList.add(e)})):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Q(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(/\s+/).forEach((function(e){return t.classList.remove(e)})):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{for(var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";n.indexOf(i)>=0;)n=n.replace(i," ");(n=n.trim())?t.setAttribute("class",n):t.removeAttribute("class")}}var tt={start:0,opened:1,sent:2,received:3,finish:4};function et(t,e){return null!=e.data&&"get"===e.method.toLowerCase()&&c(e.data,(function(e,n){!function(t,e,n){t+=-1===t.indexOf("?")?"?":"&",t+=encodeURIComponent(e)+"="+encodeURIComponent(n)}(t,n,e)})),t}function nt(t){return function(t,e){return new Promise(t,e)}((function(e,n){var i=new XMLHttpRequest;P(t.data)&&delete t.data["Content-Type"],i.onreadystatechange=function(){if(i&&i.readyState===tt.finish&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var r,o,s,u,a,l="getAllResponseHeaders"in i?(r=i.getAllResponseHeaders(),a={},r?(c(r.split("\n"),(function(t,e){if(u=t.indexOf(":"),o=t.substr(0,u).trim().toLowerCase(),s=t.substr(u+1).trim(),o){if(a[o]&&ignoreDuplicateOf.indexOf(o)>=0)return;a[o]="set-cookie"===o?(a[o]?a[o]:[]).concat([s]):a[o]?a[o]+", "+s:s}})),a):a):null,f={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:l,config:t,request:i};i.status>=200&&i.status<300||304==i.status?e(f):n(f),i=null}},i.open(t.method.toLowerCase(),et(t.url,t),!0),i.send(t.data)}))}function it(t,e,n){var i={method:"get",url:t,data:e};return null!=n&&f(i,n),nt(i)}function rt(t,e,n){var i={method:"post",url:t,data:e};return null!=n&&f(i,n),nt(i)}function ot(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function st(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ut(t,e,n){return e&&st(t.prototype,e),n&&st(t,n),t}var ct=function(){function t(){ot(this,t),this.handlers=[]}return ut(t,[{key:"on",value:function(t){this.handlers.push(t)}},{key:"off",value:function(t){for(var e=0;e<this.handlers.length;e++)this.handlers[e]===t&&this.handlers.splice(e,1)}},{key:"fire",value:function(t,e){var n;e=e||this;for(var i=0;i<this.handlers.length;i++)S(this.handlers[i])&&(n=this.handlers[i].call(e,t));return n}}]),t}(),at=function(){function t(){ot(this,t),this.messengers={}}return ut(t,[{key:"get",value:function(t){return this.messengers[t]||(this.messengers[t]=new ct),this.messengers[t]}},{key:"on",value:function(t,e){this.get(t).on(e)}},{key:"off",value:function(t,e){this.get(t).off(e)}},{key:"fire",value:function(t,e,n){return this.get(t).fire(e,n)}}]),t}();function lt(t){return t instanceof ct}function ft(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ht={filter:"filter",service:"service",component:"component",directive:"directive"},pt=/^[a-z_\$][\w\$-]*/i,yt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container={},this.waitingToExtends={},this.insContainer={}}var e,n,i;return e=t,(n=[{key:"getMapping",value:function(t){return this.container[t]||(this.container[t]={}),this.container[t]}},{key:"getInstances",value:function(t){return this.insContainer[t]||(this.insContainer[t]=[]),this.insContainer[t]}},{key:"register",value:function(t,e,n){if(-1!==e.indexOf("."))throw new Error('Illegal character "."');var i=this.getMapping(t);if(null==i[e])i[e]=[];else{var r=i[e].filter((function(t){return t.prototype.$$meta.namespace===n.prototype.$$meta.namespace}));if(r.length>0)throw new Error(e+" is exist under namespace "+r[0].prototype.$$meta.namespace)}i[e].push(n)}},{key:"registerComponent",value:function(t,e){this.register(ht.component,t,e)}},{key:"registerDirective",value:function(t,e){this.register(ht.directive,t,e)}},{key:"contains",value:function(t,e,n){var i,r=this.getMapping(t),o=e.split("."),s="";return o.length>1&&(e=o.pop(),s=o.join(".")),null!=(i=n?M(r,e,!0):r[e])&&!(s&&i.length>0&&0===(i=i.filter((function(t){var e=t.prototype.$$meta;return e.namespace&&v(e.namespace)===v(s)}))).length)}},{key:"containsComponent",value:function(t){return this.contains(ht.component,t,!0)}},{key:"containsDirective",value:function(t){return this.contains(ht.directive,t,!0)}},{key:"get",value:function(t,e,n){var i,r=this.getMapping(t),o=e.split("."),s="";if(o.length>1&&(e=o.pop(),s=o.join(".")),null==(i=n?M(r,e,!0):r[e]))throw new Error(t+" "+e+" is not defined");if(s&&i.length>0&&0===(i=i.filter((function(t){var e=t.prototype.$$meta;return e.namespace&&v(e.namespace)===v(s)}))).length)throw new Error(e+" is not exist under namespace "+s);if(i.length>1){var u=i.map((function(t){return t.prototype.$$meta.namespace}));throw new Error("namespace "+u.join("|")+" all have "+e)}return i[0]}},{key:"getComponent",value:function(t){return this.get(ht.component,t)}},{key:"getDirective",value:function(t){return this.get(ht.directive,t)}},{key:"getFilter",value:function(t){return this.get(ht.filter,t)}},{key:"getService",value:function(t){return this.get(ht.service,t)}},{key:"create",value:function(t,e){var n,i=this.get(t,e);switch(t){case ht.component:n=this.createComponent(i);break;case ht.directive:n=this.createDirective(i);break;case ht.filter:n=this.createFilter(i);break;case ht.service:n=this.createService(i);break;default:n=new i}return n}},{key:"createComponent",value:function(t){return E(t)&&(t=this.getComponent(t)),new t}},{key:"createDirective",value:function(t){return E(t)&&(t=this.getDirective(t)),new t}},{key:"createFilter",value:function(t){return E(t)&&(t=this.getFilter(t)),new t}},{key:"createService",value:function(t){var e,n=this.getInstances(ht.service);if(E(t)&&(t=this.getService(t)),!t.prototype.$$meta.nonShared){var i=n.filter((function(e){return e instanceof t}));i.length&&(e=i[0])}return e||(e=new t,n.push(e)),e}},{key:"service",value:function(t){return this.createService(t)}},{key:"getWaitingToExtends",value:function(t){return this.waitingToExtends[t]||(this.waitingToExtends[t]=[]),this.waitingToExtends[t]}},{key:"setWaitingToExtends",value:function(t,e){this.waitingToExtends[t]=e}},{key:"checkSelector",value:function(t,e){if(pt.test(t)){var n="";switch(t.split("-").forEach((function(t){n+=b(t[0])+t.substring(1)})),e){case ht.component:n+="Component";break;case ht.directive:n+="Directive";break;case ht.filter:n+="Filter";break;case ht.service:n+="Service"}return n}throw new Error(t+"is not a valid name")}},{key:"buildConstructor",value:function(t,e,n){var i,r=this,o=this.checkSelector(t,n.contractType),s=r.getWaitingToExtends(n.contractType);if(i=new Function("onConstruct",'"use strict";return function '+o+"(){onConstruct.call(this);};")((function(){S(i.super)&&i.super.call(this),S(e.construct)&&e.construct.call(this,ct)})),S(n.superClass)&&d(i,n.superClass),e.selector=t,E(e.extends))if(mt.contains(n.contractType,e.extends)){var u=mt.get(n.contractType,e.extends);c(t,e,i,u)}else s.push({superName:e.extends,callback:function(n){c(t,e,i,n)}});else c(t,e,i);function c(t,e,i,o){null!=o&&d(i,o),$(e.methods)&&f(i.prototype,e.methods),r.registerConstructor(n.contractType,t,i,e);var u=[],c=e.namespace+"."+t;s.forEach((function(t){t.superName===c?t.callback.call(null,i):u.push(t)})),r.setWaitingToExtends(n.contractType,u)}return i}},{key:"registerConstructor",value:function(t,e,n,i){var r=n.prototype.$$meta;if(r&&r.protected)throw new Error(t+": "+i.extends+" is protected, it is not allowed to extend!");i=h(!0,l(!0,r,(function(t,e){return!(t===r&&("construct"===e||"methods"===e))})),i),n.prototype.$$meta=i,i.local||mt.register(t,e,n)}},{key:"injectServices",value:function(t){var e=this,n=t.$getMeta();$(n.inject)&&c(n.inject,(function(n,i){Object.defineProperty(t,i,{enumerable:!1,configurable:!1,get:function(){var r="$$"+i;return null==t[r]&&(t[r]=e.createService(n)),t[r]}})}))}}])&&ft(e.prototype,n),i&&ft(e,i),t}(),mt=new yt;function dt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entity:6,processingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12,connection:101},bt=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodeType=e,this.nodeName=n,this.nodeValue=i,this.childNodes=[],this.parentNode=null,this.previousSibling=null,this.nextSibling=null,this.firstChild=null,this.lastChild=null,this.ownerDocument=null,this.scope=null}var e,n,i;return e=t,(n=[{key:"$pushChild",value:function(t){t.parentNode=this,this.childNodes.push(t)}},{key:"$buildSibling",value:function(){if(0!==this.childNodes.length){var t=this;1===this.childNodes.length?(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[0]):(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1],this.childNodes.forEach((function(e,n){0!==n?n!==t.childNodes.length-1?(e.previousSibling=t.childNodes[n-1],e.nextSibling=t.childNodes[n+1]):e.previousSibling=t.childNodes[n-1]:e.nextSibling=t.childNodes[n+1]}))),this.childNodes.forEach((function(t){t.$buildSibling()}))}}},{key:"$clearParentAndSibling",value:function(){this.parentNode=null,this.previousSibling=null,this.nextSibling=null}},{key:"$remove",value:function(){null!=this.parentNode&&this.parentNode.removeChild(this)}},{key:"$destroy",value:function(){this.$remove(),this.$clearParentAndSibling(),this.childNodes.length=0,this.firstChild=null,this.lastChild=null,this.ownerDocument=null,this.scope=null}},{key:"hasChildNodes",value:function(){return 0!==this.childNodes.length}},{key:"clearChildNodes",value:function(){this.childNodes.forEach((function(t){t.destroy()})),this.childNodes.length=0}},{key:"appendChild",value:function(t){return null!=t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,0===this.childNodes.length?this.firstChild=t:(this.lastChild.nextSibling=t,t.previousSibling=this.lastChild),t.compile(this.compileOptions),this.lastChild=t,this.childNodes.push(t),t}},{key:"insertBefore",value:function(t,e){null!=e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);if(-1===n)throw new Error("Ref node is not a child of specified node");return e.parentNode=this,null!=t.previousSibling&&(e.previousSibling=t.previousSibling,t.previousSibling.nextSibling=e),e.nextSibling=t,t.previousSibling=e,0===n&&(this.firstChild=e),e.compile(this.compileOptions),this.childNodes.splice(n,0,e),e}},{key:"insertAfter",value:function(t,e){return null==t.nextSibling?this.appendChild(e):this.insertBefore(t.nextSibling,e)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Remove node is not a child of specified node");return null!=t.previousSibling&&(t.previousSibling.nextSibling=t.nextSibling),null!=t.nextSibling&&(t.nextSibling.previousSibling=t.previousSibling),0===e&&(this.firstChild=t.nextSibling),e===this.childNodes.length-1&&(this.lastChild=t.previousSibling),t.$clearParentAndSibling(),this.childNodes.splice(e,1),t}},{key:"replaceChild",value:function(t,e){null!=e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);if(-1===n)throw new Error("Ref node is not a child of specified node");return e.parentNode=this,e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,this.firstChild===t&&(this.firstChild=e),this.lastChild===t&&(this.lastChild=e),t.$clearParentAndSibling(),e.compile(this.compileOptions),this.childNodes.splice(n,1,e),e}},{key:"cloneNode",value:function(){throw new Error("not implemented")}},{key:"compile",value:function(t){this.childNodes.forEach((function(e){e.compile(t)}))}},{key:"notifyCompiled",value:function(t){this.childNodes.forEach((function(e){e.notifyCompiled(t)}))}},{key:"link",value:function(t){return this.scope=t,this.childNodes.map((function(e){e.link(t)}))}},{key:"notifyLinked",value:function(){this.childNodes.forEach((function(t){t.notifyLinked()}))}},{key:"detect",value:function(){this.hasChange()&&this.update()}},{key:"hasChange",value:function(){return!1}},{key:"update",value:function(){}},{key:"destroy",value:function(){this.childNodes.map((function(t){t.destroy()})),this.$destroy()}}])&&dt(e.prototype,n),i&&dt(e,i),t}(),gt={},wt={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'};function kt(t){this.options=t}"+ - * / % === !== == != < > <= >= && || ! = |".split(" ").forEach((function(t){gt[t]=!0})),kt.prototype.lex=function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),i=n+this.peek(2),r=gt[e],o=gt[n],s=gt[i];if(r||o||s){var u=s?i:o?n:e;this.tokens.push({index:this.index,text:u,operator:!0}),this.index+=u.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},kt.prototype.is=function(t,e){return-1!==e.indexOf(t)},kt.prototype.peek=function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)},kt.prototype.isNumber=function(t){return"0"<=t&&t<="9"&&"string"==typeof t},kt.prototype.isWhitespace=function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"Â "===t},kt.prototype.isIdentifierStart=function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)},kt.prototype.isValidIdentifierStart=function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t},kt.prototype.isIdentifierContinue=function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)},kt.prototype.isValidIdentifierContinue=function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)},kt.prototype.codePointAt=function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888},kt.prototype.peekMultichar=function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),i=e.charCodeAt(0);return n>=55296&&n<=56319&&i>=56320&&i<=57343?t+e:t},kt.prototype.isExpOperator=function(t){return"-"===t||"+"===t||this.isNumber(t)},kt.prototype.throwError=function(t,e,n){n=n||this.index;var i=w(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw new Error("Lexer Error: "+t+" at column"+i+" in expression ["+this.text+"].")},kt.prototype.readNumber=function(){for(var t="",e=this.index;this.index<this.text.length;){var n=v(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"===n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},kt.prototype.readIdent=function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},kt.prototype.readString=function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,r){if("u"===o){var s=this.text.substring(this.index+1,this.index+5);s.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+s+"]"),this.index+=4,n+=String.fromCharCode(parseInt(s,16))}else{n+=wt[o]||o}r=!1}else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)};var $t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},xt={};function Et(t){this.type=t,this.childNodes=[]}function Ot(){Ot.super.call(this,xt.Program)}function Ct(){Ct.super.call(this,xt.ExpressionStatement)}function St(t,e,n){St.super.call(this,xt.AssignmentExpression),this.left=t,this.right=e,this.operator=n}function jt(t,e,n){jt.super.call(this,xt.ConditionalExpression),this.test=t,this.alternate=e,this.consequent=n}function _t(t,e,n){_t.super.call(this,xt.LogicalExpression),this.operator=t,this.left=e,this.right=n}function Pt(t,e,n){Pt.super.call(this,xt.BinaryExpression),this.operator=t,this.left=e,this.right=n}function Tt(t,e){Tt.super.call(this,xt.UnaryExpression),this.prefix=!0,this.operator=t,this.arg=e}function Nt(t){Nt.super.call(this,xt.Literal),this.value=t}function At(t,e){At.super.call(this,xt.CallExpression),this.callee=t,this.args=e,this.filter=!1}function Dt(t,e,n){Dt.super.call(this,xt.MemberExpression),this.object=t,this.property=e,this.computed=n,this.allowNull=!1}function It(t){It.super.call(this,xt.Identifier),this.name=t,this.allowNull=!1}function Mt(){Mt.super.call(this,xt.ArrayExpression)}function Vt(){Vt.super.call(this,xt.Property),this.kind="init",this.key=null,this.value=null,this.computed=!1}function Lt(t){Lt.super.call(this,xt.ObjectExpression),this.properties=t}function Rt(t,e){this.lexer=t,this.options=e}function Ut(t){Ut.super.call(this,t)}function qt(t,e){qt.super.call(this,t,e)}xt.Program="Program",xt.ExpressionStatement="ExpressionStatement",xt.AssignmentExpression="AssignmentExpression",xt.ConditionalExpression="ConditionalExpression",xt.LogicalExpression="LogicalExpression",xt.BinaryExpression="BinaryExpression",xt.UnaryExpression="UnaryExpression",xt.CallExpression="CallExpression",xt.MemberExpression="MemberExpression",xt.Identifier="Identifier",xt.Literal="Literal",xt.ArrayExpression="ArrayExpression",xt.Property="Property",xt.ObjectExpression="ObjectExpression",Et.prototype.appendChild=function(t){this.childNodes.push(t)},Et.prototype.compute=function(t,e,n){return this.childNodes.map((function(i){return i.compute(t,e||{},n)}))},Et.prototype.hasCC=function(){return this.childNodes.some((function(t){return t.hasCC()}))},d(Ot,Et),Ot.prototype.compute=function(t,e){var n=this.childNodes[0].compute(t,e||{});return n instanceof $t?null:n},Ot.prototype.getMemberExpression=function(){return this.childNodes[0].getMemberExpression()},d(Ct,Et),Ct.prototype.compute=function(t,e,n){return this.childNodes[0].compute(t,e||{},n)},Ct.prototype.getMemberExpression=function(){var t=this.childNodes[0];return t instanceof Dt?t:null},d(St,Et),St.prototype.compute=function(t,e){var n=this.left.compute(t,e,{assignmentLeft:!0}),i=this.right.compute(t,e);n.obj[n.prop]=i},d(jt,Et),jt.prototype.compute=function(t,e){return this.test.compute(t,e)?this.alternate.compute(t,e):this.consequent.compute(t,e)},jt.prototype.hasCC=function(){return!0},d(_t,Et),_t.prototype.compute=function(t,e){var n,i=this.left.compute(t,e),r=this.right.compute(t,e);switch(this.operator){case"&&":case"||":n=i&&r}return n},d(Pt,Et),Pt.prototype.compute=function(t,e){var n,i=this.left.compute(t,e),r=this.right.compute(t,e);switch(this.operator){case"+":n=i+r;break;case"-":n=i-r;break;case"*":n=i*r;break;case"/":n=i/r;break;case"%":n=i%r;break;case"<":n=i<r;break;case">":n=i>r;break;case"<=":n=i<=r;break;case">=":n=i>=r;break;case"==":n=i==r;break;case"!=":n=i!=r;break;case"===":n=i===r;break;case"!==":n=i!==r}return n},d(Tt,Et),Tt.prototype.compute=function(t,e){var n,i=this.arg.compute(t,e);switch(this.operator){case"+":n=i;break;case"-":n=-i;break;case"!":n=!i}return n},d(Nt,Et),Nt.prototype.compute=function(){return this.value},Nt.prototype.toText=function(){return this.value},d(At,Et),At.prototype.compute=function(t,e){var n=this.callee.compute(t,e,{callee:!0}),i=this.args.map((function(n){return n.compute(t,e)}));if(this.filter){var r=e.createFilter(n.prop);if($n(r))return r.$execute.apply(r,i);throw new Error('Filter "'+n.prop+'" is not defined')}var o=n.obj[n.prop];if(S(o))return o.apply(n.obj,i);throw new Error(n.prop+" is not a function")},At.prototype.hasCC=function(){return!this.filter},d(Dt,Et),Dt.prototype.compute=function(t,e,n){var i=this.object.compute(t,e);if(null==i&&this.object.allowNull&&(i=new $t),this.computed){var r=this.property.compute(t,e,n);return k(e.members)&&e.members.push({target:i,targetKey:this.object.toText(),key:r}),i[r]}return this.property.compute(i,e,n,this.object)},Dt.prototype.toText=function(){return this.object.toText()+"."+this.property.toText()},d(It,Et),It.prototype.compute=function(t,e,n,i){if(n){if(n.assignmentLeft||n.callee)return{obj:t,prop:this.name};if(n.propertyKey)return this.name}var r=t[this.name];return k(e.members)&&e.members.push({target:t,targetKey:null!=i?i.toText():null,key:this.name}),null==r&&e.locals&&(r=e.locals[this.name]),r},It.prototype.toText=function(){return this.name},d(Mt,Et),d(Vt,Et),Vt.prototype.compute=function(t,e){return{key:this.key.compute(t,e,{propertyKey:!0}),value:this.value.compute(t,e)}},d(Lt,Et),Lt.prototype.compute=function(t,e){var n={};return this.properties.forEach((function(i){var r=i.compute(t,e);n[r.key]=r.value})),n},Rt.prototype.throwError=function(t,e){throw new Error("Syntax Error: Token '"+e.text+"'"+t+" at column "+(e.index+1)+" of the expression ["+this.text+"] starting at ["+this.text.substring(e.index)+"].")},Rt.prototype.parse=function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e},Rt.prototype.program=function(){for(var t=new Ot;;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.appendChild(this.expressionStatement()),!this.expect(";"))return t},Rt.prototype.expressionStatement=function(){var t=new Ct;return t.appendChild(this.filterChain()),t},Rt.prototype.filterChain=function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},Rt.prototype.expression=function(){return this.assignment()},Rt.prototype.assignment=function(){var t,e=this.ternary();if(this.expect("=")){if((t=e).type!==xt.Identifier&&t.type!==xt.MemberExpression)throw new Error("Trying to assign a value to a non l-value");e=new St(e,this.assignment(),"=")}return e},Rt.prototype.ternary=function(){var t,e=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?new jt(e,t,this.expression()):e},Rt.prototype.logicalOR=function(){for(var t=this.logicalAND();this.expect("||");)t=new _t("||",t,this.logicalAND());return t},Rt.prototype.logicalAND=function(){for(var t=this.equality();this.expect("&&");)t=new _t("&&",t,this.equality());return t},Rt.prototype.equality=function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=new Pt(t.text,e,this.relational());return e},Rt.prototype.relational=function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=new Pt(t.text,e,this.additive());return e},Rt.prototype.additive=function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=new Pt(t.text,e,this.multiplicative());return e},Rt.prototype.multiplicative=function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=new Pt(t.text,e,this.unary());return e},Rt.prototype.unary=function(){var t;return(t=this.expect("+","-","!"))?new Tt(t.text,this.unary()):this.primary()},Rt.prototype.primary=function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.options.literals.hasOwnProperty(this.peek().text)?t=new Nt(this.options.literals[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());this.peek("(","[",".")||this.peek("?")&&this.peekAhead(1,".");)this.expect("?")&&(t.allowNull=!0),"("===(e=this.expect("(","[",".")).text?(t=new At(t,this.parseArguments()),this.consume(")")):"["===e.text?(t=new Dt(t,this.expression(),!0),this.consume("]")):"."===e.text?t=new Dt(t,this.identifier(),!1):this.throwError("IMPOSSIBLE");return t},Rt.prototype.filter=function(t){for(var e=[t],n=[this.identifier()];this.expect(".");)n.push(this.identifier());var i=new At(new It(n.map((function(t){return t.name})).join(".")),e);for(i.filter=!0;this.expect(":");)e.push(this.expression());return i},Rt.prototype.parseArguments=function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t},Rt.prototype.identifier=function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),new It(t.text)},Rt.prototype.constant=function(){return new Nt(this.consume().value)},Rt.prototype.arrayDeclaration=function(){var t=new Mt;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.appendChild(this.expression())}while(this.expect(","));return this.consume("]"),t},Rt.prototype.object=function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t=new Vt,this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),new Lt(e)},Rt.prototype.consume=function(t){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},Rt.prototype.peekToken=function(){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);return this.tokens[0]},Rt.prototype.peek=function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},Rt.prototype.peekAhead=function(t,e,n,i,r){if(this.tokens.length>t){var o=this.tokens[t],s=o.text;if(s===e||s===n||s===i||s===r||!e&&!n&&!i&&!r)return o}return!1},Rt.prototype.expect=function(t,e,n,i){var r=this.peek(t,e,n,i);return!!r&&(this.tokens.shift(),r)},d(Ut,kt),Ut.prototype.isValidIdentifierStart=function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t||"@"===t||":"===t||"*"===t},Ut.prototype.isValidIdentifierContinue=function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)||"-"===t||"."===t},Ut.prototype.expectString=function(t){var e=t.length;return this.index+e<=this.text.length&&t===this.text.substr(this.index,e)},Ut.prototype.readComment=function(t,e){var n=this.index;this.index+=t.length;for(var i="",r=t;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,this.expectString(e))return r+=e,this.index+=e.length,void this.tokens.push({index:n,text:r,comment:!0,value:i});i+=o,this.index++}this.throwError("Unterminated comment",n)},Ut.prototype.readText=function(){for(var t=this.index,e="";this.index<this.text.length;){var n=this.text.charAt(this.index),i=this.peek();if("<"===n&&(this.isIdentifierStart(i)||"/"===i)||this.expectString("\x3c!--"))break;e+=n,this.index++}this.tokens.push({index:t,text:e,textTag:!0})},Ut.prototype.readTag=function(t,e,n,i){for(this.tokens.push({index:this.index,text:t,tag:!0,closing:n,begin:!0,doctype:i}),this.index+=t.length,this.readIdent();this.index<this.text.length;){var r=this.text.charAt(this.index);if(!n){var o=r+this.peek();if(o==="/"+e){this.tokens.push({index:this.index,text:o,tag:!0,closing:!0,end:!0}),this.index+=o.length;break}}if(r===e){this.tokens.push({index:this.index,text:e,tag:!0,closing:!!i||n,end:!0}),this.index+=e.length;break}this.isIdentifierStart(this.peekMultichar())?this.readIdent():'"'===r||"'"===r?this.readString(r):this.isWhitespace(r)?this.index++:"="===r?(this.tokens.push({index:this.index,text:"=",equal:!0}),this.index++):this.throwError("Unexpected next character ",this.index,this.index+1)}},Ut.prototype.lex=function(t){this.text=t,this.index=0,this.tokens=[];for(var e=!!this.options.allowDocType;this.index<this.text.length;){var n=this.text.charAt(this.index),i=this.peek(),r=this.peek(2);this.expectString("\x3c!--")?this.readComment("\x3c!--","--\x3e"):"<"===n&&this.isIdentifierStart(i)?this.readTag("<",">",!1):this.expectString("</")&&this.isIdentifierStart(r)?this.readTag("</",">",!0):this.expectString("<!DOCTYPE")?e?this.readTag("<!",">",!0,!0):this.throwError("DOCTYPE is not allowed",this.index,this.index+1):this.readText()}return this.tokens},d(qt,Rt),qt.prototype.parse=function(t){this.index=0,this.text=t,this.tokens=this.lexer.lex(t);for(var e,n=new De,i=!!this.options.allowDocType;this.index<this.tokens.length;){var r=this.current();if(r.doctype)i?e?this.throwError("DOCTYPE only allow one",r):(e=this.doctype(),n.$pushChild(e)):this.throwError("DOCTYPE is not allowed",r);else if(r.comment){var o=new fe;o.nodeValue=r.text,n.$pushChild(o),this.next()}else if(r.textTag){(t=new Ue).nodeValue=r.text,n.$pushChild(t),this.next()}else r.tag&&r.begin?n.$pushChild(this.element()):this.throwError("impossible",r)}return n.$buildSibling(),n.childNodes},qt.prototype.doctype=function(){this.next();var t=new $e,e=this.current();return e.identifier?t.nodeValue=e.text:this.throwError(" Unexpected ",e),this.attrs(t).forEach((function(e){t.childNodes.push(e)})),(e=this.current()).tag&&e.end&&e.closing?this.next():this.throwError(" Unexpected ",e),t},qt.prototype.element=function(t){this.next();var e=new _e,n=this.current();if(n.identifier?(e.nodeName=n.text,this.next()):this.throwError(" Unexpected ",n),this.attrs(e).forEach((function(t){e.$pushAttribute(t)})),(n=this.current()).tag&&n.end){if(this.next(),"input"===e.nodeName)return e.selfClosed=!0,e;n.closing||this.childElements(e).forEach((function(t){e.$pushChild(t)}))}else this.throwError(" Unexpected ",n);return(n=this.current()).tag&&n.begin&&n.closing?(this.next(),(n=this.current()).identifier&&e.nodeName===n.text?(this.next(),(n=this.current()).tag&&n.end&&n.closing?this.next():this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n),e},qt.prototype.childElements=function(t){for(var e=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.closing)break;if(n.comment){var i=new fe;i.nodeValue=n.text,e.push(i),this.next()}else if(n.textTag){var r=new Ue;r.nodeValue=n.text,e.push(r),this.next()}else n.tag&&n.begin?e.push(this.element(t)):this.throwError(" Unexpected ",n)}return e},qt.prototype.attrs=function(t){for(var e=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.end)break;var i=new oe;n.identifier&&(i.nodeName=n.text,i.origin=n.text,this.next(),(n=this.current()).equal&&(this.next(),(n=this.current()).constant?(i.nodeValue=n.value,this.next()):this.throwError(" Unexpected ",n))),e.push(i)}return e},qt.prototype.current=function(){return this.index<this.tokens.length?this.tokens[this.index]:{}},qt.prototype.next=function(){this.index++};var Ft={isIdentifierContinue:!1,isIdentifierStart:!1,literals:{false:!1,null:null,true:!0,undefined:void 0}};function Wt(t){return new qt(new Ut(Ft),Ft).parse(t)}function Bt(t,e){var n=h({getEmbedTpl:function(){return""},containsComponent:function(){return!1},createComponent:function(){return null},containsDirective:function(){return!1},createDirective:function(){return null}},e),i=Wt(t);return i.forEach((function(t){t.compile(n)})),i.forEach((function(t){t.notifyCompiled(n)})),function(t){var e=document.createDocumentFragment();return t.$$childElements=i,i.forEach((function(n){e.appendChild(n.link(t))})),i.forEach((function(t){t.notifyLinked()})),e}}function Ht(t,e,n){return(n=n||{}).createFilter=function(t){return injector.createFilter(t)},n.collectMembers&&(n.members=[]),Kt(t).compute(e,n)}function Kt(t){if(null!=t&&0!==(t=t.trim()).length)return t=t.replace("&gt;",">").replace("&lt;","<"),new Rt(new kt(Ft),Ft).parse(t)}function zt(t,e,n){var i=Kt(t).getMemberExpression();if(null==i)throw new Error(t+"is not valid member expression");return(n=n||{}).createFilter=function(t){return injector.createFilter(t)},{obj:i.object.compute(e,n,{},e),prop:i.property.compute(e,n,{},e)}}function Yt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zt(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gt(t,e,n){return e&&Zt(t.prototype,e),n&&Zt(t,n),t}var Xt=function(){function t(e){Yt(this,t),this.text=e,this.value=null,this.oldValue=null}return Gt(t,[{key:"compute",value:function(t,e){this.oldValue=this.value,this.value=Ht(this.text,t,e)}},{key:"detect",value:function(){return this.value!==this.oldValue}},{key:"destroy",value:function(){this.value=null,this.oldValue=null}}]),t}(),Jt=function(){function t(){Yt(this,t),this.scope=null,this.text="",this.isExp=!1,this.segments=[],this.rightStr="",this.output=!1,this.value=null,this.oldValue=null,this.unwatches=[],this.change=new ct}return Gt(t,[{key:"setScope",value:function(t){this.scope=t}},{key:"setOutput",value:function(t){this.output=t}},{key:"bind",value:function(t,e){if(null!=t)if(this.text=t,this.isExp=e,e)this.segments.push({exp:new Xt(t),leftStr:""});else{for(var n=/{{([^}]*)}}/g,i=n.lastIndex,r=n.exec(t);null!=r;)this.segments.push({index:r.index,exp:new Xt(r[1]),leftStr:t.substring(i,r.index)}),i=n.lastIndex,r=n.exec(t);this.segments.length>0&&i<t.length&&(this.rightStr=t.substring(i))}}},{key:"compute",value:function(t){var e=this;if(t=t||{},this.oldValue=this.value,0===this.segments.length)this.value=this.text;else if(this.isExp&&1===this.segments.length)this.segments[0].exp.compute(e.scope,t),this.value=this.segments[0].exp.value;else{var n="";this.segments.forEach((function(i){i.exp.compute(e.scope,t),n+=i.leftStr+i.exp.value})),this.value=n+this.rightStr}return this.value}},{key:"assign",value:function(t){var e=zt(this.text,this.scope);null!=e.obj&&null!=e.prop&&(e.obj.toProxy()[e.prop]=t)}},{key:"listen",value:function(){var t=this;this.unwatches=this.segments.map((function(e){return t.scope.$watch(e.exp.text,(function(){t.defer((function(){t.detect()&&t.change.fire()}))}))}))}},{key:"defer",value:function(t){var e=this;this.cancelTimeout(),this.timeoutId=setTimeout((function(){e.timeoutId=null,t.call(e)}))}},{key:"cancelTimeout",value:function(){null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"observe",value:function(t){if(!this.output)return this.listen(),this.change.on(t),function(){this.change.off(t)}}},{key:"detect",value:function(){return!this.output&&(this.compute(),this.value!==this.oldValue)}},{key:"destroy",value:function(){this.cancelTimeout(),this.unwatches.forEach((function(t){t.call()})),this.segments.forEach((function(t){t.exp.destroy()})),this.segments=null,this.scope=null,this.value=null,this.oldValue=null}}]),t}();function Qt(t){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ee(t,e){return!e||"object"!==Qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ne(t){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ie(t,e){return(ie=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re="load unload change submit reset select blur focus abort keydown keypress keyup click dblclick mousedown mousemove mouseout mouseover mouseup".split(" "),oe=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ee(this,ne(e).call(this,vt.attribute,t,n))).quote='"',i.origin=t,i.isEvent=!1,i.isBinding=!1,i.isDomEvent=!1,i.isDirective=!1,i.directive=null,i.ownerElement=null,i.ownerComponent=null,i.htmlElement=null,i.binding=new Jt,i.priority=0,i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ie(t,e)}(e,t),n=e,(i=[{key:"belongTo",value:function(t){return this.origin===t}},{key:"setValue",value:function(t){this.nodeValue=t,this.compile(this.options)}},{key:"observe",value:function(t){this.binding.observe(t)}},{key:"compile",value:function(t){if(this.isEvent=this.nodeName.startsWith("@"),this.isBinding=this.nodeName.startsWith(":"),this.isDirective=this.nodeName.startsWith("*"),(this.isEvent||this.isBinding||this.isDirective)&&(this.nodeName=this.nodeName.substr(1)),this.isDomEvent=A(re,this.nodeName),this.binding.setOutput(this.isEvent),this.binding.bind(this.nodeValue,this.isEvent||this.isBinding||this.isDirective),this.isDirective){if(!t.containsDirective(this.nodeName))throw new Error("directive "+this.nodeName+" is not defined");this.directive=t.createDirective(this.nodeName),this.directive.$bindNode(this),this.binding.setOutput(this.directive.$output),this.priority=this.directive.$priority}}},{key:"notifyCompiled",value:function(t){null!=this.directive&&this.directive.$compile(t)}},{key:"link",value:function(t,e,n){var i=this;this.scope=t,this.htmlElement=e,this.ownerComponent=n,this.binding.setScope(t),this.isEvent?this.isDomEvent?this.htmlElement.addEventListener(this.nodeName,(function(t){i.binding.compute({locals:{$event:t,$args:null,$element:i.htmlElement}})})):null!=n&&n.$listen(this.nodeName,(function(t,e){i.binding.compute({locals:{$event:t,$args:e,$element:i.htmlElement}})})):(this.directive?(t.$$childDirectives.push(this.directive),this.directive.$setBinding(this.binding)):null!=n&&n.$hasAttr(this.nodeName)?n.$initAttr(this.nodeName,this.binding.compute()):this.nodeName.startsWith("style")?V(this.htmlElement,this.nodeName,this.binding.compute()):this.htmlElement.setAttribute(this.nodeName,this.binding.compute()),this.observe((function(){i.update()})))}},{key:"detect",value:function(){null==this.directive?this.hasChange()&&this.update():this.directive.$detect()}},{key:"hasChange",value:function(){return this.binding.detect()}},{key:"update",value:function(){null!=this.directive?this.directive.$update():null!=this.ownerComponent&&this.ownerComponent.$hasAttr(this.nodeName)?this.ownerComponent.$setAttr(this.nodeName,this.binding.value):this.nodeName.startsWith("style")?V(this.htmlElement,this.nodeName,this.binding.value):(this.htmlElement.setAttribute(this.nodeName,this.binding.value),"INPUT"===this.htmlElement.nodeName&&"value"===this.nodeName&&(this.htmlElement.value=this.binding.value))}},{key:"notifyLinked",value:function(){this.directive&&this.directive.$insert()}},{key:"getDirective",value:function(t){return null==t?this.directive:null!=this.directive&&this.directive.$$meta.selector===t?this.directive:null}},{key:"getOuterTpl",value:function(){return this.origin+(null==this.nodeValue?"":"="+this.quote+this.nodeValue+this.quote)}},{key:"getInnerTpl",value:function(){return this.origin+(null==this.nodeValue?"":"="+this.quote+this.nodeValue+this.quote)}},{key:"dispose",value:function(t){t&&(this.directive=null),this.binding.destroy(),this.binding=null,this.ownerElement=null,this.ownerComponent=null,this.htmlElement=null,this.$destroy()}},{key:"destroy",value:function(){null!=this.directive&&(this.directive.$dispose(!0),this.directive=null),this.dispose()}}])&&te(n.prototype,i),r&&te(n,r),e}(bt);function se(t){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ce(t,e){return!e||"object"!==se(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function le(t,e){return(le=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ce(this,ae(e).call(this,vt.comment,"#comment"))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&le(t,e)}(e,t),n=e,(i=[{key:"link",value:function(){return document.createComment(this.nodeValue)}},{key:"getOuterTpl",value:function(){return this.nodeValue}},{key:"getInnerTpl",value:function(){return this.nodeValue}}])&&ue(n.prototype,i),r&&ue(n,r),e}(bt);function he(t){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ye(t,e){return!e||"object"!==he(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function me(t){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function de(t,e){return(de=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ve=function(t){function e(t,n){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ye(this,me(e).call(this,vt.connection,t))).linker=n,i}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&de(t,e)}(e,t),n=e,(i=[{key:"link",value:function(t){return this.scope=t,this.linker.call(this,t)}},{key:"notifyLinked",value:function(){if(S(this.onInsert))return this.onInsert.call(this)}},{key:"detect",value:function(){if(S(this.onDetect))return this.onDetect.call(this)}},{key:"hasChange",value:function(){if(S(this.onHasChange))return this.onHasChange.call(this)}},{key:"update",value:function(){if(S(this.onUpdate))return this.onUpdate.call(this)}},{key:"destroy",value:function(){if(S(this.onDestroy))return this.onDestroy.call(this);this.$destroy()}}])&&pe(n.prototype,i),r&&pe(n,r),e}(bt);function be(t){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ge(t,e){return!e||"object"!==be(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function we(t){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ke(t,e){return(ke=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ge(this,we(e).call(this,vt.documentType))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ke(t,e)}(e,t),e}(bt);function xe(t){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ee(t,e){return!e||"object"!==xe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oe(t){return(Oe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Se(t,e,n){return e&&Ce(t.prototype,e),n&&Ce(t,n),t}function je(t,e){return(je=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var _e=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ee(this,Oe(e).call(this,vt.element,name))).attributes=[],t.htmlElement=null,t.component=null,t.selfClosed=!1,t.compileOptions=null,t.isComponent=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&je(t,e)}(e,t),Se(e,[{key:"parentElement",get:function(){return this.parentNode}}]),Se(e,[{key:"$pushAttribute",value:function(t){t.ownerElement=this,this.attributes.push(t)}},{key:"hasAttributes",value:function(){return 0!==this.attributes.length}},{key:"getAttribute",value:function(t){var e=this.attributes.filter((function(e){return e.belongTo(t)}));return e.length?e[0]:null}},{key:"setAttribute",value:function(t,e){var n,i=this.attributes.filter((function(e){return e.belongTo(t)}));return i.length>0?(n=i[0]).setValue(e):((n=new oe(t,e)).ownerElement=this,n.compile(this.compileOptions)),this.attributes.push(n),n}},{key:"removeAttribute",value:function(t){var e=[],n=this;if(t instanceof oe){var i=this.attributes.indexOf(t);-1!==i&&(e=n.attributes.splice(i,1))}else this.attributes.filter((function(e){return e.belongTo(t)})).forEach((function(t){var i=n.attributes.indexOf(t);t.destroy(),e=n.attributes.splice(i,1)}));return e.length>0?e[0]:null}},{key:"appendAttribute",value:function(t){if(null!=t.ownerElement)throw new Error("Current attribute is not new!");return t.ownerElement=this,t.compile(this.compileOptions),this.attributes.push(t),t}},{key:"observe",value:function(t,e){var n=this.attributes.filter((function(e){return e.belongTo(t)}));if(n.length)return n[0].observe(e)}},{key:"getOuterTpl",value:function(){var t="",e="";this.attributes.forEach((function(e){t+=" ",t+=e.getOuterTpl()})),this.childNodes.forEach((function(t){e+=t.getOuterTpl()}));var n="<"+this.nodeName+t+">"+e;return this.selfClosed||(n+="</"+this.nodeName+">"),n}},{key:"getInnerTpl",value:function(){var t="";return this.childNodes.forEach((function(e){t+=e.getOuterTpl()})),t}},{key:"setOuterTpl",value:function(t){var e=this;Wt(t).forEach((function(t){t.parentNode=null,e.parentNode.insertBefore(e,t)})),e.parentNode.removeChild(e)}},{key:"setInnerTpl",value:function(t){var e=this;this.clearChildNodes(),Wt(t).forEach((function(t){t.parentNode=null,e.appendChild(t)}))}},{key:"getDirective",value:function(t){var e=null;return this.attributes.some((function(n){return null!=(e=n.getDirective(t))})),e}},{key:"getDirectives",value:function(){return this.attributes.map((function(t){return t.getDirective()})).filter((function(t){return null!=t}))}},{key:"compile",value:function(t){this.compileOptions=t,this.attributes.forEach((function(e){e.compile(t)})),this.attributes=R(this.attributes,(function(t){return t.priority})),this.isComponent=t.containsComponent(this.nodeName),this.isComponent||this.childNodes.forEach((function(e){e.compile(t)}))}},{key:"notifyCompiled",value:function(t){this.attributes.forEach((function(e){e.notifyCompiled(t)})),null==this.component&&this.childNodes.forEach((function(e){e.notifyCompiled(t)}))}},{key:"link",value:function(t){var e=this;return e.scope=t,e.htmlElement=document.createElement(e.nodeName),this.isComponent?(this.component=t.$createChildCmp(this.nodeName),this.component.$bindNode(this),e.attributes.forEach((function(n){n.link(t,e.htmlElement,e.component)})),e.component.$initAttrDone(),e.component.$mount(e.htmlElement)):(this.attributes.forEach((function(n){n.link(t,e.htmlElement)})),e.childNodes.forEach((function(n){e.htmlElement.appendChild(n.link(t))}))),e.htmlElement}},{key:"notifyLinked",value:function(){this.attributes.forEach((function(t){t.notifyLinked()})),null==this.component&&this.childNodes.forEach((function(t){t.notifyLinked()}))}},{key:"detect",value:function(){this.attributes.forEach((function(t){t.detect()})),null==this.component&&this.childNodes.forEach((function(t){t.detect()}))}},{key:"dispose",value:function(t){null==this.component?this.childNodes.forEach((function(t){t.destroy()})):t&&(this.component=null),this.attributes.forEach((function(t){t.destroy()})),this.attributes.length=0,this.removeHtmlElement(),this.compileOptions=null,this.$destroy()}},{key:"destroy",value:function(){null!=this.component&&(this.component.$dispose(!0),this.component=null),this.dispose()}},{key:"getHtmlElement",value:function(){return this.htmlElement}},{key:"removeHtmlElement",value:function(){null!=this.htmlElement&&K(this.htmlElement)}},{key:"createElement",value:function(t){return new e(t)}},{key:"createAttr",value:function(t){return new oe(t)}},{key:"createConnection",value:function(t,e){return new ve(t,e)}}]),e}(bt);function Pe(t){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Te(t,e){return!e||"object"!==Pe(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ne(t){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ae(t,e){return(Ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var De=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,Ne(e).call(this,vt.documentFragment,"#document-fragment"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ae(t,e)}(e,t),e}(bt);function Ie(t){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Me(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ve(t,e){return!e||"object"!==Ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Le(t){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Re(t,e){return(Re=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ue=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ve(this,Le(e).call(this,vt.text,"#text"))).binding=new Jt,t.htmlElement=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Re(t,e)}(e,t),n=e,(i=[{key:"compile",value:function(){this.binding.bind(this.nodeValue)}},{key:"link",value:function(t){var e=this;return this.binding.setScope(t),this.binding.observe((function(){e.update()})),this.render(this.binding.compute())}},{key:"hasChange",value:function(){return this.binding.detect()}},{key:"update",value:function(){H(this.htmlElement,this.render(this.binding.value))}},{key:"render",value:function(t){return this.htmlElement=document.createTextNode(t),this.htmlElement}},{key:"getOuterTpl",value:function(){return this.nodeValue}},{key:"getInnerTpl",value:function(){return this.nodeValue}},{key:"removeHtmlElement",value:function(){null!=this.htmlElement&&K(this.htmlElement)}},{key:"destroy",value:function(){this.binding.destroy(),this.binding=null,this.htmlElement=null,this.$destroy()}}])&&Me(n.prototype,i),r&&Me(n,r),e}(bt);function qe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function We(t,e,n){return e&&Fe(t.prototype,e),n&&Fe(t,n),t}var Be=new ct,He=new ct;var Ke=function(){function t(){qe(this,t)}return We(t,[{key:"set",value:function(t,e,n){var i=t[e];if(i!==n||k(t)&&"length"===e){var r={valid:!0,apply:!0,oldValue:i,newValue:n};Be.fire({target:t,key:e,data:r}),r.apply&&(t[e]=n,He.fire({target:t,key:e,data:{oldValue:i,newValue:n}}))}return!0}}]),t}();function ze(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ye(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ze(t,e,n){return e&&Ye(t.prototype,e),n&&Ye(t,n),t}var Ge=function(){function t(){ze(this,t),this.plainMap=new Map,this.regexMap=new Map}return Ze(t,[{key:"on",value:function(t,e,n){var i=this,r=j(t)?this.regexMap:this.plainMap;return r.has(t)||r.set(t,[]),n&&(e.beforeChanged=n.beforeChanged),r.get(t).push(e),function(){i.off(t,e)}}},{key:"off",value:function(t,e){var n=j(t)?this.regexMap:this.plainMap;if(n.has(t)){var i=n.get(t),r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},{key:"fireChanged",value:function(t,e){var n=this;this.plainMap.has(t)&&this.plainMap.get(t).forEach((function(i){i.beforeChanged||i.call(n,t,e)})),this.regexMap.forEach((function(i,r){r.test(t)&&i.forEach((function(i){i.beforeChanged||i.call(n,t,e)}))}))}},{key:"fireChanging",value:function(t,e){var n=this;this.plainMap.has(t)&&this.plainMap.get(t).forEach((function(i){i.beforeChanged&&i.call(n,t,e)})),this.regexMap.forEach((function(i,r){r.test(t)&&i.forEach((function(i){i.beforeChanged&&i.call(n,t,e)}))}))}},{key:"destroy",value:function(){this.plainMap.clear(),this.regexMap.clear()}}]),t}(),Xe=function(){function t(){ze(this,t);var e=this,n=function(t){var n=t.target,i=t.key;e.fireChanging(n,i,t.data)},i=function(t){var n=t.target,i=t.key;e.fireChanged(n,i,t.data)};Be.on(n),He.on(i),this.offChange=function(){Be.off(n),He.off(i)},this.objMap=new Map}return Ze(t,[{key:"on",value:function(t,e,n,i){return this.objMap.has(t)||this.objMap.set(t,new Ge),this.objMap.get(t).on(e,n,i)}},{key:"off",value:function(t,e,n){this.objMap.has(t)&&this.objMap.get(t).off(e,n)}},{key:"fireChanged",value:function(t,e,n){this.objMap.has(t)&&this.objMap.get(t).fireChanged(e,n)}},{key:"fireChanging",value:function(t,e,n){this.objMap.has(t)&&this.objMap.get(t).fireChanging(e,n)}},{key:"destroy",value:function(){this.offChange.call(this),this.objMap.forEach((function(t){t.destroy()})),this.objMap=null}}]),t}(),Je=function(){function t(e,n,i,r){ze(this,t),this.scope=e,this.target=n,this.key=i,this.targetKey=r,this.observer=null,this.action=null,this.unwatch=null,this.options=null,this.id=r?r+"."+i:i}return Ze(t,[{key:"start",value:function(t,e,n){this.observer=t,this.action=e,this.options=n,this.unwatch=this.observer.on(this.target,this.key,this.action,this.options)}},{key:"stop",value:function(){null!=this.unwatch&&this.unwatch.call()}},{key:"update",value:function(t){if(null!=this.targetKey&&this.targetKey.startsWith(t)){var e=Ht(this.targetKey,this.scope);e!==this.target&&(this.stop(),this.target=e,this.unwatch=this.observer.on(this.target,this.key,this.action,this.options))}}},{key:"destroy",value:function(){this.stop(),this.scope=null,this.target=null,this.observer=null,this.action=null,this.unwatch=null}}]),t}(),Qe=new(function(){function t(){ze(this,t);var e=this;this.queue=[],this.timeoutId=null,this.digest=function(){e.defer((function(){e.queue.forEach((function(t){t.call(e)}))}))}}return Ze(t,[{key:"defer",value:function(t){var e=this;this.clearDefer(),this.timeoutId=setTimeout((function(){this.timeoutId=null,t.call(e)}))}},{key:"clearDefer",value:function(){null!=this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}},{key:"execute",value:function(){He.on(this.digest)}},{key:"apply",value:function(t){this.queue.push(t)}},{key:"remove",value:function(t){var e=this.queue.indexOf(t);-1!==e&&this.queue.splice(e,1)}},{key:"destroy",value:function(){He.off(this.digest),this.clearDefer(),this.queue=[]}}]),t}());Qe.execute();var tn=function(){function t(e,n){ze(this,t);var i=this;this.scope=e,this.exp=n,this.value=null,this.unwatch=null,this.detect=function(){var t=i.value,e=Ht(i.exp,i.scope);e!==t&&(i.value=e,i.action.call(i,{oldValue:t,newValue:e}))}}return Ze(t,[{key:"start",value:function(t){var e=this;this.action=t,this.value=Ht(this.exp,this.scope),Qe.apply(e.detect),this.unwatch=function(){Qe.remove(e.detect)}}},{key:"stop",value:function(){null!=this.unwatch&&(this.unwatch.call(),this.action=null)}},{key:"destroy",value:function(){this.stop(),this.scope=null,this.unwatch=null}}]),t}(),en=function(){function t(e,n){ze(this,t),this.scope=e,this.exp=n,this.observer=null,this.action=null,this.members={},this.digests=[],this.options=null}return Ze(t,[{key:"parse",value:function(){if("*"===this.exp&&(this.exp=/.+/i),j(this.exp))return[{target:this.scope,key:this.exp}];if(Kt(this.exp).hasCC())return[{dirtyCheck:!0,key:this.exp}];var t={collectMembers:!0};return Ht(this.exp,this.scope,t),t.members}},{key:"start",value:function(t,e,n){this.observer=t,this.action=e,this.options=n,this.updateMember()}},{key:"updateMember",value:function(){var t=this;this.parse().forEach((function(e){if(e.dirtyCheck){var n=new tn(t.scope,e.key);t.digests.push(n),t.startDigest(n)}else{var i=new Je(t.scope,e.target,e.key,e.targetKey);t.members[i.id]||(t.members[i.id]=i,t.startMember(i))}}))}},{key:"startDigest",value:function(t){var e=this;t.start((function(t){e.action.call(this,t)}),this.options)}},{key:"startMember",value:function(t){var e=this;t.start(e.observer,(function(n,i){var r=n;null!=t.targetKey&&(r=t.targetKey+"."+n),c(e.members,(function(t,e){t.update(r)})),e.action.call(this,n,i)}),this.options)}},{key:"destroy",value:function(){c(this.members,(function(t,e){t.destroy()})),this.digests.forEach((function(t){t.destroy()})),this.scope=null,this.observer=null,this.action=null,this.members=null,this.digests=null}}]),t}(),nn=function(){function t(){ze(this,t),this.observer=new Xe,this.watchers=[]}return Ze(t,[{key:"watch",value:function(t,e,n){var i=this,r=this.createWatcher(t,e);return r.start(this.observer,n),function(){r.destroy(),i.removeWatcher(r)}}},{key:"validate",value:function(t,e,n){var i=this,r=this.createWatcher(t,e);return r.start(this.observer,n,{beforeChanged:!0}),function(){r.destroy(),i.removeWatcher(r)}}},{key:"createWatcher",value:function(t,e){var n=new en(t,e);return this.watchers.push(n),n}},{key:"removeWatcher",value:function(t){var e=this.watchers.indexOf(t);-1!==e&&this.watchers.splice(e,1)}},{key:"fireChanged",value:function(t,e,n){return this.observer.fireChanged(t,e,n)}},{key:"fireChanging",value:function(t,e,n){return this.observer.fireChanging(t,e,n)}},{key:"destroy",value:function(){this.watchers.forEach((function(t){t.destroy()})),this.watchers=null,this.observer.destroy(),this.observer=null}}]),t}();function rn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function on(t,e,n){return e&&rn(t.prototype,e),n&&rn(t,n),t}Object.prototype.toProxy=function(){return new Proxy(this,new Ke)};var sn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this,e)}return on(t,[{key:"$proxy",get:function(){return this.toProxy()}}]),on(t,[{key:"$hooks",value:function(){return{beforeAttrChange:"",afterAttrChange:"",onInit:"",beforeViewInit:"",afterViewMount:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$bindNode",value:function(t){this.$$element=t}},{key:"$hasAttr",value:function(t){return I(this,t,!0)}},{key:"$initAttr",value:function(t,e){var n=M(this,t,!0);S(this.beforeAttrChange)&&this.beforeAttrChange.call(this,t,e,n),V(this,t,e,!0),S(this.afterAttrChange)&&this.afterAttrChange.call(this,t,e,n)}},{key:"$initAttrDone",value:function(){S(this.onInit)&&this.onInit.call(this)}},{key:"$setAttr",value:function(t,e){var n=M(this,t,!0);S(this.beforeAttrChange)&&this.beforeAttrChange.call(this,t,e,n),V(this.$proxy,t,e,!0),S(this.afterAttrChange)&&this.afterAttrChange.call(this,t,e,n)}},{key:"$listen",value:function(t,e){var n=M(this,t,!0);if(!lt(n))throw new Error(t+" is not a event");n.on(e)}},{key:"$getTemplate",value:function(t){var e=this.$getMeta();return t?e.template||"":new Promise((function(t){E(e.template)?t(e.template):E(e.templateUrl)?mt.service("$templateCache").getTplByUrl(e.templateUrl).then((function(e){t(e)})):t("")}))}},{key:"$using",value:function(t){var e=this.$getMeta().using,n=t.split("."),i=n.pop(),r=n.join(".");return r&&$(e)&&a(e,(function(e,n){if(e===r)return t=n+"."+i,!0})),t}},{key:"$makeCompileOptions",value:function(){var t=this;return{getEmbedTpl:function(){return t.$$element.getInnerTpl()},containsComponent:function(e){return mt.containsComponent(t.$using(e))},createComponent:function(e){return mt.createComponent(t.$using(e))},containsDirective:function(e){return mt.containsDirective(t.$using(e))},createDirective:function(e){return mt.createDirective(t.$using(e))}}}},{key:"$hasView",value:function(){return k(this.$$childElements)}},{key:"$showView",value:function(){var t=document.createDocumentFragment();return this.$$childElements.forEach((function(e){t.appendChild(e.getHtmlElement())})),t}},{key:"$clearView",value:function(){this.$hasView()&&(this.$$childElements.forEach((function(t){t.destroy()})),this.$$childElements=null)}},{key:"$render",value:function(t){var e=this,n=null;return t?n=this.$hasView()?this.$showView():Bt(this.$getTemplate(t),this.$makeCompileOptions())(this):new Promise((function(t){e.$hasView()?t(e.$showView()):e.$getTemplate().then((function(i){n=Bt(i,e.$makeCompileOptions())(e),t(n)}))}))}},{key:"$refresh",value:function(t){return this.$clearView(),this.$render(t)}},{key:"$mount",value:function(t,e){var n,i=this;e=e||{};n=E(t)?document.querySelector(t):t,e.append||B(n),e.sync?(n.appendChild(this.$render(e.sync)),i.$afterViewMount()):this.$render(e.sync).then((function(t){n.appendChild(t),i.$afterViewMount()}))}},{key:"$unmount",value:function(){null!=this.$$element?(this.$$element.$remove(),this.$$element.removeHtmlElement()):this.$hasView()&&this.$$childElements.forEach((function(t){t.removeHtmlElement()})),null!=this.$$parentComponent&&(this.$$parentComponent.$removeChildCmp(this),this.$$parentComponent=null)}},{key:"$afterViewMount",value:function(){S(this.afterViewMount)&&this.afterViewMount.call(this)}},{key:"$detect",value:function(){if(!this.$$detectTimeout&&this.$$childElements){var t=this;t.$$detectTimeout=setTimeout((function(){t.$$detectTimeout=null,t.$$childElements.forEach((function(t){t.detect()}))}))}}},{key:"$validate",value:function(){var t,e,n;if(2===arguments.length)t=this,e=arguments[0],n=arguments[1];else{if(3!==arguments.length)throw new Error("arguments error");t=arguments[0],e=arguments[1],n=arguments[2]}return this.$$observer.validate(t,e,n)}},{key:"$watch",value:function(){var t,e,n;if(2===arguments.length)t=this,e=arguments[0],n=arguments[1];else{if(3!==arguments.length)throw new Error("arguments error");t=arguments[0],e=arguments[1],n=arguments[2]}return this.$$observer.watch(t,e,n)}},{key:"$eval",value:function(t){return Ht(t,this)}},{key:"$getParentCmp",value:function(){return this.$$parentComponent}},{key:"$removeChildCmp",value:function(t){var e=this.$$childComponents.indexOf(t);-1!==e&&(this.$$childComponents.splice(e,1),t.$$parentComponent=null)}},{key:"$createChildCmp",value:function(t){var e=mt.createComponent(t);return this.$$childComponents.push(e),e.$$parentComponent=this,e}},{key:"$inheritCmp",value:function(t){var e=this;Object.setPrototypeOf(e,m(t)),c(e.$hooks(),(function(t,n){null==e.hasOwnProperty(n)&&(e[n]=function(){})})),this.$$disposers.push(t.$validate("*",(function(t,n){e.$$observer.fireChanging(e,t,n)}))),this.$$disposers.push(t.$watch("*",(function(t,n){e.$$observer.fireChanged(e,t,n)})))}},{key:"$dispose",value:function(t){this.$unmount(),S(this.onDestroy)&&this.onDestroy.call(this),this.$$detectTimeout&&clearTimeout(this.$$detectTimeout),this.$$disposers.forEach((function(t){t.call()})),this.$clearView(),this.$$observer.destroy(),t&&(this.$$element=null),this.$$childComponents=null,this.$$childDirectives=null}},{key:"$destroy",value:function(){this.$dispose(),null!=this.$$element&&(this.$$element.dispose(!0),this.$$element=null)}}],[{key:"construct",value:function(t){this.$$element=null,this.$$childElements=null,this.$$parentComponent=null,this.$$childComponents=[],this.$$childDirectives=[],this.$$detectTimeout=null,this.$$observer=new nn,this.$$disposers=[],null!=t&&this.$setMeta(t),mt.injectServices(this)}}]),t}();function un(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function cn(t,e,n){return e&&un(t.prototype,e),n&&un(t,n),t}var an=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this)}return cn(t,[{key:"$htmlElement",get:function(){return null!=this.$element?this.$element.htmlElement:null}},{key:"$component",get:function(){return null!=this.$element?this.$element.ownerComponent:null}},{key:"$scope",get:function(){return null!=this.$binding?this.$binding.scope:null}}]),cn(t,[{key:"$hooks",value:function(){return{onInit:"",onCompile:"",onInsert:"",onDetect:"",onUpdate:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$bindNode",value:function(t){this.$attr=t,this.$element=t.ownerElement}},{key:"$setBinding",value:function(t){this.$binding=t}},{key:"$compile",value:function(t){S(this.onCompile)&&this.onCompile.call(this,t)}},{key:"$insert",value:function(){S(this.onInsert)&&this.onInsert.call(this),(S(this.onEnter)||S(this.onLeave))&&this.$requestAnimation()}},{key:"$isLoaded",value:function(){return this.$htmlElement.clientWidth>0&&this.$htmlElement.clientHeight>0}},{key:"$requestAnimation",value:function(){var t=this;requestAnimationFrame((function e(){t.$$cancelAnimationToken||(t.$isLoaded()?t.$elementloaded||(t.$elementloaded=!0,null!=t.onEnter&&t.onEnter.call(t)):t.$elementloaded&&(t.$elementloaded=!1,null!=t.onLeave&&t.onLeave.call(t)),requestAnimationFrame(e))}))}},{key:"$cancelAnimation",value:function(){this.$$cancelAnimationToken=!0}},{key:"$detect",value:function(){if(S(this.onDetect))return this.onDetect.call(this);this.$binding.detect()&&this.$update()}},{key:"$update",value:function(){S(this.onUpdate)&&this.onUpdate.call(this)}},{key:"$getAttrValue",value:function(t){var e=this.$element.getAttribute(t);return null==e?"":e.binding.value}},{key:"$dispose",value:function(t){var e=this;this.$cancelAnimation(),S(this.onDestroy)&&this.onDestroy.call(this),t&&(this.$attr=null,this.$element=null),this.$$disposers.forEach((function(t){t.call(e)})),this.$binding=null}},{key:"$destroy",value:function(){this.$dispose(),null!=this.$attr&&(this.$attr.dispose(!0),this.$attr=null,this.$element=null)}}],[{key:"construct",value:function(){this.$$disposers=[],this.$$cancelAnimationToken=!1,this.$output=!1,this.$binding=null,this.$attr=null,this.$element=null,this.$priority=0,this.$elementloaded=!1,mt.injectServices(this)}}]),t}();function ln(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var fn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this)}var e,n,i;return e=t,i=[{key:"construct",value:function(){mt.injectServices(this)}}],(n=[{key:"$hooks",value:function(){return{onInit:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$execute",value:function(){if(S(this.onExecute))return this.onExecute.apply(this,arguments)}},{key:"$destroy",value:function(){S(this.onDestroy)&&this.onDestroy.call(this)}}])&&ln(e.prototype,n),i&&ln(e,i),t}();function hn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var pn,yn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.construct.call(this)}var e,n,i;return e=t,i=[{key:"construct",value:function(){mt.injectServices(this)}}],(n=[{key:"$hooks",value:function(){return{onInit:"",onDestroy:""}}},{key:"$getMeta",value:function(){return this.$$meta||{}}},{key:"$setMeta",value:function(t){this.$$meta=t}},{key:"$destroy",value:function(){S(this.onDestroy)&&this.onDestroy.call(this)}}])&&hn(e.prototype,n),i&&hn(e,i),t}();function mn(t){return{component:function(e,n){return n.namespace=t,dn(e,n)},directive:function(e,n){return S(n)&&(n={methods:{onInsert:n,onUpdate:n}}),n.namespace=t,vn(e,n)},service:function(e,n){return n.namespace=t,gn(e,n)},filter:function(e,n){return S(n)&&(n={methods:{onExecute:n}}),n.namespace=t,bn(e,n)}}}function dn(t,e){return mt.buildConstructor(t,e,{contractType:ht.component,superClass:On(sn)})}function vn(t,e){return S(e)&&(e={methods:{onInsert:e,onUpdate:e}}),mt.buildConstructor(t,e,{contractType:ht.directive,superClass:On(an)})}function bn(t,e){return S(e)&&(e={methods:{onExecute:e}}),mt.buildConstructor(t,e,{contractType:ht.filter,superClass:On(fn)})}function gn(t,e){return mt.buildConstructor(t,e,{contractType:ht.service,superClass:On(yn)})}function wn(t){return t instanceof sn}function kn(t){return t instanceof an}function $n(t){return t instanceof fn}function xn(t){return t instanceof yn}function En(t){var e,n;n=(e=E(t)?document.querySelector(t):t).innerHTML,new sn({template:n}).$mount(e)}function On(t){function e(){t.construct.call(this)}return e.prototype=t.prototype,e}function Cn(t){return function(e){var n=t.selector||e.name;mt.registerConstructor(ht.component,n,e,t)}}function Sn(t){return function(e){var n=t.selector||e.name;mt.registerConstructor(ht.directive,n,e,t)}}function jn(t){return function(e){var n=t.selector||e.name;mt.registerConstructor(ht.filter,n,e,t)}}function _n(t){return function(e){var n=t.selector||e.name;mt.registerConstructor(ht.service,n,e,t)}}function Pn(t){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nn(t,e){return!e||"object"!==Pn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function An(t){return(An=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dn(t,e){return(Dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var In;_n({namespace:"sine",selector:"$templateCache"})(pn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Nn(this,An(e).call(this))).tplCache={},t.promiseCache={},t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dn(t,e)}(e,t),n=e,(i=[{key:"getTplByUrl",value:function(t){var e=this;return this.tplCache[t]?new Promise((function(n){n(e.tplCache[t])})):(this.promiseCache[t]||(this.promiseCache[t]=it(t).then((function(n){return e.promiseCache[t]=null,e.tplCache[t]=n.data||"",e.tplCache[t]}))),this.promiseCache[t])}}])&&Tn(n.prototype,i),r&&Tn(n,r),e}(yn));function Mn(t){return(Mn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vn(t,e){return!e||"object"!==Mn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rn(t,e){return(Rn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Un;_n({namespace:"sine",selector:"$modelOptions"})(In=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Vn(this,Ln(e).call(this))).cssClass={pristine:"n-pristine",dirty:"n-dirty",valid:"n-valid",invalid:"n-invalid"},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rn(t,e)}(e,t),e}(yn));function qn(t){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Wn(t,e){return!e||"object"!==qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bn(t){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hn(t,e){return(Hn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kn;Sn({namespace:"sine",selector:"n-bind"})(Un=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wn(this,Bn(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hn(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.bind()}},{key:"onUpdate",value:function(){this.bind()}},{key:"bind",value:function(){this.$htmlElement.innerText=this.$binding.compute()}}])&&Fn(n.prototype,i),r&&Fn(n,r),e}(an));function zn(t){return(zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Zn(t,e){return!e||"object"!==zn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xn(t,e){return(Xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jn;Sn({namespace:"sine",selector:"n-embed"})(Kn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Zn(this,Gn(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xn(t,e)}(e,t),n=e,(i=[{key:"onCompile",value:function(t){var e=t.getEmbedTpl();e&&this.$element.setInnerTpl(e)}}])&&Yn(n.prototype,i),r&&Yn(n,r),e}(an));function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ti(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ei(t,e){return!e||"object"!==Qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ni(t){return(ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ii(t,e){return(ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ri;Sn({namespace:"sine",selector:"n-hide",inject:{$animate:"$animate"}})(Jn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ei(this,ni(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ii(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.toggle()}},{key:"onUpdate",value:function(){this.toggle()}},{key:"toggle",value:function(){var t=this;this.$binding.compute()?this.$animate.leave(this.$element,(function(){t.$htmlElement.style.display="none"})):this.$animate.enter(this.$element,(function(){t.$htmlElement.style.display="initial"}))}}])&&ti(n.prototype,i),r&&ti(n,r),e}(an));function oi(t){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function si(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ui(t,e){return!e||"object"!==oi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ci(t){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ai(t,e){return(ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var li;Sn({namespace:"sine",selector:"n-if",inject:{$animate:"$animate"}})(ri=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ui(this,ci(e).call(this))).htmlComment=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ai(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.htmlComment=document.createComment("n-if"),this.$binding.compute()||H(this.$htmlElement,this.htmlComment)}},{key:"onUpdate",value:function(){var t=this;this.$binding.compute()?null==this.$htmlElement.parentNode&&this.$animate.enter(this.$element,(function(){H(t.htmlComment,t.$htmlElement)})):null!=this.$htmlElement.parentNode&&this.$animate.leave(this.$element,(function(){H(t.$htmlElement,t.htmlComment)}))}},{key:"onDestroy",value:function(){this.htmlComment=null}}])&&si(n.prototype,i),r&&si(n,r),e}(an));function fi(t){return(fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function pi(t,e){return!e||"object"!==fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function yi(t){return(yi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mi(t,e){return(mi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var di;Sn({namespace:"sine",selector:"n-model",inject:{options:"$modelOptions"}})(li=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=pi(this,yi(e).call(this))).$viewValue=null,t.$modelValue=null,t.$parsers=[],t.$formatters=[],t.$viewChangeListeners=[],t.$validators=[],t.$feedback="",t.$pristine=!0,t.$dirty=!1,t.$valid=!0,t.$invalid=!1,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&mi(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){var t=this;if(this.setViewValue(),null!=this.$component)throw lt(this.$component.change)&&this.$component.change.on((function(e,n){t.setModelValue(n.newvalue)})),new Error("Compoent "+this.$component.$$meta.selector+"must define [change] event");this.$htmlElement.addEventListener("input",(function(e){t.setModelValue(e.target.value)}))}},{key:"onUpdate",value:function(){this.setViewValue()}},{key:"onDestroy",value:function(){this.$parsers=null,this.$formatters=null,this.$viewChangeListeners=null,this.$validators=null}},{key:"setViewValue",value:function(){var t=this;this.$modelValue=this.$binding.compute();var e=this.$modelValue;this.$validators.forEach((function(e){e.call(t,t.$modelValue,t.$viewValue)})),this.$formatters.forEach((function(n){e=n.call(t,e)})),this.$viewValue!==e&&(this.$viewValue=e,null==this.$component?this.$htmlElement.value=this.$modelValue:this.$component.$setAttr("value",this.$modelValue)),this.updateCss(),this.updateState()}},{key:"setModelValue",value:function(t){var e=this;this.setDirty(!0),this.$viewValue=t,this.$viewChangeListeners.forEach((function(n){n.call(e,t)}));var n=this.$viewValue;this.$parsers.forEach((function(t){n=t.call(e,n)})),this.$modelValue!==n&&(this.$modelValue=n,this.$validators.forEach((function(t){t.call(e,e.$modelValue,e.$viewValue)})),this.$binding.assign(this.$modelValue))}},{key:"updateCss",value:function(){var t=this.$htmlElement,e=this.options.cssClass;this.$dirty?(t.classList.add(e.dirty),t.classList.remove(e.pristine)):(t.classList.add(e.pristine),t.classList.remove(e.dirty)),this.$valid?(t.classList.add(e.valid),t.classList.remove(e.invalid)):(t.classList.add(e.invalid),t.classList.remove(e.valid))}},{key:"updateState",value:function(){var t=this.$htmlElement.name;if(t){var e=this.$binding.scope.toProxy();null==e[t]&&(e[t]={});var n=e[t].toProxy();n.$pristine=this.$pristine,n.$dirty=this.$dirty,n.$valid=this.$valid,n.$invalid=this.$invalid,n.$feedback=this.$feedback}}},{key:"setDirty",value:function(t){this.$dirty=t,this.$pristine=!t,this.updateState(),this.updateCss()}},{key:"setValidity",value:function(t,e){this.$valid=t,this.$invalid=!t,this.$feedback=e,this.updateState(),this.updateCss()}}])&&hi(n.prototype,i),r&&hi(n,r),e}(an));function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function gi(t,e){return!e||"object"!==vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function wi(t){return(wi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ki(t,e){return(ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $i;Sn({namespace:"sine",selector:"n-repeat"})(di=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=gi(this,wi(e).call(this))).scope=null,t.itemExp="",t.itemsExp="",t.itemTemplate="",t.dataItems=[],t.cmpItems=[],t.header=null,t.footer=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ki(t,e)}(e,t),n=e,(i=[{key:"onCompile",value:function(){var t=this.$attr.nodeValue,e=this.$element,n=/^([a-z_]+\w+)\s+in\s+(.+)$/i.exec(t);if(null==n)throw new Error("n-repeat: parameter is not valid");this.itemExp=n[1],this.itemsExp=n[2],e.removeAttribute(this.$attr),this.itemTemplate=e.getOuterTpl();var i=this,r=e.createConnection("n-repeat",(function(t){var e=document.createDocumentFragment(),n=t.$eval(i.itemsExp);return i.scope=t,i.setDataItems(n),i.header=document.createComment("start: n-repeat"),i.footer=document.createComment("end: n-repeat"),e.appendChild(i.header),e.appendChild(i.footer),e}));e.parentNode.replaceChild(e,r),e.destroy(),r.onInsert=function(){i.render()},r.onDetect=function(){var t=i.scope.$eval(i.itemsExp);i.dataItems!==t?(i.setDataItems(t),i.render()):i.cmpItems.forEach((function(t){t.$detect()}))},r.onDestroy=function(){i.$destroy(),e=null,r=null}}},{key:"onDestroy",value:function(){this.cmpItems.forEach((function(t){t.$destroy()})),this.cmpItems=null,this.scope=null,this.dataItems=null,this.header=null,this.footer=null}},{key:"setDataItems",value:function(t){var e=this;k(t)?this.dataItems=t:this.dataItems=[],this.scope.$watch(this.dataItems,"length",(function(){e.render()}))}},{key:"getCmpItem",value:function(t){var e=this,n=this.cmpItems.filter((function(n){return n[e.itemExp]===t}));if(0===n.length)return null;var i=n[0];return this.cmpItems=this.cmpItems.filter((function(n){return n[e.itemExp]!==t})),i}},{key:"render",value:function(){var t=this,e=document.createDocumentFragment(),n=[],i=0;c(t.dataItems,(function(r,o){var s=t.getCmpItem(r);null==s&&((s=new sn({template:t.itemTemplate}))[t.itemExp]=r,s.$inheritCmp(t.scope)),s.$index=i,e.appendChild(s.$render(!0)),n.push(s),i++})),t.cmpItems.length>0&&t.cmpItems.forEach((function(t){t.$destroy()})),t.cmpItems=n,z(t.header,t.footer),t.footer.parentNode.insertBefore(e,t.footer)}}])&&bi(n.prototype,i),r&&bi(n,r),e}(an));function xi(t){return(xi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Oi(t,e){return!e||"object"!==xi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ci(t){return(Ci=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Si(t,e){return(Si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ji;Sn({namespace:"sine",selector:"n-show",inject:{$animate:"$animate"}})($i=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Oi(this,Ci(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Si(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.toggle()}},{key:"onUpdate",value:function(){this.toggle()}},{key:"toggle",value:function(){var t=this;this.$binding.compute()?this.$animate.enter(this.$element,(function(){t.$htmlElement.style.display="initial"})):this.$animate.leave(this.$element,(function(){t.$htmlElement.style.display="none"}))}}])&&Ei(n.prototype,i),r&&Ei(n,r),e}(an));function _i(t){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Ti(t,e){return!e||"object"!==_i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ni(t){return(Ni=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ai(t,e){return(Ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Di,Ii=Sn({namespace:"sine",selector:"n-class"})(ji=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ti(this,Ni(e).call(this))).unwatch=null,t.initialClassList=[],t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ai(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.parseClass(),this.setClass()}},{key:"onUpdate",value:function(){this.setClass()}},{key:"watchArray",value:function(t,e){var n=this;this.unwatchArray(),this.$scope.$watch(t,"length",(function(){e.call(n)}))}},{key:"unwatchArray",value:function(){null!=this.unwatch&&(this.unwatch.call(this),this.unwatch=null)}},{key:"onDestroy",value:function(){this.unwatchArray()}},{key:"textToArray",value:function(t){return t.split(" ").filter((function(t){return t.trim().length>0}))}},{key:"parseClass",value:function(){var t=this.$getAttrValue("class");t&&(this.initialClassList=this.textToArray(t))}},{key:"setClassList",value:function(t){this.$htmlElement.classList.forEach((function(t){this.$htmlElement.classList.remove(t)})),this.initialClassList.forEach((function(t){this.$htmlElement.classList.add(t)})),t.forEach((function(t){this.$htmlElement.classList.add(t)}))}},{key:"setClass",value:function(){if(!this.skip()){var t=this,e=[],n=this.$binding.compute();if(null!=n)if(E(n))e=this.textToArray(n);else{if(!k(n))throw new Error("Parameter of n-class should be string or array");e=n,this.watchArray(n,(function(){t.setClassList(n)}))}this.setClassList(e)}}},{key:"skip",value:function(){return!1}}])&&Pi(n.prototype,i),r&&Pi(n,r),e}(an))||ji;function Mi(t){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Li(t,e){return!e||"object"!==Mi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ri(t){return(Ri=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ui(t,e){return(Ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qi;Sn({namespace:"sine",selector:"n-class-even"})(Di=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Li(this,Ri(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ui(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!0&this.$scope.$index}}])&&Vi(n.prototype,i),r&&Vi(n,r),e}(Ii));function Fi(t){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Bi(t,e){return!e||"object"!==Fi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hi(t){return(Hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ki(t,e){return(Ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zi;Sn({namespace:"sine",selector:"n-class-odd"})(qi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Bi(this,Hi(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ki(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!1&this.$scope.$index}}])&&Wi(n.prototype,i),r&&Wi(n,r),e}(Ii));function Yi(t){return(Yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Gi(t,e){return!e||"object"!==Yi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Xi(t){return(Xi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ji(t,e){return(Ji=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qi,tr=Sn({namespace:"sine",selector:"n-style"})(zi=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Gi(this,Xi(e).call(this))).unwatch=null,t.initialStyle={},t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ji(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.parseStyle(),this.setStyle()}},{key:"onUpdate",value:function(){this.setStyle()}},{key:"onDestroy",value:function(){this.unwatchObj()}},{key:"watchObj",value:function(t,e){var n=this;this.unwatchObj(),this.$scope.$watch(t,"*",(function(){e.call(n)}))}},{key:"unwatchObj",value:function(){null!=this.unwatch&&(this.unwatch.call(this),this.unwatch=null)}},{key:"parseStyle",value:function(){var t=this.$getAttrValue("style");t&&(this.initialStyle=this.textToObject(t))}},{key:"textToObject",value:function(t){var e={};return t.split(";").filter((function(t){return t.trim().length>0})).forEach((function(t){var n=t.split(":"),i=n[0],r=n[1];e[i]=r})),e}},{key:"applyStyle",value:function(t){var e=this.$htmlElement;e.style="",c(this.initialStyle,(function(t,n){e.style[n]=t})),c(t,(function(t,n){e.style[n]=t}))}},{key:"setStyle",value:function(){if(!this.skip()){var t=this,e={},n=this.$binding.compute();if(null!=n)if(E(n))e=this.textToObject(n);else{if(!$(n))throw new Error("Parameter of n-style should be string or object");e=n,this.watchObj(n,(function(){t.applyStyle(n)}))}this.applyStyle(e)}}},{key:"skip",value:function(){return!1}}])&&Zi(n.prototype,i),r&&Zi(n,r),e}(an))||zi;function er(t){return(er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ir(t,e){return!e||"object"!==er(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function rr(t){return(rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function or(t,e){return(or=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var sr;Sn({namespace:"sine",selector:"n-style-even"})(Qi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ir(this,rr(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&or(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!0&this.$scope.$index}}])&&nr(n.prototype,i),r&&nr(n,r),e}(tr));function ur(t){return(ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function ar(t,e){return!e||"object"!==ur(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lr(t){return(lr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fr(t,e){return(fr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hr;Sn({namespace:"sine",selector:"n-style-odd"})(sr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ar(this,lr(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fr(t,e)}(e,t),n=e,(i=[{key:"skip",value:function(){return!1&this.$scope.$index}}])&&cr(n.prototype,i),r&&cr(n,r),e}(tr));function pr(t){return(pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function mr(t,e){return!e||"object"!==pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dr(t){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vr(t,e){return(vr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var br;Sn({namespace:"sine",selector:"n-switch"})(hr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=mr(this,dr(e).call(this))).value=null,t.valueChanged=new ct,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.value=this.$binding.compute()}},{key:"onUpdate",value:function(){var t=this.value,e=this.$binding.compute();e!==t&&(this.value=e),this.valueChanged.fire({oldValue:t,newValue:e})}}])&&yr(n.prototype,i),r&&yr(n,r),e}(an));function gr(t){return(gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function kr(t,e){return!e||"object"!==gr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $r(t){return($r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xr(t,e){return(xr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Er;Sn({namespace:"sine",selector:"n-switch-default"})(br=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=kr(this,$r(e).call(this))).isMatch=!1,t.htmlComment=null,t.switchWhenDirs=[],t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xr(t,e)}(e,t),n=e,(i=[{key:"initSwitchWhenDirs",value:function(){for(var t=this.$element;null!=t.previousSibling;){var e=t.previousSibling.getDirective("n-switch-when");null!=e&&this.switchWhenDirs.push(e),t=t.previousSibling}}},{key:"match",value:function(){return!this.switchWhenDirs.some((function(t){return t.isMatch}))}},{key:"onInsert",value:function(){var t=this;this.initSwitchWhenDirs(),this.isMatch=this.match(),this.htmlComment=document.createComment("n-switch-default"),this.isMatch||H(this.$htmlElement,this.htmlComment),this.switchWhenDirs.forEach((function(e){e.isMatchChanged.on((function(){t.update()}))}))}},{key:"update",value:function(){var t=this.isMatch,e=this.match();e!==t&&(this.isMatch=e,this.isMatch?null==this.$htmlElement.parentNode&&H(this.htmlComment,this.$htmlElement):null!=this.$htmlElement.parentNode&&H(this.$htmlElement,this.htmlComment))}},{key:"onDestroy",value:function(){this.htmlComment=null,this.switchWhenDirs=null}}])&&wr(n.prototype,i),r&&wr(n,r),e}(an));function Or(t){return(Or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Cr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Sr(t,e){return!e||"object"!==Or(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function jr(t){return(jr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _r(t,e){return(_r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Sn({namespace:"sine",selector:"n-switch-when"})(Er=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Sr(this,jr(e).call(this))).isMatch=!1,t.htmlComment=null,t.switchDir=null,t.isMatchChanged=new ct,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_r(t,e)}(e,t),n=e,(i=[{key:"initSwitchDir",value:function(){var t=this.$element.parentNode.getDirective("n-switch");if(null==t)throw new Error("Require n-switch directive");this.switchDir=t}},{key:"onInsert",value:function(){var t=this;this.initSwitchDir(),this.htmlComment=document.createComment("n-switch-when"),this.isMatch=this.$binding.compute()===this.switchDir.value,this.isMatch||H(this.$htmlElement,this.htmlComment),this.switchDir.valueChanged.on((function(){t.update()}))}},{key:"update",value:function(){var t=this.isMatch,e=this.$binding.compute()===this.switchDir.value;e!==t&&(this.isMatch=e,this.isMatchChanged.fire(),this.isMatch?null==this.$htmlElement.parentNode&&H(this.htmlComment,this.$htmlElement):null!=this.$htmlElement.parentNode&&H(this.$htmlElement,this.htmlComment))}},{key:"onDestroy",value:function(){this.htmlComment=null,this.switchDir=null}}])&&Cr(n.prototype,i),r&&Cr(n,r),e}(an));function Pr(t){return(Pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Nr(t,e){return!e||"object"!==Pr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ar(t){return(Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dr(t,e){return(Dr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ir,Mr=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nr(this,Ar(e).call(this))).attrName=t,n}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dr(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.perform()}},{key:"onUpdate",value:function(){this.perform()}},{key:"perform",value:function(){this.$binding.compute()?this.$htmlElement.hasAttribute(this.attrName)||this.$htmlElement.setAttribute(this.attrName,""):this.$htmlElement.hasAttribute(this.attrName)&&this.$htmlElement.removeAttribute(this.attrName)}}])&&Tr(n.prototype,i),r&&Tr(n,r),e}(an);function Vr(t){return(Vr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){return!e||"object"!==Vr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rr(t){return(Rr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ur(t,e){return(Ur=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var qr;Sn({namespace:"sine",selector:"n-checked"})(Ir=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Lr(this,Rr(e).call(this,"checked"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ur(t,e)}(e,t),e}(Mr));function Fr(t){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wr(t,e){return!e||"object"!==Fr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Br(t){return(Br=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Hr(t,e){return(Hr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kr;Sn({namespace:"sine",selector:"n-disabled"})(qr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Wr(this,Br(e).call(this,"disabled"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Hr(t,e)}(e,t),e}(Mr));function zr(t){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yr(t,e){return!e||"object"!==zr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){return(Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xr;Sn({namespace:"sine",selector:"n-readonly"})(Kr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Yr(this,Zr(e).call(this,"readonly"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gr(t,e)}(e,t),e}(Mr));function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Qr(t,e){return!e||"object"!==Jr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function to(t){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function eo(t,e){return(eo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var no;Sn({namespace:"sine",selector:"n-selected"})(Xr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Qr(this,to(e).call(this,"selected"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&eo(t,e)}(e,t),e}(Mr));function io(t){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ro(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function oo(t,e){return!e||"object"!==io(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function so(t){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function uo(t,e){return(uo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var co;Sn({namespace:"sine",selector:"n-name"})(no=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=oo(this,so(e).call(this))).$output=!0,t.name=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&uo(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){if(this.name=this.$binding.text,this.name){var t=this.$scope.toProxy();null!=this.$component?t[this.name]=this.$component:t[this.name]=this.$element}}},{key:"onDestroy",value:function(){null!=this.name&&(this.$scope[this.name]=null)}},{key:"setCmp",value:function(t){this.$scope.toProxy()[this.name]=t}}])&&ro(n.prototype,i),r&&ro(n,r),e}(an));function ao(t){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function fo(t,e){return!e||"object"!==ao(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ho(t){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function po(t,e){return(po=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yo;Sn({namespace:"sine",selector:"n-bind-cmp"})(co=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=fo(this,ho(e).call(this))).$priority=5,t.nameDir=null,t.config=null,t.view=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&po(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.init(),this.render()}},{key:"onUpdate",value:function(){this.clear(),this.render()}},{key:"onDestroy",value:function(){this.clear(),this.nameDir=null}},{key:"init",value:function(){this.nameDir=this.$element.getDirective("n-name"),this.bindCmpOptionsDir=this.$element.getDirective("n-bind-cmp-options"),null!=this.bindCmpOptionsDir?this.config=this.bindCmpOptionsDir.value:this.config={}}},{key:"clear",value:function(){null!=this.view&&this.view.$destroy(),this.config=null}},{key:"render",value:function(){var t=this.$binding.compute();null!=t&&(this.view=this.$binding.scope.$createChildCmp(t),this.config&&this.config.onInit(this.view),this.view.$mount(this.$htmlElement),null!=this.nameDir&&this.nameDir.setCmp(this.view))}}])&&lo(n.prototype,i),r&&lo(n,r),e}(an));function mo(t){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function bo(t,e){return!e||"object"!==mo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wo(t,e){return(wo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ko;Sn({namespace:"sine",selector:"n-bind-cmp-options"})(yo=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bo(this,go(e).call(this))).value=null,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wo(t,e)}(e,t),n=e,(i=[{key:"onInsert",value:function(){this.updateOptions()}},{key:"onUpdate",value:function(){this.clearOptions()}},{key:"onDestroy",value:function(){this.clear()}},{key:"updateOptions",value:function(){this.value=this.$binding.compute()}},{key:"clearOptions",value:function(){this.value=null}}])&&vo(n.prototype,i),r&&vo(n,r),e}(an));function $o(t){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function Eo(t,e){return!e||"object"!==$o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oo(t){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Co(t,e){return(Co=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var So,jo=/\b(transform|all)(,|$)/;_n({namespace:"sine",selector:"$animate"})(ko=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Eo(this,Oo(e).call(this))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Co(t,e)}(e,t),n=e,(i=[{key:"enter",value:function(t,e){var n=t.htmlElement;if(S(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb()),!S(n._enterCb)&&1===n.nodeType){var i=this.resolveAnimationContext(t);if(!i)return e();var r=this.resolveAnimation(i),o=this,s=r.type,u=r.enterClass,c=r.enterToClass,a=r.enterActiveClass,l=r.duration,f=q($(l)?l.enter:l),h=n._enterCb=o.once((function(){o.removeAnimationClass(n,c),o.removeAnimationClass(n,a),h.cancelled?(o.removeAnimationClass(n,u),i.enterCancelled&&i.enterCancelled(n)):i.afterEnter&&i.afterEnter(n),n._enterCb=null}));i.beforeEnter&&i.beforeEnter(n),o.addAnimationClass(n,u),o.addAnimationClass(n,a),o.nextFrame((function(){o.removeAnimationClass(n,u),h.cancelled||(o.addAnimationClass(n,c),o.isValidDuration(f)?setTimeout(h,f):o.whenAnimationEnds(n,s,h))})),e(),i.enter&&i.enter(n,h)}}},{key:"leave",value:function(t,e){var n=t.htmlElement;S(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var i=this.resolveAnimationContext(t);if(!i||1!==n.nodeType)return e();if(!S(n._leaveCb)){var r=this.resolveAnimation(i),o=this,s=r.type,u=r.leaveClass,c=r.leaveToClass,a=r.leaveActiveClass,l=r.duration,f=q($(l)?l.leave:l),h=n._leaveCb=o.once((function(){o.removeAnimationClass(n,c),o.removeAnimationClass(n,a),h.cancelled?(o.removeAnimationClass(n,u),i.leaveCancelled&&i.leaveCancelled(n)):(e(),i.afterLeave&&i.afterLeave(n)),n._leaveCb=null}));i.delayLeave?i.delayLeave(p):p()}function p(){h.cancelled||(i.beforeLeave&&i.beforeLeave(n),o.addAnimationClass(n,u),o.addAnimationClass(n,a),o.nextFrame((function(){o.removeAnimationClass(n,u),h.cancelled||(o.addAnimationClass(n,c),o.isValidDuration(f)?setTimeout(h,f):o.whenAnimationEnds(n,s,h))})),i.leave&&i.leave(n,h))}}},{key:"resolveAnimation",value:function(t){var e={};return!1!==t.css&&f(e,this.autoCssAnimation(t.name||"n")),f(e,t),e}},{key:"autoCssAnimation",value:function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}},{key:"once",value:function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}},{key:"nextFrame",value:function(t){requestAnimationFrame((function(){requestAnimationFrame(t)}))}},{key:"addAnimationClass",value:function(t,e){var n=t._animationClasses||(t._animationClasses=[]);n.indexOf(e)<0&&(n.push(e),J(t,e))}},{key:"removeAnimationClass",value:function(t,e){t._animationClasses&&F(t._animationClasses,e),Q(t,e)}},{key:"whenAnimationEnds",value:function(t,e,n){var i=this.getAnimationInfo(t,e),r=i.type,o=i.timeout,s=i.propCount;if(!r)return n();var u="transition"===r?"transitionend":"animationend",c=0,a=function(){t.removeEventListener(u,l),n()},l=function(e){e.target===t&&++c>=s&&a()};setTimeout((function(){c<s&&a()}),o+1),t.addEventListener(u,l)}},{key:"getAnimationInfo",value:function(t,e){var n,i=window.getComputedStyle(t),r=i.transitionDelay.split(", "),o=i.transitionDuration.split(", "),s=this.getTimeout(r,o),u=i.animationDelay.split(", "),c=i.animationDuration.split(", "),a=this.getTimeout(u,c),l=0,f=0;return"transition"===e?s>0&&(n="transition",l=s,f=o.length):"animation"===e?a>0&&(n="animation",l=a,f=c.length):f=(n=(l=Math.max(s,a))>0?s>a?"transition":"animation":null)?"transition"===n?o.length:c.length:0,{type:n,timeout:l,propCount:f,hasTransform:"transition"===n&&jo.test(i.transitionProperty)}}},{key:"getTimeout",value:function(t,e){for(var n=this;t.length<e.length;)t=t.concat(t);return Math.max.apply(null,e.map((function(e,i){return n.toMs(e)+n.toMs(t[i])})))}},{key:"toMs",value:function(t){return 1e3*Number(t.slice(0,-1))}},{key:"isValidDuration",value:function(t){return"number"==typeof t&&!isNaN(t)}},{key:"resolveAnimationContext",value:function(t){var e=t.getDirectives().filter((function(t){return t.animation=!0}));return e.length?e[0]:null}}])&&xo(n.prototype,i),r&&xo(n,r),e}(yn));function _o(t){return(_o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Po(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function To(t,e){return!e||"object"!==_o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function No(t){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ao(t,e){return(Ao=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Do=Sn({namespace:"sine",selector:"animation"})(So=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=To(this,No(e).call(this))).animation=!0,t.name="",t.type="",t.css=!0,t.$priority=-100,t}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ao(t,e)}(e,t),n=e,(i=[{key:"nextFrame",value:function(t){requestAnimationFrame((function(){requestAnimationFrame(t)}))}}])&&Po(n.prototype,i),r&&Po(n,r),e}(an))||So;n.d(e,"decorator",(function(){return i})),n.d(e,"forEach",(function(){return c})),n.d(e,"some",(function(){return a})),n.d(e,"copy",(function(){return l})),n.d(e,"extend",(function(){return f})),n.d(e,"merge",(function(){return h})),n.d(e,"object",(function(){return m})),n.d(e,"inherit",(function(){return d})),n.d(e,"lowercase",(function(){return v})),n.d(e,"uppercase",(function(){return b})),n.d(e,"isUndefined",(function(){return g})),n.d(e,"isDefined",(function(){return w})),n.d(e,"isObject",(function(){return $})),n.d(e,"isBlankObject",(function(){return x})),n.d(e,"isNumber",(function(){return O})),n.d(e,"isDate",(function(){return C})),n.d(e,"isFunction",(function(){return S})),n.d(e,"isRegExp",(function(){return j})),n.d(e,"isBoolean",(function(){return _})),n.d(e,"isArray",(function(){return k})),n.d(e,"isString",(function(){return E})),n.d(e,"isSame",(function(){return T})),n.d(e,"isFormData",(function(){return P})),n.d(e,"debug",(function(){return N})),n.d(e,"contains",(function(){return A})),n.d(e,"containsStr",(function(){return D})),n.d(e,"hasProperty",(function(){return I})),n.d(e,"getProperty",(function(){return M})),n.d(e,"setProperty",(function(){return V})),n.d(e,"concat",(function(){return L})),n.d(e,"orderBy",(function(){return R})),n.d(e,"orderByDescending",(function(){return U})),n.d(e,"toNumber",(function(){return q})),n.d(e,"remove",(function(){return F})),n.d(e,"getChildNodes",(function(){return W})),n.d(e,"clearChildNodes",(function(){return B})),n.d(e,"replaceNode",(function(){return H})),n.d(e,"removeNode",(function(){return K})),n.d(e,"removeNodeBetween",(function(){return z})),n.d(e,"insertNodeAfter",(function(){return Y})),n.d(e,"queryElementLoaded",(function(){return Z})),n.d(e,"queryElementUnloaded",(function(){return G})),n.d(e,"queryElementState",(function(){return X})),n.d(e,"addClass",(function(){return J})),n.d(e,"removeClass",(function(){return Q})),n.d(e,"httpGet",(function(){return it})),n.d(e,"httpPost",(function(){return rt})),n.d(e,"Messenger",(function(){return ct})),n.d(e,"MessengerBus",(function(){return at})),n.d(e,"isMessenger",(function(){return lt})),n.d(e,"typeConst",(function(){return ht})),n.d(e,"injector",(function(){return mt})),n.d(e,"Injector",(function(){return yt})),n.d(e,"Component",(function(){return sn})),n.d(e,"Directive",(function(){return an})),n.d(e,"Filter",(function(){return fn})),n.d(e,"Service",(function(){return yn})),n.d(e,"isComponent",(function(){return wn})),n.d(e,"isDirective",(function(){return kn})),n.d(e,"isFilter",(function(){return $n})),n.d(e,"isService",(function(){return xn})),n.d(e,"namespace",(function(){return mn})),n.d(e,"component",(function(){return dn})),n.d(e,"directive",(function(){return vn})),n.d(e,"filter",(function(){return bn})),n.d(e,"service",(function(){return gn})),n.d(e,"bootstrap",(function(){return En})),n.d(e,"compile",(function(){return Bt})),n.d(e,"compute",(function(){return Ht})),n.d(e,"parse",(function(){return Wt})),n.d(e,"parseExp",(function(){return Kt})),n.d(e,"parseAssignment",(function(){return zt})),n.d(e,"ClassDirective",(function(){return Ii})),n.d(e,"StyleDirective",(function(){return tr})),n.d(e,"Animation",(function(){return Do}))}])}));